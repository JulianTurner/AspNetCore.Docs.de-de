---
title: Leitfaden zur Bedrohungsabwehr für Blazor Server in ASP.NET Core
author: guardrex
description: In diesem Artikel erfahren Sie, wie Sie Sicherheitsbedrohungen für Blazor Server-Apps vermeiden.
monikerRange: '>= aspnetcore-3.1'
ms.author: riande
ms.custom: mvc
ms.date: 11/09/2020
no-loc:
- appsettings.json
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: blazor/security/server/threat-mitigation
ms.openlocfilehash: 0e8b26110a970526b5f6306da236a92f52e64604
ms.sourcegitcommit: fe5a287fa6b9477b130aa39728f82cdad57611ee
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/10/2020
ms.locfileid: "94430953"
---
# <a name="threat-mitigation-guidance-for-aspnet-core-no-locblazor-server"></a><span data-ttu-id="2516f-103">Leitfaden zur Bedrohungsabwehr für Blazor Server in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="2516f-103">Threat mitigation guidance for ASP.NET Core Blazor Server</span></span>

<span data-ttu-id="2516f-104">Von [Javier Calvarro Nelson](https://github.com/javiercn)</span><span class="sxs-lookup"><span data-stu-id="2516f-104">By [Javier Calvarro Nelson](https://github.com/javiercn)</span></span>

<span data-ttu-id="2516f-105">Blazor Server-Server-Apps basieren auf einem *zustandsbehafteten* Datenverarbeitungsmodell, in dem die Beziehung zwischen Server und Client sehr langlebig ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-105">Blazor Server apps adopt a *stateful* data processing model, where the server and client maintain a long-lived relationship.</span></span> <span data-ttu-id="2516f-106">Der persistente Zustand wird durch einen [Circuit](xref:blazor/state-management) aufrechterhalten, der mehrere potenziell langlebige Verbindungen umfassen kann.</span><span class="sxs-lookup"><span data-stu-id="2516f-106">The persistent state is maintained by a [circuit](xref:blazor/state-management), which can span connections that are also potentially long-lived.</span></span>

<span data-ttu-id="2516f-107">Wenn ein Benutzer eine Blazor Server-Website besucht, erstellt der Server einen Circuit im Arbeitsspeicher des Servers.</span><span class="sxs-lookup"><span data-stu-id="2516f-107">When a user visits a Blazor Server site, the server creates a circuit in the server's memory.</span></span> <span data-ttu-id="2516f-108">Der Circuit meldet dem Browser, welche Inhalte dieser rendern und wie dieser auf Ereignisse antworten soll, z. B. wenn der Benutzer in der Benutzeroberfläche auf eine Schaltfläche klickt.</span><span class="sxs-lookup"><span data-stu-id="2516f-108">The circuit indicates to the browser what content to render and responds to events, such as when the user selects a button in the UI.</span></span> <span data-ttu-id="2516f-109">Für die Ausführung dieser Aktionen ruft ein Circuit JavaScript-Funktionen in den Browser- und .NET-Methoden des Benutzers auf dem Server auf.</span><span class="sxs-lookup"><span data-stu-id="2516f-109">To perform these actions, a circuit invokes JavaScript functions in the user's browser and .NET methods on the server.</span></span> <span data-ttu-id="2516f-110">Diese bidirektionale JavaScript-basierte Interaktion wird als [JavaScript-Interop (JS-Interop)](xref:blazor/call-javascript-from-dotnet) bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2516f-110">This two-way JavaScript-based interaction is referred to as [JavaScript interop (JS interop)](xref:blazor/call-javascript-from-dotnet).</span></span>

<span data-ttu-id="2516f-111">Da JS-Interop eine Internetverbindung erfordert und der Client einen Remotebrowser verwendet, betreffen die meisten Web-App-Sicherheitsprobleme alle Blazor Server-Apps.</span><span class="sxs-lookup"><span data-stu-id="2516f-111">Because JS interop occurs over the Internet and the client uses a remote browser, Blazor Server apps share most web app security concerns.</span></span> <span data-ttu-id="2516f-112">In diesem Artikel werden häufige Bedrohungen für Blazor Server-Apps beschrieben. Außerdem enthält er Anleitungen zur Bedrohungsminderung, die auf internetseitige Apps ausgerichtet sind.</span><span class="sxs-lookup"><span data-stu-id="2516f-112">This topic describes common threats to Blazor Server apps and provides threat mitigation guidance focused on Internet-facing apps.</span></span>

<span data-ttu-id="2516f-113">In eingeschränkten Umgebungen wie Unternehmensnetzwerken oder Intranets:</span><span class="sxs-lookup"><span data-stu-id="2516f-113">In constrained environments, such as inside corporate networks or intranets, some of the mitigation guidance either:</span></span>

* <span data-ttu-id="2516f-114">treffen einige der Hinweise aus diesem Artikel nicht zu</span><span class="sxs-lookup"><span data-stu-id="2516f-114">Doesn't apply in the constrained environment.</span></span>
* <span data-ttu-id="2516f-115">rechnen sich die Implementierungskosten für einige der Hinweise aus diesem Artikel nicht, da das Sicherheitsrisiko in eingeschränkten Umgebungen gering ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-115">Isn't worth the cost to implement because the security risk is low in a constrained environment.</span></span>

## <a name="no-locblazor-and-shared-state"></a><span data-ttu-id="2516f-116">Blazor und freigegebener Zustand</span><span class="sxs-lookup"><span data-stu-id="2516f-116">Blazor and shared state</span></span>

[!INCLUDE[](~/includes/blazor-security/blazor-shared-state.md)]

## <a name="resource-exhaustion"></a><span data-ttu-id="2516f-117">Ressourcenerschöpfung</span><span class="sxs-lookup"><span data-stu-id="2516f-117">Resource exhaustion</span></span>

<span data-ttu-id="2516f-118">Ressourcenerschöpfung kann auftreten, wenn ein Client mit dem Server interagiert und eine exzessive Ressourcenverbrauch auf dem Server verursacht.</span><span class="sxs-lookup"><span data-stu-id="2516f-118">Resource exhaustion can occur when a client interacts with the server and causes the server to consume excessive resources.</span></span> <span data-ttu-id="2516f-119">Übermäßiger Ressourcenverbrauch beeinträchtigt maßgeblich die folgenden Komponenten:</span><span class="sxs-lookup"><span data-stu-id="2516f-119">Excessive resource consumption primarily affects:</span></span>

* [<span data-ttu-id="2516f-120">CPU</span><span class="sxs-lookup"><span data-stu-id="2516f-120">CPU</span></span>](#cpu)
* [<span data-ttu-id="2516f-121">Arbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="2516f-121">Memory</span></span>](#memory)
* [<span data-ttu-id="2516f-122">Clientverbindungen</span><span class="sxs-lookup"><span data-stu-id="2516f-122">Client connections</span></span>](#client-connections)

<span data-ttu-id="2516f-123">Das Ziel von Denial-of-Service-Angriffen (DoS) ist üblicherweise, die Ressourcen einer App oder eines Servers zu erschöpfen.</span><span class="sxs-lookup"><span data-stu-id="2516f-123">Denial of service (DoS) attacks usually seek to exhaust an app or server's resources.</span></span> <span data-ttu-id="2516f-124">Ressourcenerschöpfung ist jedoch nicht notwendigerweise das Ergebnis eines Angriffs auf das System.</span><span class="sxs-lookup"><span data-stu-id="2516f-124">However, resource exhaustion isn't necessarily the result of an attack on the system.</span></span> <span data-ttu-id="2516f-125">Endliche Ressourcen können z. B. aufgrund einer hohen Benutzernachfrage aufgebraucht werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-125">For example, finite resources can be exhausted due to high user demand.</span></span> <span data-ttu-id="2516f-126">Auf DoS-Angriffe wird weiter unten im Abschnitt [Denial-of-Service-Angriffe (DoS)](#denial-of-service-dos-attacks) eingegangen.</span><span class="sxs-lookup"><span data-stu-id="2516f-126">DoS is covered further in the [Denial of service (DoS) attacks](#denial-of-service-dos-attacks) section.</span></span>

<span data-ttu-id="2516f-127">Blazor-externe Ressourcen wie Datenbanken und Dateihandles (für den Lese- und Schreibvorgänge in Dateien) können ebenso erschöpft werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-127">Resources external to the Blazor framework, such as databases and file handles (used to read and write files), may also experience resource exhaustion.</span></span> <span data-ttu-id="2516f-128">Weitere Informationen finden Sie unter <xref:performance/performance-best-practices>.</span><span class="sxs-lookup"><span data-stu-id="2516f-128">For more information, see <xref:performance/performance-best-practices>.</span></span>

### <a name="cpu"></a><span data-ttu-id="2516f-129">CPU</span><span class="sxs-lookup"><span data-stu-id="2516f-129">CPU</span></span>

<span data-ttu-id="2516f-130">CPU-Erschöpfung kann auftreten, wenn mindestens ein Client den Server zu CPU-intensiven Prozessen zwingt.</span><span class="sxs-lookup"><span data-stu-id="2516f-130">CPU exhaustion can occur when one or more clients force the server to perform intensive CPU work.</span></span>

<span data-ttu-id="2516f-131">Ein Beispiel wäre eine Blazor Server-App, die eine *Fibonacci-Zahl* berechnet.</span><span class="sxs-lookup"><span data-stu-id="2516f-131">For example, consider a Blazor Server app that calculates a *Fibonnacci number*.</span></span> <span data-ttu-id="2516f-132">Fibonacci-Zahlen sind die Bestandteile einer Fibonnacci-Reihe, in der jede Zahl die Summe der beiden vorherigen Zahlen darstellt.</span><span class="sxs-lookup"><span data-stu-id="2516f-132">A Fibonnacci number is produced from a Fibonnacci sequence, where each number in the sequence is the sum of the two preceding numbers.</span></span> <span data-ttu-id="2516f-133">Der für die Lösung erforderliche Arbeitsaufwand hängt von der Länge der Reihe und der Größe des ersten Wertes ab.</span><span class="sxs-lookup"><span data-stu-id="2516f-133">The amount of work required to reach the answer depends on the length of the sequence and the size of the initial value.</span></span> <span data-ttu-id="2516f-134">Wenn die App die Clientanforderung nicht einschränkt, dominieren die CPU-intensiven Berechnungen unter Umständen die CPU-Zeit und schmälern die Leistung von anderen Tasks.</span><span class="sxs-lookup"><span data-stu-id="2516f-134">If the app doesn't place limits on a client's request, the CPU-intensive calculations may dominate the CPU's time and diminish the performance of other tasks.</span></span> <span data-ttu-id="2516f-135">Exzessiver Ressourcenverbrauch ist ein Sicherheitsproblem, das sich auf die Verfügbarkeit auswirkt.</span><span class="sxs-lookup"><span data-stu-id="2516f-135">Excessive resource consumption is a security concern impacting availability.</span></span>

<span data-ttu-id="2516f-136">CPU-Erschöpfung ist ein Problem, das alle öffentlich zugänglichen Apps betrifft.</span><span class="sxs-lookup"><span data-stu-id="2516f-136">CPU exhaustion is a concern for all public-facing apps.</span></span> <span data-ttu-id="2516f-137">In regulären Web-Apps wird für Anforderungen und Verbindungen als Schutzvorkehrung ein Timeoutzeitraum festgelegt. In Blazor Server-Apps sind diese Schutzmaßnahmen jedoch nicht vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="2516f-137">In regular web apps, requests and connections time out as a safeguard, but Blazor Server apps don't provide the same safeguards.</span></span> <span data-ttu-id="2516f-138">Blazor Server-Apps müssen die richtigen Überprüfungen und Grenzwerte enthalten, bevor potenziell CPU-intensive Prozesse ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-138">Blazor Server apps must include appropriate checks and limits before performing potentially CPU-intensive work.</span></span>

### <a name="memory"></a><span data-ttu-id="2516f-139">Arbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="2516f-139">Memory</span></span>

<span data-ttu-id="2516f-140">Arbeitsspeichererschöpfung kann auftreten, wenn mindestens ein Client den Server zwingt, große Teile des Arbeitsspeichers zu belegen.</span><span class="sxs-lookup"><span data-stu-id="2516f-140">Memory exhaustion can occur when one or more clients force the server to consume a large amount of memory.</span></span>

<span data-ttu-id="2516f-141">Ein Beispiel wäre eine serverseitige Blazor-App mit einer Komponente, die eine Elementliste akzeptiert und anzeigt.</span><span class="sxs-lookup"><span data-stu-id="2516f-141">For example, consider a Blazor-server side app with a component that accepts and displays a list of items.</span></span> <span data-ttu-id="2516f-142">Wenn die Anzahl der zulässigen Elemente oder die Anzahl der an den Client gerenderten Elemente nicht durch die Blazor-App eingeschränkt wird, dominieren die arbeitsspeicherintensiven Verarbeitungs- und Renderingprozesse unter Umständen den Arbeitsspeicher des Servers und ziehen die Serverleistung in Mitleidenschaft.</span><span class="sxs-lookup"><span data-stu-id="2516f-142">If the Blazor app doesn't place limits on the number of items allowed or the number of items rendered back to the client, the memory-intensive processing and rendering may dominate the server's memory to the point where performance of the server suffers.</span></span> <span data-ttu-id="2516f-143">Der Server kann infolge abstürzen oder so langsam werden, dass es scheint, als sei er abgestürzt.</span><span class="sxs-lookup"><span data-stu-id="2516f-143">The server may crash or slow to the point that it appears to have crashed.</span></span>

<span data-ttu-id="2516f-144">Stellen Sie sich das folgende Szenario vor, in dem eine Elementliste gewartet und angezeigt wird, die mit einer potenziellen Arbeitsspeichererschöpfung auf dem Server zusammenhängt:</span><span class="sxs-lookup"><span data-stu-id="2516f-144">Consider the following scenario for maintaining and displaying a list of items that pertain to a potential memory exhaustion scenario on the server:</span></span>

* <span data-ttu-id="2516f-145">Die Elemente in einer `List<MyItem>`-Eigenschaft oder einem solchen Feld nutzen den Arbeitsspeicher des Servers.</span><span class="sxs-lookup"><span data-stu-id="2516f-145">The items in a `List<MyItem>` property or field use the server's memory.</span></span> <span data-ttu-id="2516f-146">Wenn die App zulässt, dass die Elementliste uneingeschränkt wächst, besteht die Gefahr, dass der Arbeitsspeicher des Servers irgendwann vollständig belegt ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-146">If the app allows the list of items to grow unbounded, there's a risk of the server running out of memory.</span></span> <span data-ttu-id="2516f-147">Wenn der Arbeitsspeicher erschöpft ist, wird die aktuelle Sitzung beendet (stürzt ab), und alle gleichzeitigen Sitzungen in dieser Serverinstanz empfangen eine Ausnahme mit einem Hinweis auf unzureichenden Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="2516f-147">Running out of memory causes the current session to end (crash) and all of the concurrent sessions in that server instance receive an out-of-memory exception.</span></span> <span data-ttu-id="2516f-148">Damit dieses Szenario nicht auftritt, muss die App eine Datenstruktur verwenden, die eine Elementobergrenze für gleichzeitige Benutzer durchsetzt.</span><span class="sxs-lookup"><span data-stu-id="2516f-148">To prevent this scenario from occurring, the app must use a data structure that imposes an item limit on concurrent users.</span></span>
* <span data-ttu-id="2516f-149">Wenn beim Rendering kein Paginierungsschema verwendet wird, belegt der Server zusätzlichen Arbeitsspeicher für Objekte, die nicht in der Benutzeroberfläche angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-149">If a paging scheme isn't used for rendering, the server uses additional memory for objects that aren't visible in the UI.</span></span> <span data-ttu-id="2516f-150">Ohne eine Obergrenze für die Anzahl der Elemente kann der verfügbare Arbeitsspeicher durch die Nachfrage erschöpft werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-150">Without a limit on the number of items, memory demands may exhaust the available server memory.</span></span> <span data-ttu-id="2516f-151">Dieses Szenario lässt sich mit einem der folgenden Ansätze verhindern:</span><span class="sxs-lookup"><span data-stu-id="2516f-151">To prevent this scenario, use one of the following approaches:</span></span>
  * <span data-ttu-id="2516f-152">Verwenden von paginierten Listen beim Rendering</span><span class="sxs-lookup"><span data-stu-id="2516f-152">Use paginated lists when rendering.</span></span>
  * <span data-ttu-id="2516f-153">Anzeigen der ersten 100 bis 1.000 Elemente und Durchsetzen, dass Benutzer Suchkriterien eingeben, um andere Elemente als die angezeigten zu finden</span><span class="sxs-lookup"><span data-stu-id="2516f-153">Only display the first 100 to 1,000 items and require the user to enter search criteria to find items beyond the items displayed.</span></span>
  * <span data-ttu-id="2516f-154">In einem fortgeschrittenen Renderingszenario können Sie Listen oder Raster implementieren, die *Virtualisierung* unterstützen.</span><span class="sxs-lookup"><span data-stu-id="2516f-154">For a more advanced rendering scenario, implement lists or grids that support *virtualization*.</span></span> <span data-ttu-id="2516f-155">Wenn Virtualisierung eingesetzt wird, rendern Listen nur eine Teilmenge der Elemente, die für den Benutzer aktuell sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="2516f-155">Using virtualization, lists only render a subset of items currently visible to the user.</span></span> <span data-ttu-id="2516f-156">Interagiert der Benutzer in der Benutzeroberfläche mit der Scrollleiste, rendert die Komponente nur diejenigen Elemente, die angezeigt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="2516f-156">When the user interacts with the scrollbar in the UI, the component renders only those items required for display.</span></span> <span data-ttu-id="2516f-157">Aktuell nicht angezeigte Elemente werden idealerweise im sekundären Speicher aufbewahrt.</span><span class="sxs-lookup"><span data-stu-id="2516f-157">The items that aren't currently required for display can be held in secondary storage, which is the ideal approach.</span></span> <span data-ttu-id="2516f-158">Sie können auch im Speicher abgelegt werden, was jedoch weniger empfehlenswert ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-158">Undisplayed items can also be held in memory, which is less ideal.</span></span>

<span data-ttu-id="2516f-159">Blazor Server-Apps bieten ein ähnliches Programmiermodell wie andere Benutzeroberflächenframeworks für zustandsbehaftete Apps wie WPF, Windows Forms oder Blazor WebAssembly.</span><span class="sxs-lookup"><span data-stu-id="2516f-159">Blazor Server apps offer a similar programming model to other UI frameworks for stateful apps, such as WPF, Windows Forms, or Blazor WebAssembly.</span></span> <span data-ttu-id="2516f-160">Der Hauptunterschied besteht darin, dass der von der App benutzte Arbeitsspeicher in vielen Benutzeroberflächenframeworks dem Client gehört und sich die Auswirkungen daher auf den einzelnen Client beschränken.</span><span class="sxs-lookup"><span data-stu-id="2516f-160">The main difference is that in several of the UI frameworks the memory consumed by the app belongs to the client and only affects that individual client.</span></span> <span data-ttu-id="2516f-161">Eine Blazor WebAssembly-App wird z. B. vollständig auf dem Client ausgeführt und verwendet ausschließlich die Arbeitsspeicherressourcen des Clients.</span><span class="sxs-lookup"><span data-stu-id="2516f-161">For example, a Blazor WebAssembly app runs entirely on the client and only uses client memory resources.</span></span> <span data-ttu-id="2516f-162">Im Blazor Server-Szenario gehört der von der App verbrauchte Arbeitsspeicher dem Server und wird von den Clients auf der Serverinstanz gemeinsam genutzt.</span><span class="sxs-lookup"><span data-stu-id="2516f-162">In the Blazor Server scenario, the memory consumed by the app belongs to the server and is shared among clients on the server instance.</span></span>

<span data-ttu-id="2516f-163">Der serverseitige Arbeitsspeicherbedarf muss bei allen Blazor Server-Apps bedacht werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-163">Server-side memory demands are a consideration for all Blazor Server apps.</span></span> <span data-ttu-id="2516f-164">Die meisten Web-Apps sind jedoch zustandslos, und der für die Verarbeitung einer Anforderung belegte Arbeitsspeicher wird wieder freigegeben, nachdem die Antwort zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="2516f-164">However, most web apps are stateless, and the memory used while processing a request is released when the response is returned.</span></span> <span data-ttu-id="2516f-165">Es ist allgemein empfehlenswert, es Clients nicht zu erlauben, den Arbeitsspeicher uneingeschränkt zu belegen, so wie bei anderen serverseitigen Apps mit dauerhaften Clientverbindungen auch.</span><span class="sxs-lookup"><span data-stu-id="2516f-165">As a general recommendation, don't permit clients to allocate an unbound amount of memory as in any other server-side app that persists client connections.</span></span> <span data-ttu-id="2516f-166">Der von einer Blazor Server-App verbrauchte Arbeitsspeicher bleibt auch nach der Verarbeitung einer einzelnen Anforderung belegt.</span><span class="sxs-lookup"><span data-stu-id="2516f-166">The memory consumed by a Blazor Server app persists for a longer time than a single request.</span></span>

> [!NOTE]
> <span data-ttu-id="2516f-167">Während der Entwicklung kann mithilfe eines Profilers oder einer Überwachung der Arbeitsspeicherbedarf von Clients bewertet werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-167">During development, a profiler can be used or a trace captured to assess memory demands of clients.</span></span> <span data-ttu-id="2516f-168">Ein Profiler oder eine Überwachung erfassen jedoch nicht den von einem bestimmten Client belegten Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="2516f-168">A profiler or trace won't capture the memory allocated to a specific client.</span></span> <span data-ttu-id="2516f-169">Wenn Sie den Arbeitsspeicherverbrauch eines bestimmten Clients während der Entwicklung bestimmen möchten, müssen Sie eine Sicherungskopie erfassen und den Arbeitsspeicherbedarf aller Objekte untersuchen, die sich im Circuit eines Benutzers befinden.</span><span class="sxs-lookup"><span data-stu-id="2516f-169">To capture the memory use of a specific client during development, capture a dump and examine the memory demand of all the objects rooted at a user's circuit.</span></span>

### <a name="client-connections"></a><span data-ttu-id="2516f-170">Clientverbindungen</span><span class="sxs-lookup"><span data-stu-id="2516f-170">Client connections</span></span>

<span data-ttu-id="2516f-171">Verbindungserschöpfung kann auftreten, wenn mindestens ein Client zu viele gleichzeitige Verbindungen zum Server geöffnet hat und so andere Clients daran hindert, neue Verbindungen herzustellen.</span><span class="sxs-lookup"><span data-stu-id="2516f-171">Connection exhaustion can occur when one or more clients open too many concurrent connections to the server, preventing other clients from establishing new connections.</span></span>

<span data-ttu-id="2516f-172">Blazor-Clients stellen eine Verbindung pro Sitzung her und halten diese so lange offen, wie auch das Browserfenster geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-172">Blazor clients establish a single connection per session and keep the connection open for as long as the browser window is open.</span></span> <span data-ttu-id="2516f-173">Die Anforderung an den Server, alle Verbindungen aufrechtzuerhalten, ist nicht charakteristisch für Blazor-Apps.</span><span class="sxs-lookup"><span data-stu-id="2516f-173">The demands on the server of maintaining all of the connections isn't specific to Blazor apps.</span></span> <span data-ttu-id="2516f-174">Da die Verbindungen dauerhaft und Blazor Server-Apps zustandsbehaftet sind, stellt Verbindungserschöpfung ein größeres Risiko für die Verfügbarkeit der App dar.</span><span class="sxs-lookup"><span data-stu-id="2516f-174">Given the persistent nature of the connections and the stateful nature of Blazor Server apps, connection exhaustion is a greater risk to availability of the app.</span></span>

<span data-ttu-id="2516f-175">In Blazor Server-Apps wird die Anzahl der Verbindungen pro Benutzer nicht automatisch beschränkt.</span><span class="sxs-lookup"><span data-stu-id="2516f-175">By default, there's no limit on the number of connections per user for a Blazor Server app.</span></span> <span data-ttu-id="2516f-176">Wenn die App eine Verbindungsobergrenze erfordert, sollten Sie mindestens eine der folgenden Maßnahmen ergreifen:</span><span class="sxs-lookup"><span data-stu-id="2516f-176">If the app requires a connection limit, take one or more of the following approaches:</span></span>

* <span data-ttu-id="2516f-177">Erzwingen der Authentifizierung, wodurch nicht autorisierten Benutzern automatisch die Möglichkeit genommen wird, eine Verbindung zur App herzustellen.</span><span class="sxs-lookup"><span data-stu-id="2516f-177">Require authentication, which naturally limits the ability of unauthorized users to connect to the app.</span></span> <span data-ttu-id="2516f-178">Damit dieses Szenario eintritt, müssen Sie verhindern, dass Benutzer willkürlich neue Benutzer bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="2516f-178">For this scenario to be effective, users must be prevented from provisioning new users at will.</span></span>
* <span data-ttu-id="2516f-179">Beschränken der pro Benutzer zulässigen Anzahl von Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="2516f-179">Limit the number of connections per user.</span></span> <span data-ttu-id="2516f-180">Verbindungen lassen sich mithilfe der folgenden Maßnahmen beschränken.</span><span class="sxs-lookup"><span data-stu-id="2516f-180">Limiting connections can be accomplished via the following approaches.</span></span> <span data-ttu-id="2516f-181">Wägen Sie sorgfältig ab, bevor Sie legitimen Benutzern Zugriff auf die App erteilen (z. B., wenn eine Verbindungsobergrenze für die IP-Adresse eines Clients festgelegt wird).</span><span class="sxs-lookup"><span data-stu-id="2516f-181">Exercise care to allow legitimate users to access the app (for example, when a connection limit is established based on the client's IP address).</span></span>
  * <span data-ttu-id="2516f-182">Auf App-Ebene:</span><span class="sxs-lookup"><span data-stu-id="2516f-182">At the app level:</span></span>
    * <span data-ttu-id="2516f-183">Erweiterung des Endpunktroutings</span><span class="sxs-lookup"><span data-stu-id="2516f-183">Endpoint routing extensibility.</span></span>
    * <span data-ttu-id="2516f-184">Durchsetzen der Authentifizierung bei der Verbindungsherstellung zur App und Nachverfolgen der aktiven Sitzungen pro Benutzer</span><span class="sxs-lookup"><span data-stu-id="2516f-184">Require authentication to connect to the app and keep track of the active sessions per user.</span></span>
    * <span data-ttu-id="2516f-185">Ablehnen neuer Sitzungen, wenn die Obergrenze erreicht wird</span><span class="sxs-lookup"><span data-stu-id="2516f-185">Reject new sessions upon reaching a limit.</span></span>
    * <span data-ttu-id="2516f-186">Proxy-WebSocket-Verbindungen zu einer App mithilfe eines Proxys wie [Azure SignalR Service](/azure/azure-signalr/signalr-overview). Dieser Dienst bündelt Client-zu-App-Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="2516f-186">Proxy WebSocket connections to an app through the use of a proxy, such as the [Azure SignalR Service](/azure/azure-signalr/signalr-overview) that multiplexes connections from clients to an app.</span></span> <span data-ttu-id="2516f-187">Auf diese Weise kann eine App mehr Verbindungen akzeptieren, als ein einzelner Client herstellen kann. Dies verhindert, dass ein Client alle Verbindungen zum Server belegt.</span><span class="sxs-lookup"><span data-stu-id="2516f-187">This provides an app with greater connection capacity than a single client can establish, preventing a client from exhausting the connections to the server.</span></span>
  * <span data-ttu-id="2516f-188">Auf Serverebene: Verwenden eines der App vorgeschalteten Proxys/Gateways.</span><span class="sxs-lookup"><span data-stu-id="2516f-188">At the server level: Use a proxy/gateway in front of the app.</span></span> <span data-ttu-id="2516f-189">Mit [Azure Front Door](/azure/frontdoor/front-door-overview) können Sie beispielsweise das globale Routing des Webdatenverkehrs zur App definieren, verwalten und überwachen. Es funktioniert, wenn Blazor Server-Apps für lange Abrufintervalle konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-189">For example, [Azure Front Door](/azure/frontdoor/front-door-overview) enables you to define, manage, and monitor the global routing of web traffic to an app and works when Blazor Server apps are configured to use Long Polling.</span></span>
  
    > [!NOTE]
    > <span data-ttu-id="2516f-190">Obwohl lange Abrufintervalle für Blazor Server-Apps unterstützt werden, ist [WebSockets das empfohlene Transportprotokoll](xref:blazor/host-and-deploy/server#azure-signalr-service).</span><span class="sxs-lookup"><span data-stu-id="2516f-190">Although Long Polling is supported for Blazor Server apps, [WebSockets is the recommended transport protocol](xref:blazor/host-and-deploy/server#azure-signalr-service).</span></span> <span data-ttu-id="2516f-191">[Azure Front Door](/azure/frontdoor/front-door-overview) unterstützt WebSockets derzeit nicht, aber die Unterstützung von WebSockets wird für eine zukünftige Version des Diensts erwogen.</span><span class="sxs-lookup"><span data-stu-id="2516f-191">[Azure Front Door](/azure/frontdoor/front-door-overview) doesn't support WebSockets at this time, but support for WebSockets is under consideration for a future release of the service.</span></span>

## <a name="denial-of-service-dos-attacks"></a><span data-ttu-id="2516f-192">Denial-of-Service-Angriffe (DoS)</span><span class="sxs-lookup"><span data-stu-id="2516f-192">Denial of service (DoS) attacks</span></span>

<span data-ttu-id="2516f-193">Bei DoS-Angriffen verursacht ein Client die Erschöpfung von mindestens einer Serverressource, sodass die App nicht mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-193">Denial of service (DoS) attacks involve a client causing the server to exhaust one or more of its resources making the app unavailable.</span></span> <span data-ttu-id="2516f-194">Blazor Server-Apps enthalten einige Standardgrenzwerte und nutzen andere Grenzwerte aus ASP.NET Core und SignalR, um sich gegen DoS-Angriffe auf <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions>-Objekte zu schützen.</span><span class="sxs-lookup"><span data-stu-id="2516f-194">Blazor Server apps include some default limits and rely on other ASP.NET Core and SignalR limits to protect against DoS attacks that are set on <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions>.</span></span>

| <span data-ttu-id="2516f-195">Blazor Server-App-Grenze</span><span class="sxs-lookup"><span data-stu-id="2516f-195">Blazor Server app limit</span></span> | <span data-ttu-id="2516f-196">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="2516f-196">Description</span></span> | <span data-ttu-id="2516f-197">Standard</span><span class="sxs-lookup"><span data-stu-id="2516f-197">Default</span></span> |
| --- | --- | --- |
| <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.DisconnectedCircuitMaxRetained> | <span data-ttu-id="2516f-198">Maximale Anzahl der getrennten Circuits, die sich gleichzeitig im Arbeitsspeicher eines bestimmten Servers befinden</span><span class="sxs-lookup"><span data-stu-id="2516f-198">Maximum number of disconnected circuits that a given server holds in memory at a time.</span></span> | <span data-ttu-id="2516f-199">100</span><span class="sxs-lookup"><span data-stu-id="2516f-199">100</span></span> |
| <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.DisconnectedCircuitRetentionPeriod> | <span data-ttu-id="2516f-200">Maximale Zeitspanne, die ein getrennter Circuit im Arbeitsspeicher aufbewahrt wird, bevor er entfernt wird</span><span class="sxs-lookup"><span data-stu-id="2516f-200">Maximum amount of time a disconnected circuit is held in memory before being torn down.</span></span> | <span data-ttu-id="2516f-201">3 Minuten</span><span class="sxs-lookup"><span data-stu-id="2516f-201">3 minutes</span></span> |
| <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout> | <span data-ttu-id="2516f-202">Maximale Zeitspanne, die der Server wartet, bevor der Aufruf einer asynchronen JavaScript-Funktion durch ein Timeout beendet wird</span><span class="sxs-lookup"><span data-stu-id="2516f-202">Maximum amount of time the server waits before timing out an asynchronous JavaScript function invocation.</span></span> | <span data-ttu-id="2516f-203">1 Minute</span><span class="sxs-lookup"><span data-stu-id="2516f-203">1 minute</span></span> |
| <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.MaxBufferedUnacknowledgedRenderBatches> | <span data-ttu-id="2516f-204">Maximale Anzahl nicht unbestätigter Renderbatches, die der Server zu einem bestimmten Zeitpunkt pro Circuit im Arbeitsspeicher aufbewahrt, um eine stabile Neuverbindung zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="2516f-204">Maximum number of unacknowledged render batches the server keeps in memory per circuit at a given time to support robust reconnection.</span></span> <span data-ttu-id="2516f-205">Wenn die Obergrenze erreicht wird, generiert der Server keine neuen Renderbatches mehr, bis mindestens ein Batch vom Client bestätigt wurde.</span><span class="sxs-lookup"><span data-stu-id="2516f-205">After reaching the limit, the server stops producing new render batches until one or more batches have been acknowledged by the client.</span></span> | <span data-ttu-id="2516f-206">10</span><span class="sxs-lookup"><span data-stu-id="2516f-206">10</span></span> |

<span data-ttu-id="2516f-207">Mit <xref:Microsoft.AspNetCore.SignalR.HubConnectionContextOptions> können Sie die maximale Größe einer einzelnen eingehenden Hubnachricht festlegen.</span><span class="sxs-lookup"><span data-stu-id="2516f-207">Set the maximum message size of a single incoming hub message with <xref:Microsoft.AspNetCore.SignalR.HubConnectionContextOptions>.</span></span>

| <span data-ttu-id="2516f-208">Grenzwert für SignalR und ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="2516f-208">SignalR and ASP.NET Core limit</span></span> | <span data-ttu-id="2516f-209">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="2516f-209">Description</span></span> | <span data-ttu-id="2516f-210">Standard</span><span class="sxs-lookup"><span data-stu-id="2516f-210">Default</span></span> |
| --- | --- | --- |
| <xref:Microsoft.AspNetCore.SignalR.HubConnectionContextOptions.MaximumReceiveMessageSize?displayProperty=nameWithType> | <span data-ttu-id="2516f-211">Nachrichtengröße für eine einzelne Nachricht</span><span class="sxs-lookup"><span data-stu-id="2516f-211">Message size for an individual message.</span></span> | <span data-ttu-id="2516f-212">32 KB</span><span class="sxs-lookup"><span data-stu-id="2516f-212">32 KB</span></span> |

## <a name="interactions-with-the-browser-client"></a><span data-ttu-id="2516f-213">Interaktionen mit dem Browser (Client)</span><span class="sxs-lookup"><span data-stu-id="2516f-213">Interactions with the browser (client)</span></span>

<span data-ttu-id="2516f-214">Ein Client interagiert über die von JS-Interop gesendeten Ereignisse und Meldungen zur Renderingfertigstellung mit dem Server.</span><span class="sxs-lookup"><span data-stu-id="2516f-214">A client interacts with the server through JS interop event dispatching and render completion.</span></span> <span data-ttu-id="2516f-215">Die Kommunikation von JS-Interop verläuft bidirektional zwischen JavaScript und .NET:</span><span class="sxs-lookup"><span data-stu-id="2516f-215">JS interop communication goes both ways between JavaScript and .NET:</span></span>

* <span data-ttu-id="2516f-216">Browserereignisse werden asynchron vom Client an den Server gesendet.</span><span class="sxs-lookup"><span data-stu-id="2516f-216">Browser events are dispatched from the client to the server in an asynchronous fashion.</span></span>
* <span data-ttu-id="2516f-217">Der Server antwortet asynchron und rendert die Benutzeroberfläche nach Bedarf neu.</span><span class="sxs-lookup"><span data-stu-id="2516f-217">The server responds asynchronously rerendering the UI as necessary.</span></span>

### <a name="javascript-functions-invoked-from-net"></a><span data-ttu-id="2516f-218">Über .NET aufgerufene JavaScript-Funktionen</span><span class="sxs-lookup"><span data-stu-id="2516f-218">JavaScript functions invoked from .NET</span></span>

<span data-ttu-id="2516f-219">Für .NET-Methoden, die JavaScript aufrufen:</span><span class="sxs-lookup"><span data-stu-id="2516f-219">For calls from .NET methods to JavaScript:</span></span>

* <span data-ttu-id="2516f-220">Für alle Aufrufe ist ein Timeout festgelegt. Dies bedeutet, dass Aufrufe fehlschlagen, sobald der Wert überschritten wird, und <xref:System.OperationCanceledException> an den Aufrufer zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-220">All invocations have a configurable timeout after which they fail, returning a <xref:System.OperationCanceledException> to the caller.</span></span>
  * <span data-ttu-id="2516f-221">Das Standardtimeout für Aufrufe (<xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout?displayProperty=nameWithType>) liegt bei einer Minute.</span><span class="sxs-lookup"><span data-stu-id="2516f-221">There's a default timeout for the calls (<xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout?displayProperty=nameWithType>) of one minute.</span></span> <span data-ttu-id="2516f-222">Weitere Informationen dazu, wie Sie das Timeout konfigurieren, finden Sie unter <xref:blazor/call-javascript-from-dotnet#harden-js-interop-calls>.</span><span class="sxs-lookup"><span data-stu-id="2516f-222">To configure this limit, see <xref:blazor/call-javascript-from-dotnet#harden-js-interop-calls>.</span></span>
  * <span data-ttu-id="2516f-223">Ein Abbruchtoken kann bereitgestellt werden, um den Abbruch aufrufsweise zu steuern.</span><span class="sxs-lookup"><span data-stu-id="2516f-223">A cancellation token can be provided to control the cancellation on a per-call basis.</span></span> <span data-ttu-id="2516f-224">Verwenden Sie nach Möglichkeit das Standardtimeout für Clientaufrufe. Ein Zeitintervall sollte nur festgelegt werden, wenn ein Abbruchtoken bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-224">Rely on the default call timeout where possible and time-bound any call to the client if a cancellation token is provided.</span></span>
* <span data-ttu-id="2516f-225">Das Ergebnis eines JavaScript-Aufrufs ist nicht vertrauenswürdig.</span><span class="sxs-lookup"><span data-stu-id="2516f-225">The result of a JavaScript call can't be trusted.</span></span> <span data-ttu-id="2516f-226">Die Blazor-App-Client, der im Browser ausgeführt wird, sucht nach der aufzurufenden JavaScript-Funktion.</span><span class="sxs-lookup"><span data-stu-id="2516f-226">The Blazor app client running in the browser searches for the JavaScript function to invoke.</span></span> <span data-ttu-id="2516f-227">Die Funktion wird aufgerufen, und es wird entweder das Ergebnis oder ein Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2516f-227">The function is invoked, and either the result or an error is produced.</span></span> <span data-ttu-id="2516f-228">Ein böswilliger Client kann Folgendes versuchen:</span><span class="sxs-lookup"><span data-stu-id="2516f-228">A malicious client can attempt to:</span></span>
  * <span data-ttu-id="2516f-229">Verursachen eines Problems in der App, indem von der JavaScript-Funktion ein Fehler zurückgegeben wird</span><span class="sxs-lookup"><span data-stu-id="2516f-229">Cause an issue in the app by returning an error from the JavaScript function.</span></span>
  * <span data-ttu-id="2516f-230">Einführen eines unbeabsichtigten Verhaltens auf dem Server, indem ein unerwartetes Ergebnis von der JavaScript-Funktion zurückgegeben wird</span><span class="sxs-lookup"><span data-stu-id="2516f-230">Induce an unintended behavior on the server by returning an unexpected result from the JavaScript function.</span></span>

<span data-ttu-id="2516f-231">Treffen Sie die folgenden Vorkehrungen, um sich gegen die zuvor genannten Szenarios zu schützen:</span><span class="sxs-lookup"><span data-stu-id="2516f-231">Take the following precautions to guard against the preceding scenarios:</span></span>

* <span data-ttu-id="2516f-232">Umschließen Sie Aufrufe von JS-Interop in [`try-catch`](/dotnet/csharp/language-reference/keywords/try-catch)-Anweisungen, um während der Aufrufe gegebenenfalls Fehler abzufangen.</span><span class="sxs-lookup"><span data-stu-id="2516f-232">Wrap JS interop calls within [`try-catch`](/dotnet/csharp/language-reference/keywords/try-catch) statements to account for errors that might occur during the invocations.</span></span> <span data-ttu-id="2516f-233">Weitere Informationen finden Sie unter <xref:blazor/fundamentals/handle-errors#javascript-interop>.</span><span class="sxs-lookup"><span data-stu-id="2516f-233">For more information, see <xref:blazor/fundamentals/handle-errors#javascript-interop>.</span></span>
* <span data-ttu-id="2516f-234">Überprüfen Sie die Daten, die bei JS-Interop-Aufrufen zurückgegeben werden, einschließlich der Fehlermeldungen, bevor Sie etwas unternehmen.</span><span class="sxs-lookup"><span data-stu-id="2516f-234">Validate data returned from JS interop invocations, including error messages, before taking any action.</span></span>

### <a name="net-methods-invoked-from-the-browser"></a><span data-ttu-id="2516f-235">Über den Browser aufgerufene .NET-Methoden</span><span class="sxs-lookup"><span data-stu-id="2516f-235">.NET methods invoked from the browser</span></span>

<span data-ttu-id="2516f-236">Vertrauen Sie keinen von JavaScript aus aufgerufenen .NET-Methoden.</span><span class="sxs-lookup"><span data-stu-id="2516f-236">Don't trust calls from JavaScript to .NET methods.</span></span> <span data-ttu-id="2516f-237">Wenn eine .NET-Methode für JavaScript verfügbar gemacht wird, sollten Sie sich ansehen, wie die .NET-Methode aufgerufen wird:</span><span class="sxs-lookup"><span data-stu-id="2516f-237">When a .NET method is exposed to JavaScript, consider how the .NET method is invoked:</span></span>

* <span data-ttu-id="2516f-238">Behandeln Sie jede .NET-Methode, die für JavaScript verfügbar gemacht wird, wie einen öffentlichen App-Endpunkt.</span><span class="sxs-lookup"><span data-stu-id="2516f-238">Treat any .NET method exposed to JavaScript as you would a public endpoint to the app.</span></span>
  * <span data-ttu-id="2516f-239">Überprüfen Sie die Eingabe.</span><span class="sxs-lookup"><span data-stu-id="2516f-239">Validate input.</span></span>
    * <span data-ttu-id="2516f-240">Stellen Sie sicher, dass die Werte innerhalb der erwarteten Bereiche liegen.</span><span class="sxs-lookup"><span data-stu-id="2516f-240">Ensure that values are within expected ranges.</span></span>
    * <span data-ttu-id="2516f-241">Stellen Sie sicher, dass der Benutzer dazu berechtigt ist, die angeforderte Aktion auszuführen.</span><span class="sxs-lookup"><span data-stu-id="2516f-241">Ensure that the user has permission to perform the action requested.</span></span>
  * <span data-ttu-id="2516f-242">Belegen Sie durch den Aufruf der .NET-Methode nicht übermäßig viele Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="2516f-242">Don't allocate an excessive quantity of resources as part of the .NET method invocation.</span></span> <span data-ttu-id="2516f-243">Führen Sie zum Beispiel Überprüfungen aus, und legen Sie Obergrenzen für die CPU- und Arbeitsspeicherauslastung fest.</span><span class="sxs-lookup"><span data-stu-id="2516f-243">For example, perform checks and place limits on CPU and memory use.</span></span>
  * <span data-ttu-id="2516f-244">Beachten Sie, dass statische Methoden und Instanzmethoden für JavaScript-Clients verfügbar gemacht werden können.</span><span class="sxs-lookup"><span data-stu-id="2516f-244">Take into account that static and instance methods can be exposed to JavaScript clients.</span></span> <span data-ttu-id="2516f-245">Zustände sollten nicht sitzungsübergreifend verwendet werden, es sei denn, das Design gibt dies vor, und es sind angemessene Beschränkungen vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="2516f-245">Avoid sharing state across sessions unless the design calls for sharing state with appropriate constraints.</span></span>
    * <span data-ttu-id="2516f-246">Für Instanzmethoden, die über `DotNetReference`-Objekte verfügbar gemacht werden, die ursprünglich per Dependency Injection (DI) erstellt wurden, sollten die Objekte als bereichsbezogen registriert werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-246">For instance methods exposed through `DotNetReference` objects that are originally created through dependency injection (DI), the objects should be registered as scoped objects.</span></span> <span data-ttu-id="2516f-247">Dies gilt für alle DI-Dienste, die die Blazor Server-App nutzt.</span><span class="sxs-lookup"><span data-stu-id="2516f-247">This applies to any DI service that the Blazor Server app uses.</span></span>
    * <span data-ttu-id="2516f-248">Bei statischen Methoden sollten Sie vermeiden, einen Zustand herzustellen, der sich auf den Client festlegen lässt. Die einzige Ausnahme stellen Apps dar, in denen Zustände absichtlich für alle Benutzer auf einer Serverinstanz verwendet.</span><span class="sxs-lookup"><span data-stu-id="2516f-248">For static methods, avoid establishing state that can't be scoped to the client unless the app is explicitly sharing state by-design across all users on a server instance.</span></span>
  * <span data-ttu-id="2516f-249">Von Benutzern bereitgestellte Daten sollten nicht als Parameter für JavaScript-Aufrufe genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-249">Avoid passing user-supplied data in parameters to JavaScript calls.</span></span> <span data-ttu-id="2516f-250">Wenn das Übergeben von Daten in Parametern absolut notwendig ist, sollten Sie sicherstellen, dass der JavaScript-Code bei der Datenübergabe keine Gelegenheit für [Cross-Site-Scripting (XSS)](#cross-site-scripting-xss) bietet.</span><span class="sxs-lookup"><span data-stu-id="2516f-250">If passing data in parameters is absolutely required, ensure that the JavaScript code handles passing the data without introducing [Cross-site scripting (XSS)](#cross-site-scripting-xss) vulnerabilities.</span></span> <span data-ttu-id="2516f-251">Schreiben Sie beispielsweise keine von Benutzern bereitgestellten Daten in das Dokumentobjektmodell (DOM), indem Sie die Eigenschaft `innerHTML` eines Elements festlegen.</span><span class="sxs-lookup"><span data-stu-id="2516f-251">For example, don't write user-supplied data to the Document Object Model (DOM) by setting the `innerHTML` property of an element.</span></span> <span data-ttu-id="2516f-252">Außerdem können Sie mit [Content Security Policy](https://developer.mozilla.org/docs/Web/HTTP/CSP) (zu Deutsch: „Richtlinie für Inhaltssicherheit“) ggf. `eval` und andere unsichere primitive JavaScript-Datentypen deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="2516f-252">Consider using [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) to disable `eval` and other unsafe JavaScript primitives.</span></span>
* <span data-ttu-id="2516f-253">Implementieren Sie keine benutzerdefinierte Sendung von .NET-Aufrufen zusätzlich zur Sendungsimplementierung des Frameworks.</span><span class="sxs-lookup"><span data-stu-id="2516f-253">Avoid implementing custom dispatching of .NET invocations on top of the framework's dispatching implementation.</span></span> <span data-ttu-id="2516f-254">Das Verfügbarmachen von .NET-Methoden für den Browser ist ein fortgeschrittenes Szenario, das sich nicht als allgemeine Blazor-Entwicklungstechnik empfiehlt.</span><span class="sxs-lookup"><span data-stu-id="2516f-254">Exposing .NET methods to the browser is an advanced scenario, not recommended for general Blazor development.</span></span>

### <a name="events"></a><span data-ttu-id="2516f-255">Ereignisse</span><span class="sxs-lookup"><span data-stu-id="2516f-255">Events</span></span>

<span data-ttu-id="2516f-256">Ereignisse stellen einen Einstiegspunkt in eine Blazor Server-App dar.</span><span class="sxs-lookup"><span data-stu-id="2516f-256">Events provide an entry point to a Blazor Server app.</span></span> <span data-ttu-id="2516f-257">Für das Ereignishandling in Blazor Server-Apps gelten dieselben Regeln wie für das Schützen von Endpunkten in Web-Apps.</span><span class="sxs-lookup"><span data-stu-id="2516f-257">The same rules for safeguarding endpoints in web apps apply to event handling in Blazor Server apps.</span></span> <span data-ttu-id="2516f-258">Ein böswilliger Client kann beliebige Daten als Nutzlast für ein Ereignis senden.</span><span class="sxs-lookup"><span data-stu-id="2516f-258">A malicious client can send any data it wishes to send as the payload for an event.</span></span>

<span data-ttu-id="2516f-259">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="2516f-259">For example:</span></span>

* <span data-ttu-id="2516f-260">Ein Änderungsereignis für `<select>` könnte einen Wert senden, der nicht innerhalb der Optionen liegt, die die App dem Client präsentiert hat.</span><span class="sxs-lookup"><span data-stu-id="2516f-260">A change event for a `<select>` could send a value that isn't within the options that the app presented to the client.</span></span>
* <span data-ttu-id="2516f-261">`<input>` könnte beliebige Textdaten an den Server senden und dabei die clientseitige Überprüfung umgehen.</span><span class="sxs-lookup"><span data-stu-id="2516f-261">An `<input>` could send any text data to the server, bypassing client-side validation.</span></span>

<span data-ttu-id="2516f-262">Die App muss die Daten für alle Ereignisse überprüfen, die die App verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="2516f-262">The app must validate the data for any event that the app handles.</span></span> <span data-ttu-id="2516f-263">Die [Formularkomponenten](xref:blazor/forms-validation) des Blazor-Frameworks führen grundlegende Überprüfungen aus.</span><span class="sxs-lookup"><span data-stu-id="2516f-263">The Blazor framework [forms components](xref:blazor/forms-validation) perform basic validations.</span></span> <span data-ttu-id="2516f-264">Wenn die App benutzerdefinierte Formularkomponenten verwendet, müssen Benutzer Code schreiben, damit die Ereignisdaten richtig ausgewertet werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-264">If the app uses custom forms components, custom code must be written to validate event data as appropriate.</span></span>

<span data-ttu-id="2516f-265">Blazor Server-Ereignisse sind asynchron, sodass mehrere Ereignisse an den Server gesendet werden können, bevor die App darauf reagieren und ein neues Rendering produzieren kann.</span><span class="sxs-lookup"><span data-stu-id="2516f-265">Blazor Server events are asynchronous, so multiple events can be dispatched to the server before the app has time to react by producing a new render.</span></span> <span data-ttu-id="2516f-266">Dies birgt einige Sicherheitsrisiken, die bedacht werden sollten.</span><span class="sxs-lookup"><span data-stu-id="2516f-266">This has some security implications to consider.</span></span> <span data-ttu-id="2516f-267">Clientaktionen in der App müssen innerhalb des Ereignishandlers beschränkt werden und dürfen nicht vom aktuell gerenderten Anzeigezustand abhängen.</span><span class="sxs-lookup"><span data-stu-id="2516f-267">Limiting client actions in the app must be performed inside event handlers and not depend on the current rendered view state.</span></span>

<span data-ttu-id="2516f-268">Stellen Sie sich eine Zählerkomponente vor, mit der ein Benutzer einen Zähler höchstens dreimal erhöhen können soll.</span><span class="sxs-lookup"><span data-stu-id="2516f-268">Consider a counter component that should allow a user to increment a counter a maximum of three times.</span></span> <span data-ttu-id="2516f-269">Die Schaltfläche zum Hochsetzen des Zählers basiert bedingungsweise auf dem Wert von `count`:</span><span class="sxs-lookup"><span data-stu-id="2516f-269">The button to increment the counter is conditionally based on the value of `count`:</span></span>

```razor
<p>Count: @count<p>

@if (count < 3)
{
    <button @onclick="IncrementCount" value="Increment count" />
}

@code 
{
    private int count = 0;

    private void IncrementCount()
    {
        count++;
    }
}
```

<span data-ttu-id="2516f-270">Ein Client kann mindestens ein Inkrementierungsereignis senden, bevor das Framework ein neues Rendering dieser Komponente generiert.</span><span class="sxs-lookup"><span data-stu-id="2516f-270">A client can dispatch one or more increment events before the framework produces a new render of this component.</span></span> <span data-ttu-id="2516f-271">Dies führt dazu, dass `count` *mehr als dreimal* vom Benutzer inkrementiert werden kann, weil die Schaltfläche nicht schnell genug aus der Benutzeroberfläche entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-271">The result is that the `count` can be incremented *over three times* by the user because the button isn't removed by the UI quickly enough.</span></span> <span data-ttu-id="2516f-272">Die richtige Vorgehensweise für das Durchsetzen der Obergrenze von drei `count`-Inkrementen wird im folgenden Beispiel veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="2516f-272">The correct way to achieve the limit of three `count` increments is shown in the following example:</span></span>

```razor
<p>Count: @count<p>

@if (count < 3)
{
    <button @onclick="IncrementCount" value="Increment count" />
}

@code 
{
    private int count = 0;

    private void IncrementCount()
    {
        if (count < 3)
        {
            count++;
        }
    }
}
```

<span data-ttu-id="2516f-273">Indem die Überprüfung `if (count < 3) { ... }` innerhalb des Handlers hinzugefügt wird, wird die Entscheidung über das Inkrementieren von `count` anhand des aktuellen App-Zustands getroffen.</span><span class="sxs-lookup"><span data-stu-id="2516f-273">By adding the `if (count < 3) { ... }` check inside the handler, the decision to increment `count` is based on the current app state.</span></span> <span data-ttu-id="2516f-274">Die Entscheidung basiert nicht wie im vorherigen Beispiel auf dem Zustand der Benutzeroberfläche, der vorübergehen veraltet sein kann.</span><span class="sxs-lookup"><span data-stu-id="2516f-274">The decision isn't based on the state of the UI as it was in the previous example, which might be temporarily stale.</span></span>

### <a name="guard-against-multiple-dispatches"></a><span data-ttu-id="2516f-275">Wächter gegen mehrere Sendungen</span><span class="sxs-lookup"><span data-stu-id="2516f-275">Guard against multiple dispatches</span></span>

<span data-ttu-id="2516f-276">Wenn ein Ereignisrückruf einen zeitintensiven Vorgang wie das Abrufen von Daten aus einem externen Dienst oder einer Datenbank asynchron aufruft, sollten Sie möglicherweise einen Wächter einsetzen.</span><span class="sxs-lookup"><span data-stu-id="2516f-276">If an event callback invokes a long running operation asynchronously, such as fetching data from an external service or database, consider using a guard.</span></span> <span data-ttu-id="2516f-277">Der Wächter kann verhindern, dass Benutzer mehrere Vorgänge an die Warteschlange senden, während der Vorgang bearbeitet und visuelles Feedback geliefert wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-277">The guard can prevent the user from queueing up multiple operations while the operation is in progress with visual feedback.</span></span> <span data-ttu-id="2516f-278">Der folgende Komponentencode legt `isLoading` auf `true` fest, während `GetForecastAsync` Daten vom Server abruft.</span><span class="sxs-lookup"><span data-stu-id="2516f-278">The following component code sets `isLoading` to `true` while `GetForecastAsync` obtains data from the server.</span></span> <span data-ttu-id="2516f-279">Während `isLoading` `true` ist, ist die Schaltfläche in der Benutzeroberfläche deaktiviert:</span><span class="sxs-lookup"><span data-stu-id="2516f-279">While `isLoading` is `true`, the button is disabled in the UI:</span></span>

```razor
@page "/fetchdata"
@using BlazorServerSample.Data
@inject WeatherForecastService ForecastService

<button disabled="@isLoading" @onclick="UpdateForecasts">Update</button>

@code {
    private bool isLoading;
    private WeatherForecast[] forecasts;

    private async Task UpdateForecasts()
    {
        if (!isLoading)
        {
            isLoading = true;
            forecasts = await ForecastService.GetForecastAsync(DateTime.Now);
            isLoading = false;
        }
    }
}
```

<span data-ttu-id="2516f-280">Das im vorherigen Beispiel gezeigte Wächtermuster funktioniert, wenn der Hintergrundvorgang asynchron mit dem `async`-`await`-Muster ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-280">The guard pattern demonstrated in the preceding example works if the background operation is executed asynchronously with the `async`-`await` pattern.</span></span>

### <a name="cancel-early-and-avoid-use-after-dispose"></a><span data-ttu-id="2516f-281">Frühes Abbrechen und Vermeiden der Verwendung nach der Entfernung (use-after-dispose)</span><span class="sxs-lookup"><span data-stu-id="2516f-281">Cancel early and avoid use-after-dispose</span></span>

<span data-ttu-id="2516f-282">Zusätzlich zu einem Wächter (Abschnitt [Wächter gegen mehrere Sendungen](#guard-against-multiple-dispatches)) sollten Sie auch ein Abbruchtoken (<xref:System.Threading.CancellationToken>) verwenden, um zeitintensive Vorgänge nach dem Entfernen der Komponente abbrechen zu können.</span><span class="sxs-lookup"><span data-stu-id="2516f-282">In addition to using a guard as described in the [Guard against multiple dispatches](#guard-against-multiple-dispatches) section, consider using a <xref:System.Threading.CancellationToken> to cancel long-running operations when the component is disposed.</span></span> <span data-ttu-id="2516f-283">Dieser Ansatz bietet den zusätzlichen Vorteil, dass eine Verwendung nach der Entfernung (*use-after-dispose*) in Komponenten vermieden wird:</span><span class="sxs-lookup"><span data-stu-id="2516f-283">This approach has the added benefit of avoiding *use-after-dispose* in components:</span></span>

```razor
@implements IDisposable

...

@code {
    private readonly CancellationTokenSource TokenSource = 
        new CancellationTokenSource();

    private async Task UpdateForecasts()
    {
        ...

        forecasts = await ForecastService.GetForecastAsync(DateTime.Now, 
            TokenSource.Token);

        if (TokenSource.Token.IsCancellationRequested)
        {
           return;
        }

        ...
    }

    public void Dispose()
    {
        TokenSource.Cancel();
    }
}
```

### <a name="avoid-events-that-produce-large-amounts-of-data"></a><span data-ttu-id="2516f-284">Vermeiden von großen Datenmengen produzierenden Ereignissen</span><span class="sxs-lookup"><span data-stu-id="2516f-284">Avoid events that produce large amounts of data</span></span>

<span data-ttu-id="2516f-285">Einige DOM-Ereignisse wie `oninput` oder `onscroll` können eine große Menge von Daten generieren.</span><span class="sxs-lookup"><span data-stu-id="2516f-285">Some DOM events, such as `oninput` or `onscroll`, can produce a large amount of data.</span></span> <span data-ttu-id="2516f-286">Diese Ereignisse sollten nicht in Blazor-Server-Apps verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-286">Avoid using these events in Blazor server apps.</span></span>

## <a name="additional-security-guidance"></a><span data-ttu-id="2516f-287">Zusätzlicher Sicherheitsleitfaden</span><span class="sxs-lookup"><span data-stu-id="2516f-287">Additional security guidance</span></span>

<span data-ttu-id="2516f-288">Der Leitfaden zur Sicherung von ASP.NET Core-Apps gilt für Blazor Server-Apps und enthält die folgenden Abschnitte:</span><span class="sxs-lookup"><span data-stu-id="2516f-288">The guidance for securing ASP.NET Core apps apply to Blazor Server apps and are covered in the following sections:</span></span>

* [<span data-ttu-id="2516f-289">Protokollierung und vertrauliche Daten</span><span class="sxs-lookup"><span data-stu-id="2516f-289">Logging and sensitive data</span></span>](#logging-and-sensitive-data)
* [<span data-ttu-id="2516f-290">Schützen von Informationen während der Übertragung mit HTTPS</span><span class="sxs-lookup"><span data-stu-id="2516f-290">Protect information in transit with HTTPS</span></span>](#protect-information-in-transit-with-https)
* [<span data-ttu-id="2516f-291">Cross-Site-Scripting (XSS)</span><span class="sxs-lookup"><span data-stu-id="2516f-291">Cross-site scripting (XSS)</span></span>](#cross-site-scripting-xss)
* [<span data-ttu-id="2516f-292">Ursprungsübergreifender Schutz</span><span class="sxs-lookup"><span data-stu-id="2516f-292">Cross-origin protection</span></span>](#cross-origin-protection)
* [<span data-ttu-id="2516f-293">Clickjacking</span><span class="sxs-lookup"><span data-stu-id="2516f-293">Click-jacking</span></span>](#click-jacking)
* [<span data-ttu-id="2516f-294">Open Redirects</span><span class="sxs-lookup"><span data-stu-id="2516f-294">Open redirects</span></span>](#open-redirects)

### <a name="logging-and-sensitive-data"></a><span data-ttu-id="2516f-295">Protokollierung und vertrauliche Daten</span><span class="sxs-lookup"><span data-stu-id="2516f-295">Logging and sensitive data</span></span>

<span data-ttu-id="2516f-296">JS-Interop-Interaktionen zwischen dem Client und dem Server werden in den Serverprotokollen mit <xref:Microsoft.Extensions.Logging.ILogger>-Instanzen erfasst.</span><span class="sxs-lookup"><span data-stu-id="2516f-296">JS interop interactions between the client and server are recorded in the server's logs with <xref:Microsoft.Extensions.Logging.ILogger> instances.</span></span> <span data-ttu-id="2516f-297">In Blazor werden keine vertraulichen Informationen wie tatsächliche Ereignisse oder JS-Interop-Ein- und -Ausgaben protokolliert.</span><span class="sxs-lookup"><span data-stu-id="2516f-297">Blazor avoids logging sensitive information, such as actual events or JS interop inputs and outputs.</span></span>

<span data-ttu-id="2516f-298">Wenn auf dem Server ein Fehler auftritt, benachrichtigt das Framework den Client und beendet die Sitzung.</span><span class="sxs-lookup"><span data-stu-id="2516f-298">When an error occurs on the server, the framework notifies the client and tears down the session.</span></span> <span data-ttu-id="2516f-299">Der Client empfängt automatisch eine Standardfehlermeldung, die in den Entwicklertools des Browsers aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="2516f-299">By default, the client receives a generic error message that can be seen in the browser's developer tools.</span></span>

<span data-ttu-id="2516f-300">Die clientseitige Fehlermeldung enthält weder den Aufrufstapel noch Details zur Fehlerursache, die Serverprotokolle hingegen schon.</span><span class="sxs-lookup"><span data-stu-id="2516f-300">The client-side error doesn't include the callstack and doesn't provide detail on the cause of the error, but server logs do contain such information.</span></span> <span data-ttu-id="2516f-301">Zu Entwicklungszwecken können vertrauliche Fehlerinformationen für den Client verfügbar gemacht werden, indem Sie detaillierte Fehlermeldungen aktivieren.</span><span class="sxs-lookup"><span data-stu-id="2516f-301">For development purposes, sensitive error information can be made available to the client by enabling detailed errors.</span></span>

<span data-ttu-id="2516f-302">In JavaScript werden detaillierte Fehlermeldungen wie folgt aktiviert:</span><span class="sxs-lookup"><span data-stu-id="2516f-302">Enable detailed errors in JavaScript with:</span></span>

* <span data-ttu-id="2516f-303"><xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.DetailedErrors?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2516f-303"><xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.DetailedErrors?displayProperty=nameWithType>.</span></span>
* <span data-ttu-id="2516f-304">Der Konfigurationsschlüssel `DetailedErrors` muss auf `true` festgelegt werden. Diese Einstellung können Sie in der Einstellungsdatei der App (`appsettings.json`) vornehmen.</span><span class="sxs-lookup"><span data-stu-id="2516f-304">The `DetailedErrors` configuration key set to `true`, which can be set in the app settings file (`appsettings.json`).</span></span> <span data-ttu-id="2516f-305">Der Schlüssel lässt sich darüber hinaus mithilfe der Umgebungsvariablen `ASPNETCORE_DETAILEDERRORS` auf den Wert `true` festlegen.</span><span class="sxs-lookup"><span data-stu-id="2516f-305">The key can also be set using the `ASPNETCORE_DETAILEDERRORS` environment variable with a value of `true`.</span></span>

> [!WARNING]
> <span data-ttu-id="2516f-306">Das Verfügbarmachen von Fehlerinformationen für internetseitige Clients ist ein Sicherheitsrisiko, dass immer vermieden werden sollte.</span><span class="sxs-lookup"><span data-stu-id="2516f-306">Exposing error information to clients on the Internet is a security risk that should always be avoided.</span></span>

### <a name="protect-information-in-transit-with-https"></a><span data-ttu-id="2516f-307">Schützen von Informationen während der Übertragung mit HTTPS</span><span class="sxs-lookup"><span data-stu-id="2516f-307">Protect information in transit with HTTPS</span></span>

<span data-ttu-id="2516f-308">Blazor Server stellt die Kommunikation zwischen Client und Server mithilfe von SignalR bereit.</span><span class="sxs-lookup"><span data-stu-id="2516f-308">Blazor Server uses SignalR for communication between the client and the server.</span></span> <span data-ttu-id="2516f-309">Normalerweise verwendet Blazor Server den Transport, der von SignalR ausgehandelt wird. Dabei handelt es sich in der Regel um WebSockets.</span><span class="sxs-lookup"><span data-stu-id="2516f-309">Blazor Server normally uses the transport that SignalR negotiates, which is typically WebSockets.</span></span>

<span data-ttu-id="2516f-310">Blazor Server bietet keine Garantie für die Integrität und Vertraulichkeit der Daten, die zwischen Server und Client gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-310">Blazor Server doesn't ensure the integrity and confidentiality of the data sent between the server and the client.</span></span> <span data-ttu-id="2516f-311">Verwenden Sie daher immer HTTPS.</span><span class="sxs-lookup"><span data-stu-id="2516f-311">Always use HTTPS.</span></span>

### <a name="cross-site-scripting-xss"></a><span data-ttu-id="2516f-312">Cross-Site-Scripting (XSS)</span><span class="sxs-lookup"><span data-stu-id="2516f-312">Cross-site scripting (XSS)</span></span>

<span data-ttu-id="2516f-313">XSS ermöglicht es einem nicht autorisierten Benutzer, eine beliebige Logik im Kontext des Browsers auszuführen.</span><span class="sxs-lookup"><span data-stu-id="2516f-313">Cross-site scripting (XSS) allows an unauthorized party to execute arbitrary logic in the context of the browser.</span></span> <span data-ttu-id="2516f-314">Eine kompromittierte App kann beliebigen Code auf dem Client ausführen.</span><span class="sxs-lookup"><span data-stu-id="2516f-314">A compromised app could potentially run arbitrary code on the client.</span></span> <span data-ttu-id="2516f-315">Das Sicherheitsrisiko kann ausgenutzt werden, um eine Reihe schädlicher Aktionen für den Server auszuführen:</span><span class="sxs-lookup"><span data-stu-id="2516f-315">The vulnerability could be used to potentially perform a number of malicious actions against the server:</span></span>

* <span data-ttu-id="2516f-316">Senden gefälschter/ungültiger Ereignisse an den Server</span><span class="sxs-lookup"><span data-stu-id="2516f-316">Dispatch fake/invalid events to the server.</span></span>
* <span data-ttu-id="2516f-317">Senden von fehlgeschlagenen/ungültigen Meldungen zur Renderingfertigstellung</span><span class="sxs-lookup"><span data-stu-id="2516f-317">Dispatch fail/invalid render completions.</span></span>
* <span data-ttu-id="2516f-318">Vermeiden des Sendens von Meldungen zur Renderingfertigstellung</span><span class="sxs-lookup"><span data-stu-id="2516f-318">Avoid dispatching render completions.</span></span>
* <span data-ttu-id="2516f-319">Senden von Interop-Aufrufen aus JavaScript an .NET</span><span class="sxs-lookup"><span data-stu-id="2516f-319">Dispatch interop calls from JavaScript to .NET.</span></span>
* <span data-ttu-id="2516f-320">Ändern der Antwort von Interop-Aufrufen aus .NET an JavaScript</span><span class="sxs-lookup"><span data-stu-id="2516f-320">Modify the response of interop calls from .NET to JavaScript.</span></span>
* <span data-ttu-id="2516f-321">Vermeiden des Sendens von .NET-Ergebnissen an JS-Interop</span><span class="sxs-lookup"><span data-stu-id="2516f-321">Avoid dispatching .NET to JS interop results.</span></span>

<span data-ttu-id="2516f-322">Das Blazor Server-Framework bietet die folgenden Maßnahmen zum Schutz vor einigen der zuvor genannten Bedrohungen:</span><span class="sxs-lookup"><span data-stu-id="2516f-322">The Blazor Server framework takes steps to protect against some of the preceding threats:</span></span>

* <span data-ttu-id="2516f-323">Es werden keine neuen Benutzeroberflächenupdates generiert, wenn der Client die Renderbatches nicht bestätigt.</span><span class="sxs-lookup"><span data-stu-id="2516f-323">Stops producing new UI updates if the client isn't acknowledging render batches.</span></span> <span data-ttu-id="2516f-324">Dies wird mit <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.MaxBufferedUnacknowledgedRenderBatches?displayProperty=nameWithType> konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="2516f-324">Configured with <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.MaxBufferedUnacknowledgedRenderBatches?displayProperty=nameWithType>.</span></span>
* <span data-ttu-id="2516f-325">Für alle JavaScript-Aufrufe von .NET aus tritt nach einer Minute ein Timeout auf, ohne dass der Client eine Antwort sendet.</span><span class="sxs-lookup"><span data-stu-id="2516f-325">Times out any .NET to JavaScript call after one minute without receiving a response from the client.</span></span> <span data-ttu-id="2516f-326">Dies wird mit <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout?displayProperty=nameWithType> konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="2516f-326">Configured with <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout?displayProperty=nameWithType>.</span></span>
* <span data-ttu-id="2516f-327">Während JS-Interop wird eine grundlegende Überprüfung für alle Eingaben ausgeführt, die aus dem Browser stammen:</span><span class="sxs-lookup"><span data-stu-id="2516f-327">Performs basic validation on all input coming from the browser during JS interop:</span></span>
  * <span data-ttu-id="2516f-328">.NET-Verweise sind gültig und weisen den von der .NET-Methode erwarteten Typ auf.</span><span class="sxs-lookup"><span data-stu-id="2516f-328">.NET references are valid and of the type expected by the .NET method.</span></span>
  * <span data-ttu-id="2516f-329">Die Daten sind nicht falsch formatiert.</span><span class="sxs-lookup"><span data-stu-id="2516f-329">The data isn't malformed.</span></span>
  * <span data-ttu-id="2516f-330">Die Nutzlast enthält die korrekte Anzahl von Argumenten für die Methode.</span><span class="sxs-lookup"><span data-stu-id="2516f-330">The correct number of arguments for the method are present in the payload.</span></span>
  * <span data-ttu-id="2516f-331">Die Argumente oder das Ergebnis lässt sich korrekt deserialisieren, bevor die Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-331">The arguments or result can be deserialized correctly before invoking the method.</span></span>
* <span data-ttu-id="2516f-332">Eine grundlegende Überprüfung wird für alle Eingaben ausgeführt, die aus dem Browser aus gesendeten Ereignissen stammen:</span><span class="sxs-lookup"><span data-stu-id="2516f-332">Performs basic validation in all input coming from the browser from dispatched events:</span></span>
  * <span data-ttu-id="2516f-333">Das Ereignis weist einen gültigen Typ auf.</span><span class="sxs-lookup"><span data-stu-id="2516f-333">The event has a valid type.</span></span>
  * <span data-ttu-id="2516f-334">Die Daten für das Ereignis lassen sich deserialisieren.</span><span class="sxs-lookup"><span data-stu-id="2516f-334">The data for the event can be deserialized.</span></span>
  * <span data-ttu-id="2516f-335">Es gibt einen Ereignishandler, der dem Ereignis zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-335">There's an event handler associated with the event.</span></span>

<span data-ttu-id="2516f-336">Zusätzlich zu den vom Framework implementierten Schutzmaßnahmen muss die App vom Entwickler so programmiert werden, dass sie gegen Bedrohungen geschützt ist und die angemessenen Aktionen ausführen kann:</span><span class="sxs-lookup"><span data-stu-id="2516f-336">In addition to the safeguards that the framework implements, the app must be coded by the developer to safeguard against threats and take appropriate actions:</span></span>

* <span data-ttu-id="2516f-337">Beim Ereignishandling müssen Daten immer überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-337">Always validate data when handling events.</span></span>
* <span data-ttu-id="2516f-338">Werden ungültige Daten empfangen, müssen die angemessenen Aktionen ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="2516f-338">Take appropriate action upon receiving invalid data:</span></span>
  * <span data-ttu-id="2516f-339">Die Daten und die Rückgabe müssen ignoriert werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-339">Ignore the data and return.</span></span> <span data-ttu-id="2516f-340">Dies ermöglicht es der App, weiterhin Anforderungen zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="2516f-340">This allows the app to continue processing requests.</span></span>
  * <span data-ttu-id="2516f-341">Wenn die App eine ungültige Eingabe erkennt, die nicht von einem legitimen Client stammen kann, wird eine Ausnahme zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2516f-341">If the app determines that the input is illegitimate and couldn't be produced by legitimate client, throw an exception.</span></span> <span data-ttu-id="2516f-342">Aufgrund der Ausnahme werden sowohl der Circuit als auch die Sitzung beendet.</span><span class="sxs-lookup"><span data-stu-id="2516f-342">Throwing an exception tears down the circuit and ends the session.</span></span>
* <span data-ttu-id="2516f-343">Vertrauen Sie nicht der Fehlermeldung, die in den Fertigstellungsmeldungen zum Batchrendering in den Protokollen enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-343">Don't trust the error message provided by render batch completions included in the logs.</span></span> <span data-ttu-id="2516f-344">Sie stammt vom Client und ist allgemein nicht vertrauenswürdig, da der Client möglicherweise kompromittiert ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-344">The error is provided by the client and can't generally be trusted, as the client might be compromised.</span></span>
* <span data-ttu-id="2516f-345">Vertrauen Sie nicht der Eingabe für JS-Interop-Aufrufe zwischen JavaScript und .NET-Methoden (beide Richtungen).</span><span class="sxs-lookup"><span data-stu-id="2516f-345">Don't trust the input on JS interop calls in either direction between JavaScript and .NET methods.</span></span>
* <span data-ttu-id="2516f-346">Die App ist dafür zuständig, dass die Gültigkeit der Argumente und Ergebnisse überprüft wird, selbst wenn die Argumente oder Ergebnisse korrekt deserialisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="2516f-346">The app is responsible for validating that the content of arguments and results are valid, even if the arguments or results are correctly deserialized.</span></span>

<span data-ttu-id="2516f-347">Das Risiko von XSS besteht nur, wenn die App Benutzereingaben in die gerenderte Seite einbindet.</span><span class="sxs-lookup"><span data-stu-id="2516f-347">For a XSS vulnerability to exist, the app must incorporate user input in the rendered page.</span></span> <span data-ttu-id="2516f-348">Blazor Server-Komponenten führen einen Schritt zur Kompilierzeit aus, bei dem Markup in einer `.razor`-Datei in eine prozedurale C#-Logik transformiert wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-348">Blazor Server components execute a compile-time step where the markup in a `.razor` file is transformed into procedural C# logic.</span></span> <span data-ttu-id="2516f-349">Zur Laufzeit erstellt die C#-Logik eine *Renderingstruktur*, die die Elemente, den Text und die untergeordneten Komponenten beschreibt.</span><span class="sxs-lookup"><span data-stu-id="2516f-349">At runtime, the C# logic builds a *render tree* describing the elements, text, and child components.</span></span> <span data-ttu-id="2516f-350">Diese wird mithilfe mehrerer JavaScript-Anweisungen auf das DOM des Browsers angewendet (oder im Falle von Prerendering in HTML serialisiert):</span><span class="sxs-lookup"><span data-stu-id="2516f-350">This is applied to the browser's DOM via a sequence of JavaScript instructions (or is serialized to HTML in the case of prerendering):</span></span>

* <span data-ttu-id="2516f-351">Benutzereingaben, die über eine normale Razor-Syntax gerendert werden (z. B. `@someStringValue`) stellen kein XSS-Risiko dar, weil die Razor-Syntax mithilfe von Befehlen, die nur Text schreiben können, dem DOM hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-351">User input rendered via normal Razor syntax (for example, `@someStringValue`) doesn't expose a XSS vulnerability because the Razor syntax is added to the DOM via commands that can only write text.</span></span> <span data-ttu-id="2516f-352">Selbst wenn der Wert HTML-Markup enthält, wird er als statischer Text angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2516f-352">Even if the value includes HTML markup, the value is displayed as static text.</span></span> <span data-ttu-id="2516f-353">Während des Prerenderings wird die Ausgabe HTML-codiert, wodurch der Inhalt ebenfalls als statischer Text angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-353">When prerendering, the output is HTML-encoded, which also displays the content as static text.</span></span>
* <span data-ttu-id="2516f-354">Skripttags sind nicht zulässig und sollten in der Komponentenrenderingstruktur der App nicht verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-354">Script tags aren't allowed and shouldn't be included in the app's component render tree.</span></span> <span data-ttu-id="2516f-355">Wenn Sie ein Skripttag das Markup einer Komponente aufnehmen, wird ein Kompilierzeitfehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2516f-355">If a script tag is included in a component's markup, a compile-time error is generated.</span></span>
* <span data-ttu-id="2516f-356">Komponentenersteller können auch ohne Razor Komponenten in C# erstellen.</span><span class="sxs-lookup"><span data-stu-id="2516f-356">Component authors can author components in C# without using Razor.</span></span> <span data-ttu-id="2516f-357">Der Komponentenersteller ist dafür verantwortlich, das beim Ausgeben der Ausgabe die richtigen APIs benutzt werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-357">The component author is responsible for using the correct APIs when emitting output.</span></span> <span data-ttu-id="2516f-358">Es muss beispielsweise `builder.AddContent(0, someUserSuppliedString)` und *nicht* `builder.AddMarkupContent(0, someUserSuppliedString)` verwendet werden, da letztere API das Risiko von XSS birgt.</span><span class="sxs-lookup"><span data-stu-id="2516f-358">For example, use `builder.AddContent(0, someUserSuppliedString)` and *not* `builder.AddMarkupContent(0, someUserSuppliedString)`, as the latter could create a XSS vulnerability.</span></span>

<span data-ttu-id="2516f-359">Zum Schutz vor XSS-Angriffen können Sie auch Maßnahmen zur Risikominderung ergreifen, z. B. [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="2516f-359">As part of protecting against XSS attacks, consider implementing XSS mitigations, such as [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP).</span></span>

<span data-ttu-id="2516f-360">Weitere Informationen finden Sie unter <xref:security/cross-site-scripting>.</span><span class="sxs-lookup"><span data-stu-id="2516f-360">For more information, see <xref:security/cross-site-scripting>.</span></span>

### <a name="cross-origin-protection"></a><span data-ttu-id="2516f-361">Ursprungsübergreifender Schutz</span><span class="sxs-lookup"><span data-stu-id="2516f-361">Cross-origin protection</span></span>

<span data-ttu-id="2516f-362">Bei ursprungsübergreifenden Angriffen führt ein Client, der einen anderen Ursprung hat, eine Aktion für den Server aus.</span><span class="sxs-lookup"><span data-stu-id="2516f-362">Cross-origin attacks involve a client from a different origin performing an action against the server.</span></span> <span data-ttu-id="2516f-363">Bei der böswilligen Aktion handelt es sich üblicherweise um eine GET-Anforderung oder eine Art von POST-Methode (Cross-Site Request Forgery, CSRF). Es ist jedoch ebenso möglich, dass eine böswillige WebSocket-Verbindung geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-363">The malicious action is typically a GET request or a form POST (Cross-Site Request Forgery, CSRF), but opening a malicious WebSocket is also possible.</span></span> <span data-ttu-id="2516f-364">Blazor Server-Apps bieten [dieselben Garantien wie jede andere SignalR-App, die das angebotene Hubprotokoll verwendet](xref:signalr/security):</span><span class="sxs-lookup"><span data-stu-id="2516f-364">Blazor Server apps offer [the same guarantees that any other SignalR app using the hub protocol offer](xref:signalr/security):</span></span>

* <span data-ttu-id="2516f-365">Es besteht ursprungsübergreifender Zugriff auf Blazor Server-Apps, es sei denn, dies wird durch zusätzliche Schutzmaßnahmen verhindert.</span><span class="sxs-lookup"><span data-stu-id="2516f-365">Blazor Server apps can be accessed cross-origin unless additional measures are taken to prevent it.</span></span> <span data-ttu-id="2516f-366">Wenn Sie den ursprungsübergreifenden Zugriff deaktivieren möchten, müssen Sie entweder Cross-Origin Resource Sharing (CORS) im Endpunkt deaktivieren, indem Sie die CORS-Middleware der Pipeline und das <xref:Microsoft.AspNetCore.Cors.DisableCorsAttribute>-Objekt den Metadaten des Blazor-Endpunkts hinzufügen oder die zulässigen Ursprünge eingrenzen, indem Sie [SignalR für Cross-Origin Resource Sharing konfigurieren](xref:signalr/security#cross-origin-resource-sharing).</span><span class="sxs-lookup"><span data-stu-id="2516f-366">To disable cross-origin access, either disable CORS in the endpoint by adding the CORS middleware to the pipeline and adding the <xref:Microsoft.AspNetCore.Cors.DisableCorsAttribute> to the Blazor endpoint metadata or limit the set of allowed origins by [configuring SignalR for cross-origin resource sharing](xref:signalr/security#cross-origin-resource-sharing).</span></span>
* <span data-ttu-id="2516f-367">Wenn CORS aktiviert ist, sind je nach CORS-Konfiguration unter Umständen weitere Schritte erforderlich, um die App zu schützen.</span><span class="sxs-lookup"><span data-stu-id="2516f-367">If CORS is enabled, extra steps might be required to protect the app depending on the CORS configuration.</span></span> <span data-ttu-id="2516f-368">Ist CORS global aktiviert, lässt sich der Mechanismus für den Blazor Server-Hub deaktivieren, indem die <xref:Microsoft.AspNetCore.Cors.DisableCorsAttribute>-Metadaten den Endpunktmetadaten hinzugefügt werden, nachdem <xref:Microsoft.AspNetCore.Builder.ComponentEndpointRouteBuilderExtensions.MapBlazorHub%2A> im Endpunktroutengenerator aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="2516f-368">If CORS is globally enabled, CORS can be disabled for the Blazor Server hub by adding the <xref:Microsoft.AspNetCore.Cors.DisableCorsAttribute> metadata to the endpoint metadata after calling <xref:Microsoft.AspNetCore.Builder.ComponentEndpointRouteBuilderExtensions.MapBlazorHub%2A> on the endpoint route builder.</span></span>

<span data-ttu-id="2516f-369">Weitere Informationen finden Sie unter <xref:security/anti-request-forgery>.</span><span class="sxs-lookup"><span data-stu-id="2516f-369">For more information, see <xref:security/anti-request-forgery>.</span></span>

### <a name="click-jacking"></a><span data-ttu-id="2516f-370">Clickjacking</span><span class="sxs-lookup"><span data-stu-id="2516f-370">Click-jacking</span></span>

<span data-ttu-id="2516f-371">Beim Clickjacking wird eine Website als `<iframe>` innerhalb einer Website gerendert, die einen anderen Ursprung hat. So soll der Benutzer überlistet und dazu gebracht werden, Aktionen auf der angegriffenen Website auszuführen.</span><span class="sxs-lookup"><span data-stu-id="2516f-371">Click-jacking involves rendering a site as an `<iframe>` inside a site from a different origin in order to trick the user into performing actions on the site under attack.</span></span>

<span data-ttu-id="2516f-372">Mithilfe von [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) und dem Header `X-Frame-Options` können Sie eine App davor schützen, innerhalb eines Inlineframes (`<iframe>`) gerendert zu werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-372">To protect an app from rendering inside of an `<iframe>`, use [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) and the `X-Frame-Options` header.</span></span> <span data-ttu-id="2516f-373">Weitere Informationen finden Sie unter [MDN Web Docs: X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options).</span><span class="sxs-lookup"><span data-stu-id="2516f-373">For more information, see [MDN web docs: X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options).</span></span>

### <a name="open-redirects"></a><span data-ttu-id="2516f-374">Open Redirects</span><span class="sxs-lookup"><span data-stu-id="2516f-374">Open redirects</span></span>

<span data-ttu-id="2516f-375">Wenn eine Blazor Server-App-Sitzung beginnt, überprüft der Server grundlegend die URLs, die beim Sitzungsstart gesendet wurden.</span><span class="sxs-lookup"><span data-stu-id="2516f-375">When a Blazor Server app session starts, the server performs basic validation of the URLs sent as part of starting the session.</span></span> <span data-ttu-id="2516f-376">Das Framework überprüft, ob es sich bei der Basis-URL um eine übergeordnete URL der aktuellen handelt, bevor der Circuit hergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-376">The framework checks that the base URL is a parent of the current URL before establishing the circuit.</span></span> <span data-ttu-id="2516f-377">Weitere Überprüfungen führt das Framework nicht aus.</span><span class="sxs-lookup"><span data-stu-id="2516f-377">No additional checks are performed by the framework.</span></span>

<span data-ttu-id="2516f-378">Wenn ein Benutzer auf dem Client auf einen Link klickt, wird die Link-URL an den Server gesendet. Dieser entscheidet wiederum, welche Aktion anschließend ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-378">When a user selects a link on the client, the URL for the link is sent to the server, which determines what action to take.</span></span> <span data-ttu-id="2516f-379">Die App kann beispielsweise eine clientseitige Navigation ausführen oder den Browser anweisen, einen neuen Inhalt aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="2516f-379">For example, the app may perform a client-side navigation or indicate to the browser to go to the new location.</span></span>

<span data-ttu-id="2516f-380">Komponenten können außerdem mithilfe von <xref:Microsoft.AspNetCore.Components.NavigationManager> Navigationsanforderungen programmgesteuert auslösen.</span><span class="sxs-lookup"><span data-stu-id="2516f-380">Components can also trigger navigation requests programatically through the use of <xref:Microsoft.AspNetCore.Components.NavigationManager>.</span></span> <span data-ttu-id="2516f-381">In einem solchen Szenario kann die App eine clientseitige Navigation ausführen oder den Browser anweisen, einen neuen Inhalt aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="2516f-381">In such scenarios, the app might perform a client-side navigation or indicate to the browser to go to the new location.</span></span>

<span data-ttu-id="2516f-382">Für Komponenten gilt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="2516f-382">Components must:</span></span>

* <span data-ttu-id="2516f-383">Benutzereingaben dürfen nicht in Argumenten von Navigationsaufrufen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2516f-383">Avoid using user input as part of the navigation call arguments.</span></span>
* <span data-ttu-id="2516f-384">Argumente müssen überprüft werden, um sicherzustellen, dass das Ziel von der App erlaubt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-384">Validate arguments to ensure that the target is allowed by the app.</span></span>

<span data-ttu-id="2516f-385">Andernfalls kann ein böswilliger Benutzer den Browser zwingen, eine vom Angreifer kontrollierte Website aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="2516f-385">Otherwise, a malicious user can force the browser to go to an attacker-controlled site.</span></span> <span data-ttu-id="2516f-386">In diesem Szenario überlistet der Angreifer die App, sodass diese eine Benutzereingabe im Rahmen eines Aufrufs der <xref:Microsoft.AspNetCore.Components.NavigationManager.NavigateTo%2A?displayProperty=nameWithType>-Methode verwendet.</span><span class="sxs-lookup"><span data-stu-id="2516f-386">In this scenario, the attacker tricks the app into using some user input as part of the invocation of the <xref:Microsoft.AspNetCore.Components.NavigationManager.NavigateTo%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="2516f-387">Diese Empfehlung gilt auch, wenn Links als App-Inhalt gerendert werden:</span><span class="sxs-lookup"><span data-stu-id="2516f-387">This advice also applies when rendering links as part of the app:</span></span>

* <span data-ttu-id="2516f-388">Wenn möglich, sollten Sie sich immer für relative Links entscheiden.</span><span class="sxs-lookup"><span data-stu-id="2516f-388">If possible, use relative links.</span></span>
* <span data-ttu-id="2516f-389">Überprüfen Sie, ob die Ziele von absoluten Links gültig sind, bevor Sie die Links in eine Seite einbetten.</span><span class="sxs-lookup"><span data-stu-id="2516f-389">Validate that absolute link destinations are valid before including them in a page.</span></span>

<span data-ttu-id="2516f-390">Weitere Informationen finden Sie unter <xref:security/preventing-open-redirects>.</span><span class="sxs-lookup"><span data-stu-id="2516f-390">For more information, see <xref:security/preventing-open-redirects>.</span></span>

## <a name="security-checklist"></a><span data-ttu-id="2516f-391">Checkliste für die Sicherheit</span><span class="sxs-lookup"><span data-stu-id="2516f-391">Security checklist</span></span>

<span data-ttu-id="2516f-392">Die folgende Liste von Sicherheitsmaßnahmen ist nicht abschließend:</span><span class="sxs-lookup"><span data-stu-id="2516f-392">The following list of security considerations isn't comprehensive:</span></span>

* <span data-ttu-id="2516f-393">Überprüfen Sie die Argumente von Ereignissen.</span><span class="sxs-lookup"><span data-stu-id="2516f-393">Validate arguments from events.</span></span>
* <span data-ttu-id="2516f-394">Überprüfen Sie die Eingaben und Ergebnisse aus JS-Interop-Aufrufen.</span><span class="sxs-lookup"><span data-stu-id="2516f-394">Validate inputs and results from JS interop calls.</span></span>
* <span data-ttu-id="2516f-395">Vermeiden Sie Benutzereingaben in JS-Interop-Aufrufen von .NET aus (oder überprüfen Sie diese vorher).</span><span class="sxs-lookup"><span data-stu-id="2516f-395">Avoid using (or validate beforehand) user input for .NET to JS interop calls.</span></span>
* <span data-ttu-id="2516f-396">Verhindern Sie, dass der Client unbegrenzt Arbeitsspeicher belegen kann.</span><span class="sxs-lookup"><span data-stu-id="2516f-396">Prevent the client from allocating an unbound amount of memory.</span></span>
  * <span data-ttu-id="2516f-397">Daten innerhalb der Komponente</span><span class="sxs-lookup"><span data-stu-id="2516f-397">Data within the component.</span></span>
  * <span data-ttu-id="2516f-398">`DotNetObject`-Verweise, die an den Client zurückgegeben werden</span><span class="sxs-lookup"><span data-stu-id="2516f-398">`DotNetObject` references returned to the client.</span></span>
* <span data-ttu-id="2516f-399">Schützen Sie sich vor mehreren Sendungen.</span><span class="sxs-lookup"><span data-stu-id="2516f-399">Guard against multiple dispatches.</span></span>
* <span data-ttu-id="2516f-400">Brechen Sie zeitintensive Vorgängen ab, wenn die Komponente entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="2516f-400">Cancel long-running operations when the component is disposed.</span></span>
* <span data-ttu-id="2516f-401">Vermeiden Sie Ereignisse, die große Datenmengen produzieren.</span><span class="sxs-lookup"><span data-stu-id="2516f-401">Avoid events that produce large amounts of data.</span></span>
* <span data-ttu-id="2516f-402">Benutzereingaben sollten nie für <xref:Microsoft.AspNetCore.Components.NavigationManager.NavigateTo%2A?displayProperty=nameWithType>-Aufrufe verwendet werden, und überprüfen Sie Benutzereingaben für URLs zuerst auf zulässige Ursprünge, wenn dies unvermeidlich ist.</span><span class="sxs-lookup"><span data-stu-id="2516f-402">Avoid using user input as part of calls to <xref:Microsoft.AspNetCore.Components.NavigationManager.NavigateTo%2A?displayProperty=nameWithType> and validate user input for URLs against a set of allowed origins first if unavoidable.</span></span>
* <span data-ttu-id="2516f-403">Treffen Sie keine Autorisierungsentscheidungen auf Grundlage des Zustands der Benutzeroberfläche, sondern nur anhand des Komponentenzustands.</span><span class="sxs-lookup"><span data-stu-id="2516f-403">Don't make authorization decisions based on the state of the UI but only from component state.</span></span>
* <span data-ttu-id="2516f-404">Verwenden Sie ggf. [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP), um Apps vor XSS-Angriffen zu schützen.</span><span class="sxs-lookup"><span data-stu-id="2516f-404">Consider using [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) to protect against XSS attacks.</span></span>
* <span data-ttu-id="2516f-405">Verwenden Sie ggf. CSP und [X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options), um Apps vor Clickjacking zu schützen.</span><span class="sxs-lookup"><span data-stu-id="2516f-405">Consider using CSP and [X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options) to protect against click-jacking.</span></span>
* <span data-ttu-id="2516f-406">Stellen Sie sicher, dass die CORS-Einstellungen angemessen sind, wenn Sie CORS aktivieren, oder deaktivieren Sie CORS explizit für Blazor-Apps.</span><span class="sxs-lookup"><span data-stu-id="2516f-406">Ensure CORS settings are appropriate when enabling CORS or explicitly disable CORS for Blazor apps.</span></span>
* <span data-ttu-id="2516f-407">Führen Sie Tests durch, um sicherzustellen, dass die serverseitigen Grenzwerte für die Blazor-App eine akzeptable Nutzungsqualität gewährleisten und keine nicht akzeptablen Risiken bergen.</span><span class="sxs-lookup"><span data-stu-id="2516f-407">Test to ensure that the server-side limits for the Blazor app provide an acceptable user experience without unacceptable levels of risk.</span></span>
