---
title: URL-umschreibende Middleware in ASP.NET Core
author: rick-anderson
description: Informationen zum Umschreiben und Umleiten von URL mit URL-umschreibender Middleware in ASP.NET Core-Anwendungen
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 08/16/2019
no-loc:
- ':::no-loc(appsettings.json):::'
- ':::no-loc(ASP.NET Core Identity):::'
- ':::no-loc(cookie):::'
- ':::no-loc(Cookie):::'
- ':::no-loc(Blazor):::'
- ':::no-loc(Blazor Server):::'
- ':::no-loc(Blazor WebAssembly):::'
- ':::no-loc(Identity):::'
- ":::no-loc(Let's Encrypt):::"
- ':::no-loc(Razor):::'
- ':::no-loc(SignalR):::'
uid: fundamentals/url-rewriting
ms.openlocfilehash: e7bd5f4d61661dd23eb0907f896d0d32b7799aac
ms.sourcegitcommit: ca34c1ac578e7d3daa0febf1810ba5fc74f60bbf
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/30/2020
ms.locfileid: "93061300"
---
# <a name="url-rewriting-middleware-in-aspnet-core"></a><span data-ttu-id="ecc32-103">URL-umschreibende Middleware in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="ecc32-103">URL Rewriting Middleware in ASP.NET Core</span></span>

<span data-ttu-id="ecc32-104">Von [Mikael Mengistu](https://github.com/mikaelm12)</span><span class="sxs-lookup"><span data-stu-id="ecc32-104">By [Mikael Mengistu](https://github.com/mikaelm12)</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="ecc32-105">In diesem Artikel wird das Umschreiben von URLs beschrieben. Außerdem erhalten Sie Anweisungen zur Verwendung der URL-umschreibenden Middleware in ASP.NET Core-Apps.</span><span class="sxs-lookup"><span data-stu-id="ecc32-105">This document introduces URL rewriting with instructions on how to use URL Rewriting Middleware in ASP.NET Core apps.</span></span>

<span data-ttu-id="ecc32-106">Bei der URL-Umschreibung werden die Anforderungs-URLs verändert, die auf mindesten einer vordefinierten Regel basieren.</span><span class="sxs-lookup"><span data-stu-id="ecc32-106">URL rewriting is the act of modifying request URLs based on one or more predefined rules.</span></span> <span data-ttu-id="ecc32-107">Es wird eine Abstraktion zwischen den Speicherorten und Adressen von Ressourcen erstellt, sodass diese nicht eng miteinander verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="ecc32-107">URL rewriting creates an abstraction between resource locations and their addresses so that the locations and addresses aren't tightly linked.</span></span> <span data-ttu-id="ecc32-108">Die URL-Neuschreibung ist hilfreich in verschiedenen Szenarios wie:</span><span class="sxs-lookup"><span data-stu-id="ecc32-108">URL rewriting is valuable in several scenarios to:</span></span>

* <span data-ttu-id="ecc32-109">Kurzzeitiges oder permanentes Verschieben oder Ersetzen von Serverressourcen, sowie Erhalten von stabilen Locators für diese Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-109">Move or replace server resources temporarily or permanently and maintain stable locators for those resources.</span></span>
* <span data-ttu-id="ecc32-110">Verteilen der Verarbeitung von Anforderungen auf verschiedene Apps oder Bereiche einer App.</span><span class="sxs-lookup"><span data-stu-id="ecc32-110">Split request processing across different apps or across areas of one app.</span></span>
* <span data-ttu-id="ecc32-111">Entfernen, Hinzufügen oder Umorganisieren von URL-Segmenten bei eingehenden Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-111">Remove, add, or reorganize URL segments on incoming requests.</span></span>
* <span data-ttu-id="ecc32-112">Optimieren von öffentlichen URLs für die Suchmaschinenoptimierung (Search Engine Optimization, SEO).</span><span class="sxs-lookup"><span data-stu-id="ecc32-112">Optimize public URLs for Search Engine Optimization (SEO).</span></span>
* <span data-ttu-id="ecc32-113">Gestatten der Verwendung von angezeigten öffentlichen URLs, um Besuchern zu helfen, den Inhalt vorherzusagen, der durch die Anforderung einer Ressource zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-113">Permit the use of friendly public URLs to help visitors predict the content returned by requesting a resource.</span></span>
* <span data-ttu-id="ecc32-114">Umleiten von unsicheren Anforderungen auf sichere Endpunkte.</span><span class="sxs-lookup"><span data-stu-id="ecc32-114">Redirect insecure requests to secure endpoints.</span></span>
* <span data-ttu-id="ecc32-115">Verhindern von Hotlinks zu externen Websites, die eine gehostete statische Ressource auf einer anderen Website verwenden, bei der die Ressource zu ihrem eigenen Inhalt verlinkt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-115">Prevent hotlinking, where an external site uses a hosted static asset on another site by linking the asset into its own content.</span></span>

> [!NOTE]
> <span data-ttu-id="ecc32-116">Wenn Sie URLs umschreiben, kann das negative Auswirkungen auf die Leistung einer App haben.</span><span class="sxs-lookup"><span data-stu-id="ecc32-116">URL rewriting can reduce the performance of an app.</span></span> <span data-ttu-id="ecc32-117">Wenn möglich, sollten Sie so wenig Regeln wie möglich erstellen und darauf achten, dass diese nicht zu kompliziert sind.</span><span class="sxs-lookup"><span data-stu-id="ecc32-117">Where feasible, limit the number and complexity of rules.</span></span>

<span data-ttu-id="ecc32-118">[Anzeigen oder Herunterladen von Beispielcode](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/url-rewriting/samples/) ([Vorgehensweise zum Herunterladen](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="ecc32-118">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/url-rewriting/samples/) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="url-redirect-and-url-rewrite"></a><span data-ttu-id="ecc32-119">Umleiten und Umschreiben von URLs</span><span class="sxs-lookup"><span data-stu-id="ecc32-119">URL redirect and URL rewrite</span></span>

<span data-ttu-id="ecc32-120">Der Unterschied zwischen dem *Umleiten* und *Neu schreiben* von URLs ist zwar gering, allerdings haben die beiden Verfahren sehr unterschiedliche Auswirkungen auf die Bereitstellung von Ressourcen für Clients.</span><span class="sxs-lookup"><span data-stu-id="ecc32-120">The difference in wording between *URL redirect* and *URL rewrite* is subtle but has important implications for providing resources to clients.</span></span> <span data-ttu-id="ecc32-121">Die URL-umschreibenden Middleware von ASP.NET Core kann für beide Vorgänge verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-121">ASP.NET Core's URL Rewriting Middleware is capable of meeting the need for both.</span></span>

<span data-ttu-id="ecc32-122">Bei der *Umleitung von URLs* findet ein clientseitiger Vorgang statt, bei dem der Client angewiesen wird, auf eine Ressource unter einer anderen Adresse zuzugreifen, als die, die der Client ursprünglich angefordert hat.</span><span class="sxs-lookup"><span data-stu-id="ecc32-122">A *URL redirect* involves a client-side operation, where the client is instructed to access a resource at a different address than the client originally requested.</span></span> <span data-ttu-id="ecc32-123">Dafür ist ein Roundtrip zum Server erforderlich.</span><span class="sxs-lookup"><span data-stu-id="ecc32-123">This requires a round trip to the server.</span></span> <span data-ttu-id="ecc32-124">Die Umleitungs-URL, die an den Client zurückgegeben wird, wird in der Adressleiste des Browsers angezeigt, wenn der Client eine neue Anforderung an die Ressource sendet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-124">The redirect URL returned to the client appears in the browser's address bar when the client makes a new request for the resource.</span></span>

<span data-ttu-id="ecc32-125">Wenn `/resource` auf `/different-resource`*umgeleitet* wird, sendet der Server die Antwort, dass der Client die Ressource unter `/different-resource` abrufen soll. In der Antwort ist außerdem ein Statuscode enthalten, aus dem entnommen werden kann, ob die Umleitung temporär oder permanent ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-125">If `/resource` is *redirected* to `/different-resource`, the server responds that the client should obtain the resource at `/different-resource` with a status code indicating that the redirect is either temporary or permanent.</span></span>

![Ein Web-API-Dienstendpunkt wurde auf dem Server kurzzeitig von Version 1 (v1) auf Version 2 (v2) geändert.](url-rewriting/_static/url_redirect.png)

<span data-ttu-id="ecc32-131">Wenn Anforderungen auf eine andere URL umgeleitet werden, muss angegeben werden, ob die Umleitung temporär oder permanent sein soll. Geben Sie hierzu den Statuscode mit der Antwort an:</span><span class="sxs-lookup"><span data-stu-id="ecc32-131">When redirecting requests to a different URL, indicate whether the redirect is permanent or temporary by specifying the status code with the response:</span></span>

* <span data-ttu-id="ecc32-132">Der Statuscode *301 – Permanent verschoben* wird verwendet, wenn der Ressource eine neue permanente URL zugewiesen wurde, und Sie dem Client die Anweisung geben möchten, dass alle zukünftigen Anforderungen an die Ressource die neue URL verwenden sollen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-132">The *301 - Moved Permanently* status code is used where the resource has a new, permanent URL and you wish to instruct the client that all future requests for the resource should use the new URL.</span></span> <span data-ttu-id="ecc32-133">*Der Client kann die Antwort zwischenspeichern und wiederverwenden, wenn der Statuscode 301 empfangen wird.*</span><span class="sxs-lookup"><span data-stu-id="ecc32-133">*The client may cache and reuse the response when a 301 status code is received.*</span></span>

* <span data-ttu-id="ecc32-134">Der Statuscode *302 – Gefunden* wird verwendet, wenn die Umleitung temporär ist oder sowieso Änderungen vorbehalten sind.</span><span class="sxs-lookup"><span data-stu-id="ecc32-134">The *302 - Found* status code is used where the redirection is temporary or generally subject to change.</span></span> <span data-ttu-id="ecc32-135">Der Statuscode 302 teilt dem Client mit, dass die URL nicht gespeichert und nicht wiederverwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="ecc32-135">The 302 status code indicates to the client not to store the URL and use it in the future.</span></span>

<span data-ttu-id="ecc32-136">Weitere Informationen zu Statuscodes finden Sie unter [RFC 2616: Status Code Definitions](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html).</span><span class="sxs-lookup"><span data-stu-id="ecc32-136">For more information on status codes, see [RFC 2616: Status Code Definitions](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html).</span></span>

<span data-ttu-id="ecc32-137">Bei der *Neuschreibung einer URL* handelt es sich um einen serverseitigen Vorgang, bei dem eine Ressource von einer anderen Ressourcenadresse, als der vom Client angeforderten, bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-137">A *URL rewrite* is a server-side operation that provides a resource from a different resource address than the client requested.</span></span> <span data-ttu-id="ecc32-138">Wenn eine URL neu geschrieben wird, ist kein Roundtrip zum Server erforderlich.</span><span class="sxs-lookup"><span data-stu-id="ecc32-138">Rewriting a URL doesn't require a round trip to the server.</span></span> <span data-ttu-id="ecc32-139">Die neu geschriebene URL wird nicht an den Server zurückgegeben und nicht in der Adressleiste des Browsers angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-139">The rewritten URL isn't returned to the client and doesn't appear in the browser's address bar.</span></span>

<span data-ttu-id="ecc32-140">Wenn `/resource` in `/different-resource`*umgeschrieben* wird, ruft der Server die Ressource *intern* ab und gibt sie zurück an `/different-resource`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-140">If `/resource` is *rewritten* to `/different-resource`, the server *internally* fetches and returns the resource at `/different-resource`.</span></span>

<span data-ttu-id="ecc32-141">Auch wenn der Client die Ressource unter der neu geschriebene URL abrufen kann, erhält er nicht die Information, dass die Ressource unter der umgeschriebenen URL gespeichert ist, wenn er die Anforderung sendet und eine Antwort erhält.</span><span class="sxs-lookup"><span data-stu-id="ecc32-141">Although the client might be able to retrieve the resource at the rewritten URL, the client isn't informed that the resource exists at the rewritten URL when it makes its request and receives the response.</span></span>

![Ein Web-API-Dienstendpunkt wurde auf dem Server von Version 1 (v1) auf Version 2 (v2) geändert.](url-rewriting/_static/url_rewrite.png)

## <a name="url-rewriting-sample-app"></a><span data-ttu-id="ecc32-146">URL-umschreibende Beispiel-App</span><span class="sxs-lookup"><span data-stu-id="ecc32-146">URL rewriting sample app</span></span>

<span data-ttu-id="ecc32-147">Mit der [Beispiel-App](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/url-rewriting/samples/) können Sie die Features der Middleware zur URL-Neuschreibung testen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-147">You can explore the features of the URL Rewriting Middleware with the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/url-rewriting/samples/).</span></span> <span data-ttu-id="ecc32-148">Die App wendet Umleitungs- und Neuschreibungsregeln an und zeigt die umgeleitete oder neu geschriebene URL für verschiedene Szenarios an.</span><span class="sxs-lookup"><span data-stu-id="ecc32-148">The app applies redirect and rewrite rules and shows the redirected or rewritten URL for several scenarios.</span></span>

## <a name="when-to-use-url-rewriting-middleware"></a><span data-ttu-id="ecc32-149">Empfohlene Verwendung der URL-umschreibenden Middleware</span><span class="sxs-lookup"><span data-stu-id="ecc32-149">When to use URL Rewriting Middleware</span></span>

<span data-ttu-id="ecc32-150">Sie können Middleware zur URL-Neuschreibung verwenden, wenn die folgenden Ansätze nicht möglich sind:</span><span class="sxs-lookup"><span data-stu-id="ecc32-150">Use URL Rewriting Middleware when you're unable to use the following approaches:</span></span>

* [<span data-ttu-id="ecc32-151">URL Rewrite module with IIS on Windows Server (URL-Neuschreibungsmodul mit IIS auf Windows-Server)</span><span class="sxs-lookup"><span data-stu-id="ecc32-151">URL Rewrite module with IIS on Windows Server</span></span>](https://www.iis.net/downloads/microsoft/url-rewrite)
* [<span data-ttu-id="ecc32-152">Apache mod_rewrite module on Apache Server (Apache mod_rewrite-Modul auf Apache-Server)</span><span class="sxs-lookup"><span data-stu-id="ecc32-152">Apache mod_rewrite module on Apache Server</span></span>](https://httpd.apache.org/docs/2.4/rewrite/)
* [<span data-ttu-id="ecc32-153">URL rewriting on Nginx (URL-Neuschreibung auf Nginx)</span><span class="sxs-lookup"><span data-stu-id="ecc32-153">URL rewriting on Nginx</span></span>](https://www.nginx.com/blog/creating-nginx-rewrite-rules/)

<span data-ttu-id="ecc32-154">Sie können die Middleware auch verwenden, wenn die App auf dem [HTTP.sys-Server](xref:fundamentals/servers/httpsys) (früher als WebListener bezeichnet) gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-154">Also, use the middleware when the app is hosted on [HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called WebListener).</span></span>

<span data-ttu-id="ecc32-155">Die Hauptgründe für die Verwendung der serverbasierten Technologien zur URL-Neuschreibung in IIS, Apache und Nginx sind:</span><span class="sxs-lookup"><span data-stu-id="ecc32-155">The main reasons to use the server-based URL rewriting technologies in IIS, Apache, and Nginx are:</span></span>

* <span data-ttu-id="ecc32-156">Die Middleware unterstützt nicht alle Features dieser Module.</span><span class="sxs-lookup"><span data-stu-id="ecc32-156">The middleware doesn't support the full features of these modules.</span></span>

  <span data-ttu-id="ecc32-157">Einige Features der Servermodule funktionieren nicht mit ASP.NET Core-Projekten – z.B. die Einschränkungen `IsFile` und `IsDirectory` des IIS-Neuschreibungsmoduls.</span><span class="sxs-lookup"><span data-stu-id="ecc32-157">Some of the features of the server modules don't work with ASP.NET Core projects, such as the `IsFile` and `IsDirectory` constraints of the IIS Rewrite module.</span></span> <span data-ttu-id="ecc32-158">Verwenden Sie in diesem Szenario stattdessen die Middleware.</span><span class="sxs-lookup"><span data-stu-id="ecc32-158">In these scenarios, use the middleware instead.</span></span>
* <span data-ttu-id="ecc32-159">Die Leistung der Middleware stimmt wahrscheinlich nicht mit der Leistung der Module überein.</span><span class="sxs-lookup"><span data-stu-id="ecc32-159">The performance of the middleware probably doesn't match that of the modules.</span></span>

  <span data-ttu-id="ecc32-160">Benchmarking ist der einzige Weg, um sicher festzustellen, welcher Ansatz die Leistung am meisten beeinträchtigt oder ob die nachlassende Leistung nur geringfügig ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-160">Benchmarking is the only way to know for sure which approach degrades performance the most or if degraded performance is negligible.</span></span>

## <a name="package"></a><span data-ttu-id="ecc32-161">Package</span><span class="sxs-lookup"><span data-stu-id="ecc32-161">Package</span></span>

<span data-ttu-id="ecc32-162">Die URL-umschreibende Middleware wird über das [Microsoft.AspNetCore.Rewrite](https://www.nuget.org/packages/Microsoft.AspNetCore.Rewrite)-Paket bereitgestellt, das implizit in ASP.NET Core-Apps enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-162">URL Rewriting Middleware is provided by the [Microsoft.AspNetCore.Rewrite](https://www.nuget.org/packages/Microsoft.AspNetCore.Rewrite) package, which is implicitly included in ASP.NET Core apps.</span></span>

## <a name="extension-and-options"></a><span data-ttu-id="ecc32-163">Erweiterung und Optionen</span><span class="sxs-lookup"><span data-stu-id="ecc32-163">Extension and options</span></span>

<span data-ttu-id="ecc32-164">Legen Sie URL-Neuschreibungs- und -Umleitungsregeln fest, indem Sie eine Instanz der [RewriteOptions](xref:Microsoft.AspNetCore.Rewrite.RewriteOptions)-Klasse erstellen und Erweiterungsmethoden für jede Neuschreibungsregel hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-164">Establish URL rewrite and redirect rules by creating an instance of the [RewriteOptions](xref:Microsoft.AspNetCore.Rewrite.RewriteOptions) class with extension methods for each of your rewrite rules.</span></span> <span data-ttu-id="ecc32-165">Verketten Sie mehrere Regeln in der Reihenfolge miteinander, in der sie verarbeitet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-165">Chain multiple rules in the order that you would like them processed.</span></span> <span data-ttu-id="ecc32-166">Die `RewriteOptions` werden an die Middleware zur URL-Neuschreibung übergeben, wenn diese mit <xref:Microsoft.AspNetCore.Builder.RewriteBuilderExtensions.UseRewriter*> zu der Anforderungspipeline hinzugefügt wird:</span><span class="sxs-lookup"><span data-stu-id="ecc32-166">The `RewriteOptions` are passed into the URL Rewriting Middleware as it's added to the request pipeline with <xref:Microsoft.AspNetCore.Builder.RewriteBuilderExtensions.UseRewriter*>:</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/Startup.cs?name=snippet1)]

### <a name="redirect-non-www-to-www"></a><span data-ttu-id="ecc32-167">Umleitung einer Nicht-WWW-Anforderung an eine WWW-Anforderung</span><span class="sxs-lookup"><span data-stu-id="ecc32-167">Redirect non-www to www</span></span>

<span data-ttu-id="ecc32-168">Drei Optionen ermöglichen der App, Nicht-`www`-Anforderungen an `www` umzuleiten:</span><span class="sxs-lookup"><span data-stu-id="ecc32-168">Three options permit the app to redirect non-`www` requests to `www`:</span></span>

* <span data-ttu-id="ecc32-169"><xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToWwwPermanent*>: Die Anforderung wird dauerhaft an die Unterdomäne `www` umgeleitet, sofern die Anforderung nicht `www` ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-169"><xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToWwwPermanent*>: Permanently redirect the request to the `www` subdomain if the request is non-`www`.</span></span> <span data-ttu-id="ecc32-170">Wird mit dem Statuscode [Status308PermanentRedirect](xref:Microsoft.AspNetCore.Http.StatusCodes.Status308PermanentRedirect) umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-170">Redirects with a [Status308PermanentRedirect](xref:Microsoft.AspNetCore.Http.StatusCodes.Status308PermanentRedirect) status code.</span></span>

* <span data-ttu-id="ecc32-171"><xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToWww*>: Die Anforderung wird an die Unterdomäne `www` umgeleitet, sofern die eingehende Anforderung nicht `www` ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-171"><xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToWww*>: Redirect the request to the `www` subdomain if the incoming request is non-`www`.</span></span> <span data-ttu-id="ecc32-172">Wird mit dem Statuscode [Status307TemporaryRedirect](xref:Microsoft.AspNetCore.Http.StatusCodes.Status307TemporaryRedirect) umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-172">Redirects with a [Status307TemporaryRedirect](xref:Microsoft.AspNetCore.Http.StatusCodes.Status307TemporaryRedirect) status code.</span></span> <span data-ttu-id="ecc32-173">Eine Überladung ermöglicht es Ihnen, den Statuscode für die Antwort zu senden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-173">An overload permits you to provide the status code for the response.</span></span> <span data-ttu-id="ecc32-174">Verwenden Sie ein Feld der <xref:Microsoft.AspNetCore.Http.StatusCodes>-Klasse, um einen Statuscode zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-174">Use a field of the <xref:Microsoft.AspNetCore.Http.StatusCodes> class for a status code assignment.</span></span>

### <a name="url-redirect"></a><span data-ttu-id="ecc32-175">Umleitungs-URL</span><span class="sxs-lookup"><span data-stu-id="ecc32-175">URL redirect</span></span>

<span data-ttu-id="ecc32-176">Verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirect*>, um Anforderungen umzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-176">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirect*> to redirect requests.</span></span> <span data-ttu-id="ecc32-177">Der erste Parameter enthält Ihren RegEx, damit dieser dem Pfad der eingehenden URL zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ecc32-177">The first parameter contains your regex for matching on the path of the incoming URL.</span></span> <span data-ttu-id="ecc32-178">Beim zweiten Parameter handelt es sich um eine Ersatzzeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="ecc32-178">The second parameter is the replacement string.</span></span> <span data-ttu-id="ecc32-179">Der dritte Parameter gibt, falls vorhanden, den Statuscode an.</span><span class="sxs-lookup"><span data-stu-id="ecc32-179">The third parameter, if present, specifies the status code.</span></span> <span data-ttu-id="ecc32-180">Wenn Sie den Statuscode nicht angeben, wird standardmäßig *302 – Gefunden* zurückgegeben, was bedeutet, dass die Ressource kurzzeitig verschoben oder ersetzt wurde.</span><span class="sxs-lookup"><span data-stu-id="ecc32-180">If you don't specify the status code, the status code defaults to *302 - Found* , which indicates that the resource is temporarily moved or replaced.</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=9)]

<span data-ttu-id="ecc32-181">Aktivieren Sie in Ihrem Browser die Entwicklertools, und senden Sie eine Anforderung an die Beispiel-App mit dem Pfad `/redirect-rule/1234/5678`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-181">In a browser with developer tools enabled, make a request to the sample app with the path `/redirect-rule/1234/5678`.</span></span> <span data-ttu-id="ecc32-182">Der RegEx stimmt mit dem Anforderungspfad unter `redirect-rule/(.*)` überein, und der Pfad wird durch `/redirected/1234/5678` ersetzt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-182">The regex matches the request path on `redirect-rule/(.*)`, and the path is replaced with `/redirected/1234/5678`.</span></span> <span data-ttu-id="ecc32-183">Die Umleitungs-URL wird mit dem Statuscode *302 – Gefunden* an den Client zurückgesendet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-183">The redirect URL is sent back to the client with a *302 - Found* status code.</span></span> <span data-ttu-id="ecc32-184">Unter der Umleitungs-URL sendet der Browser eine neue Anforderung, die in dessen Adressleiste angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-184">The browser makes a new request at the redirect URL, which appears in the browser's address bar.</span></span> <span data-ttu-id="ecc32-185">Da keine Regel in der Beispiel-App mit der Umleitungs-URL übereinstimmt:</span><span class="sxs-lookup"><span data-stu-id="ecc32-185">Since no rules in the sample app match on the redirect URL:</span></span>

* <span data-ttu-id="ecc32-186">Die zweite Anforderung erhält die Antwort *200 – OK* von der App.</span><span class="sxs-lookup"><span data-stu-id="ecc32-186">The second request receives a *200 - OK* response from the app.</span></span>
* <span data-ttu-id="ecc32-187">Der Antworttext zeigt die Umleitungs-URL an.</span><span class="sxs-lookup"><span data-stu-id="ecc32-187">The body of the response shows the redirect URL.</span></span>

<span data-ttu-id="ecc32-188">Wenn eine URL *weitergeleitet* wird, wird ein Roundtrip zum Server ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="ecc32-188">A round trip is made to the server when a URL is *redirected*.</span></span>

> [!WARNING]
> <span data-ttu-id="ecc32-189">Seien Sie vorsichtig, wenn Sie Umleitungsregeln einrichten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-189">Be cautious when establishing redirect rules.</span></span> <span data-ttu-id="ecc32-190">Bei jeder Anforderung an die App werden Umleitungsregeln überprüft – auch nach einer Umleitung.</span><span class="sxs-lookup"><span data-stu-id="ecc32-190">Redirect rules are evaluated on every request to the app, including after a redirect.</span></span> <span data-ttu-id="ecc32-191">Dabei kann schnell aus Versehen eine *Dauerschleife von Umleitungen* entstehen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-191">It's easy to accidentally create a *loop of infinite redirects*.</span></span>

<span data-ttu-id="ecc32-192">Ursprüngliche Anforderung: `/redirect-rule/1234/5678`</span><span class="sxs-lookup"><span data-stu-id="ecc32-192">Original Request: `/redirect-rule/1234/5678`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten nachverfolgen](url-rewriting/_static/add_redirect.png)

<span data-ttu-id="ecc32-194">Der Teil des Ausdruck in Klammern wird als *Erfassungsgruppe* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-194">The part of the expression contained within parentheses is called a *capture group*.</span></span> <span data-ttu-id="ecc32-195">Der Punkt (`.`) im Ausdruck steht für *Übereinstimmung mit beliebigem Zeichen*.</span><span class="sxs-lookup"><span data-stu-id="ecc32-195">The dot (`.`) of the expression means *match any character*.</span></span> <span data-ttu-id="ecc32-196">Das Sternchen (`*`) steht für *Übereinstimmung mit dem vorausgehenden Zeichen (keinmal oder mindestens einmal)* .</span><span class="sxs-lookup"><span data-stu-id="ecc32-196">The asterisk (`*`) indicates *match the preceding character zero or more times*.</span></span> <span data-ttu-id="ecc32-197">Daher werden die letzten beiden Pfadsegmente der URL (`1234/5678`) von der Erfassungsgruppe erfasst `(.*)`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-197">Therefore, the last two path segments of the URL, `1234/5678`, are captured by capture group `(.*)`.</span></span> <span data-ttu-id="ecc32-198">Alle Werte, die Sie in der Anforderungs-URL nach `redirect-rule/` angeben, werden von dieser Erfassungsgruppe erfasst.</span><span class="sxs-lookup"><span data-stu-id="ecc32-198">Any value you provide in the request URL after `redirect-rule/` is captured by this single capture group.</span></span>

<span data-ttu-id="ecc32-199">Erfassungsgruppen werden in der Ersetzungszeichenfolge mit dem Dollarzeichen (`$`) in die Zeichenfolge eingefügt. Danach folgt die Sequenznummer der Erfassung.</span><span class="sxs-lookup"><span data-stu-id="ecc32-199">In the replacement string, captured groups are injected into the string with the dollar sign (`$`) followed by the sequence number of the capture.</span></span> <span data-ttu-id="ecc32-200">Der erste Wert der Erfassungsgruppe wird mit `$1` abgerufen, der zweite mit `$2`. Dies wird in Sequenzen für die Erfassungsgruppen Ihres RegEx weitergeführt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-200">The first capture group value is obtained with `$1`, the second with `$2`, and they continue in sequence for the capture groups in your regex.</span></span> <span data-ttu-id="ecc32-201">Nur eine Erfassungsgruppe ist in der Beispiel-App im RegEx der Umleitungsregel enthalten. Das bedeutet, dass es in die Ersetzungszeichenfolge nur eine Gruppe eingefügt wird, nämlich `$1`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-201">There's only one captured group in the redirect rule regex in the sample app, so there's only one injected group in the replacement string, which is `$1`.</span></span> <span data-ttu-id="ecc32-202">Wenn die Regel angewendet wird, ändert sich die URL in `/redirected/1234/5678`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-202">When the rule is applied, the URL becomes `/redirected/1234/5678`.</span></span>

### <a name="url-redirect-to-a-secure-endpoint"></a><span data-ttu-id="ecc32-203">URL-Umleitung an einen sicheren Endpunkt</span><span class="sxs-lookup"><span data-stu-id="ecc32-203">URL redirect to a secure endpoint</span></span>

<span data-ttu-id="ecc32-204">Verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToHttps*>, um HTTP-Anforderungen auf denselben Host und Pfad mithilfe des HTTPS-Protokolls umzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-204">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToHttps*> to redirect HTTP requests to the same host and path using the HTTPS protocol.</span></span> <span data-ttu-id="ecc32-205">Wenn kein Statuscode angegeben wird, wird für die Middleware standardmäßig *302 – Gefunden* zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ecc32-205">If the status code isn't supplied, the middleware defaults to *302 - Found*.</span></span> <span data-ttu-id="ecc32-206">Wenn kein Port angegeben ist:</span><span class="sxs-lookup"><span data-stu-id="ecc32-206">If the port isn't supplied:</span></span>

* <span data-ttu-id="ecc32-207">Für die Middleware wird standardmäßig `null` zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ecc32-207">The middleware defaults to `null`.</span></span>
* <span data-ttu-id="ecc32-208">Das Schema ändert sich in `https` (HTTPS-Protokoll), und der Client hat über Port 443 Zugriff auf die Ressource.</span><span class="sxs-lookup"><span data-stu-id="ecc32-208">The scheme changes to `https` (HTTPS protocol), and the client accesses the resource on port 443.</span></span>

<span data-ttu-id="ecc32-209">Im folgenden Beispiel wird dargestellt, wie Sie den Statuscode *301 – Permanent verschoben* festlegen und den Port in 5001 ändern.</span><span class="sxs-lookup"><span data-stu-id="ecc32-209">The following example shows how to set the status code to *301 - Moved Permanently* and change the port to 5001.</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    var options = new RewriteOptions()
        .AddRedirectToHttps(301, 5001);

    app.UseRewriter(options);
}
```

<span data-ttu-id="ecc32-210">Verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToHttpsPermanent*>, um unsichere Anforderungen auf denselben Host und Pfad mit einem sicheren HTTPS-Protokoll auf Port 443 umzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-210">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToHttpsPermanent*> to redirect insecure requests to the same host and path with secure HTTPS protocol on port 443.</span></span> <span data-ttu-id="ecc32-211">Die Middleware legt den Statuscode auf *301 – Permanent verschoben* fest.</span><span class="sxs-lookup"><span data-stu-id="ecc32-211">The middleware sets the status code to *301 - Moved Permanently*.</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    var options = new RewriteOptions()
        .AddRedirectToHttpsPermanent();

    app.UseRewriter(options);
}
```

> [!NOTE]
> <span data-ttu-id="ecc32-212">Wenn Sie eine Umleitung an einen sicheren Endpunkt ohne weitere erforderliche Umleitungsregeln durchführen, wird empfohlen, Middleware für HTTPS-Umleitung zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-212">When redirecting to a secure endpoint without the requirement for additional redirect rules, we recommend using HTTPS Redirection Middleware.</span></span> <span data-ttu-id="ecc32-213">Weitere Informationen finden Sie im Artikel zum [Erzwingen von HTTPS](xref:security/enforcing-ssl#require-https).</span><span class="sxs-lookup"><span data-stu-id="ecc32-213">For more information, see the [Enforce HTTPS](xref:security/enforcing-ssl#require-https) topic.</span></span>

<span data-ttu-id="ecc32-214">Anhand der Beispiel-App wird veranschaulicht, wie `AddRedirectToHttps` oder `AddRedirectToHttpsPermanent` verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-214">The sample app is capable of demonstrating how to use `AddRedirectToHttps` or `AddRedirectToHttpsPermanent`.</span></span> <span data-ttu-id="ecc32-215">Fügen Sie die Erweiterungsmethode zu den `RewriteOptions` hinzu.</span><span class="sxs-lookup"><span data-stu-id="ecc32-215">Add the extension method to the `RewriteOptions`.</span></span> <span data-ttu-id="ecc32-216">Senden Sie eine unsichere Anforderung an die App unter einer beliebigen URL.</span><span class="sxs-lookup"><span data-stu-id="ecc32-216">Make an insecure request to the app at any URL.</span></span> <span data-ttu-id="ecc32-217">Schließen Sie die Sicherheitswarnung des Browsers, in der Sie darüber informiert werden, dass das selbstsignierte Zertifikat nicht vertrauenswürdig ist, oder erstellen sie eine Ausnahme, um dem Zertifikat zu vertrauen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-217">Dismiss the browser security warning that the self-signed certificate is untrusted or create an exception to trust the certificate.</span></span>

<span data-ttu-id="ecc32-218">Ursprüngliche Anforderung über `AddRedirectToHttps(301, 5001)`: `http://localhost:5000/secure`</span><span class="sxs-lookup"><span data-stu-id="ecc32-218">Original Request using `AddRedirectToHttps(301, 5001)`: `http://localhost:5000/secure`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten nachverfolgen](url-rewriting/_static/add_redirect_to_https.png)

<span data-ttu-id="ecc32-220">Ursprüngliche Anforderung über `AddRedirectToHttpsPermanent`: `http://localhost:5000/secure`</span><span class="sxs-lookup"><span data-stu-id="ecc32-220">Original Request using `AddRedirectToHttpsPermanent`: `http://localhost:5000/secure`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten nachverfolgen](url-rewriting/_static/add_redirect_to_https_permanent.png)

### <a name="url-rewrite"></a><span data-ttu-id="ecc32-222">Umschreiben einer URL</span><span class="sxs-lookup"><span data-stu-id="ecc32-222">URL rewrite</span></span>

<span data-ttu-id="ecc32-223">Erstellen Sie mithilfe von <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRewrite*> eine Regel zum Umschreiben von URLs.</span><span class="sxs-lookup"><span data-stu-id="ecc32-223">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRewrite*> to create a rule for rewriting URLs.</span></span> <span data-ttu-id="ecc32-224">Der erste Parameter enthält den RegEx, damit dieser der eingehenden URL zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ecc32-224">The first parameter contains the regex for matching on the incoming URL path.</span></span> <span data-ttu-id="ecc32-225">Beim zweiten Parameter handelt es sich um eine Ersatzzeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="ecc32-225">The second parameter is the replacement string.</span></span> <span data-ttu-id="ecc32-226">Der dritte Parameter (`skipRemainingRules: {true|false}`) teilt der Middleware mit, ob sie zusätzliche Umschreibungsregeln überspringen soll, wenn die aktuelle Regel angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-226">The third parameter, `skipRemainingRules: {true|false}`, indicates to the middleware whether or not to skip additional rewrite rules if the current rule is applied.</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=10-11)]

<span data-ttu-id="ecc32-227">Ursprüngliche Anforderung: `/rewrite-rule/1234/5678`</span><span class="sxs-lookup"><span data-stu-id="ecc32-227">Original Request: `/rewrite-rule/1234/5678`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderung und Antwort nachverfolgen](url-rewriting/_static/add_rewrite.png)

<span data-ttu-id="ecc32-229">Das Zirkumflexzeichen (`^`) am Anfang des Ausdrucks bedeutet, dass die Übereinstimmung schon am Anfang des URL-Pfads beginnt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-229">The carat (`^`) at the beginning of the expression means that matching starts at the beginning of the URL path.</span></span>

<span data-ttu-id="ecc32-230">In dem vorherigen Beispiel zu den Umleitungsregeln, `redirect-rule/(.*)`, beginnt der RegEx nicht mit einem Zirkumflexzeichen (`^`).</span><span class="sxs-lookup"><span data-stu-id="ecc32-230">In the earlier example with the redirect rule, `redirect-rule/(.*)`, there's no carat (`^`) at the start of the regex.</span></span> <span data-ttu-id="ecc32-231">So kann für eine Übereinstimmung ein beliebiges Zeichen im Pfad vor `redirect-rule/` stehen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-231">Therefore, any characters may precede `redirect-rule/` in the path for a successful match.</span></span>

| <span data-ttu-id="ecc32-232">Pfad</span><span class="sxs-lookup"><span data-stu-id="ecc32-232">Path</span></span>                               | <span data-ttu-id="ecc32-233">Match</span><span class="sxs-lookup"><span data-stu-id="ecc32-233">Match</span></span> |
| ---------------------------------- | :---: |
| `/redirect-rule/1234/5678`         | <span data-ttu-id="ecc32-234">Ja</span><span class="sxs-lookup"><span data-stu-id="ecc32-234">Yes</span></span>   |
| `/my-cool-redirect-rule/1234/5678` | <span data-ttu-id="ecc32-235">Ja</span><span class="sxs-lookup"><span data-stu-id="ecc32-235">Yes</span></span>   |
| `/anotherredirect-rule/1234/5678`  | <span data-ttu-id="ecc32-236">Ja</span><span class="sxs-lookup"><span data-stu-id="ecc32-236">Yes</span></span>   |

<span data-ttu-id="ecc32-237">Die Umschreibungsregel (`^rewrite-rule/(\d+)/(\d+)`) stimmt nur mit Pfaden überein, wenn sie mit `rewrite-rule/` beginnen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-237">The rewrite rule, `^rewrite-rule/(\d+)/(\d+)`, only matches paths if they start with `rewrite-rule/`.</span></span> <span data-ttu-id="ecc32-238">Beachten Sie die unterschiedliche Übereinstimmung in der folgenden Tabelle:</span><span class="sxs-lookup"><span data-stu-id="ecc32-238">In the following table, note the difference in matching.</span></span>

| <span data-ttu-id="ecc32-239">Pfad</span><span class="sxs-lookup"><span data-stu-id="ecc32-239">Path</span></span>                              | <span data-ttu-id="ecc32-240">Match</span><span class="sxs-lookup"><span data-stu-id="ecc32-240">Match</span></span> |
| --------------------------------- | :---: |
| `/rewrite-rule/1234/5678`         | <span data-ttu-id="ecc32-241">Ja</span><span class="sxs-lookup"><span data-stu-id="ecc32-241">Yes</span></span>   |
| `/my-cool-rewrite-rule/1234/5678` | <span data-ttu-id="ecc32-242">Nein</span><span class="sxs-lookup"><span data-stu-id="ecc32-242">No</span></span>    |
| `/anotherrewrite-rule/1234/5678`  | <span data-ttu-id="ecc32-243">Nein</span><span class="sxs-lookup"><span data-stu-id="ecc32-243">No</span></span>    |

<span data-ttu-id="ecc32-244">Auf den `^rewrite-rule/`-Teil des Ausdruck folgen zwei Erfassungsgruppen: `(\d+)/(\d+)`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-244">Following the `^rewrite-rule/` portion of the expression, there are two capture groups, `(\d+)/(\d+)`.</span></span> <span data-ttu-id="ecc32-245">`\d` steht für *Übereinstimmung mit einer Ziffer (Zahl)* .</span><span class="sxs-lookup"><span data-stu-id="ecc32-245">The `\d` signifies *match a digit (number)*.</span></span> <span data-ttu-id="ecc32-246">Das Pluszeichen (`+`) steht für *match one or more of the preceding character* (Übereinstimmung mit mindestens einem vorausgehenden Zeichen).</span><span class="sxs-lookup"><span data-stu-id="ecc32-246">The plus sign (`+`) means *match one or more of the preceding character*.</span></span> <span data-ttu-id="ecc32-247">Aus diesem Grund muss die URL eine Zahl enthalten, auf die ein Schrägstrich und eine weitere Zahl folgt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-247">Therefore, the URL must contain a number followed by a forward-slash followed by another number.</span></span> <span data-ttu-id="ecc32-248">Die Erfassungsgruppen werden in die umgeschriebene URL als `$1` und `$2` eingefügt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-248">These capture groups are injected into the rewritten URL as `$1` and `$2`.</span></span> <span data-ttu-id="ecc32-249">Über die Ersetzungszeichenfolge der Neuschreibungsregel werden die Erfassungsgruppen in die Abfragezeichenfolge eingefügt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-249">The rewrite rule replacement string places the captured groups into the query string.</span></span> <span data-ttu-id="ecc32-250">Der angeforderte `/rewrite-rule/1234/5678`-Pfad wird umgeschrieben, um eine Ressource unter `/rewritten?var1=1234&var2=5678` abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-250">The requested path of `/rewrite-rule/1234/5678` is rewritten to obtain the resource at `/rewritten?var1=1234&var2=5678`.</span></span> <span data-ttu-id="ecc32-251">Wenn es in der ursprünglichen Anforderung eine Abfragezeichenfolge gibt, bleibt diese erhalten, wenn die URL umgeschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-251">If a query string is present on the original request, it's preserved when the URL is rewritten.</span></span>

<span data-ttu-id="ecc32-252">Es gibt keinen Roundtrip zum Server, um die Ressource abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-252">There's no round trip to the server to obtain the resource.</span></span> <span data-ttu-id="ecc32-253">Wenn es die Ressource gibt, wird sie abgerufen und dem Client mit dem Statuscode *200 – OK* zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ecc32-253">If the resource exists, it's fetched and returned to the client with a *200 - OK* status code.</span></span> <span data-ttu-id="ecc32-254">Da der Client nicht umgeleitet wird, ändert sich die URL in der Adressleiste des Browsers nicht.</span><span class="sxs-lookup"><span data-stu-id="ecc32-254">Because the client isn't redirected, the URL in the browser's address bar doesn't change.</span></span> <span data-ttu-id="ecc32-255">Clients können nicht erkennen, dass ein Vorgang zum erneuten Schreiben einer URL auf dem Server stattgefunden hat.</span><span class="sxs-lookup"><span data-stu-id="ecc32-255">Clients can't detect that a URL rewrite operation occurred on the server.</span></span>

> [!NOTE]
> <span data-ttu-id="ecc32-256">Verwenden Sie `skipRemainingRules: true`, wo immer das möglich ist, da das Abgleichen von Regeln rechnerisch sehr aufwendig ist und die Antwortzeit der App erhöht.</span><span class="sxs-lookup"><span data-stu-id="ecc32-256">Use `skipRemainingRules: true` whenever possible because matching rules is computationally expensive and increases app response time.</span></span> <span data-ttu-id="ecc32-257">Führen Sie folgende Schritte aus, um die schnellsten App-Antwortzeiten zu erreichen:</span><span class="sxs-lookup"><span data-stu-id="ecc32-257">For the fastest app response:</span></span>
>
> * <span data-ttu-id="ecc32-258">Sortieren Sie Neuschreibungsregeln von der am häufigsten abgeglichenen Regel zu der am seltensten abgeglichenen Regel.</span><span class="sxs-lookup"><span data-stu-id="ecc32-258">Order rewrite rules from the most frequently matched rule to the least frequently matched rule.</span></span>
> * <span data-ttu-id="ecc32-259">Überspringen Sie die Verarbeitung der übrigen Regeln, wenn es zu einer Übereinstimmung kommt und keine zusätzlichen Regelverarbeitungen erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="ecc32-259">Skip the processing of the remaining rules when a match occurs and no additional rule processing is required.</span></span>

### <a name="apache-mod_rewrite"></a><span data-ttu-id="ecc32-260">Apache: „mod_rewrite“</span><span class="sxs-lookup"><span data-stu-id="ecc32-260">Apache mod_rewrite</span></span>

<span data-ttu-id="ecc32-261">Wenden Sie die Apache-Regeln „mod_rewrite“ mit <xref:Microsoft.AspNetCore.Rewrite.ApacheModRewriteOptionsExtensions.AddApacheModRewrite*> an.</span><span class="sxs-lookup"><span data-stu-id="ecc32-261">Apply Apache mod_rewrite rules with <xref:Microsoft.AspNetCore.Rewrite.ApacheModRewriteOptionsExtensions.AddApacheModRewrite*>.</span></span> <span data-ttu-id="ecc32-262">Vergewissern Sie sich, dass die Regeldatei mit der App bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-262">Make sure that the rules file is deployed with the app.</span></span> <span data-ttu-id="ecc32-263">Weitere Informationen zu diesen Regeln finden Sie unter [Apache: „mod_rewrite“](https://httpd.apache.org/docs/2.4/rewrite/).</span><span class="sxs-lookup"><span data-stu-id="ecc32-263">For more information and examples of mod_rewrite rules, see [Apache mod_rewrite](https://httpd.apache.org/docs/2.4/rewrite/).</span></span>

<span data-ttu-id="ecc32-264">Zum Lesen der Regeldatei *ApacheModRewrite.txt* wird <xref:System.IO.StreamReader> verwendet:</span><span class="sxs-lookup"><span data-stu-id="ecc32-264">A <xref:System.IO.StreamReader> is used to read the rules from the *ApacheModRewrite.txt* rules file:</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=3-4,12)]

<span data-ttu-id="ecc32-265">Die Beispiel-App leitet Anforderungen von `/apache-mod-rules-redirect/(.\*)` auf `/redirected?id=$1` um.</span><span class="sxs-lookup"><span data-stu-id="ecc32-265">The sample app redirects requests from `/apache-mod-rules-redirect/(.\*)` to `/redirected?id=$1`.</span></span> <span data-ttu-id="ecc32-266">Der Antwortstatuscode lautet *302 – Gefunden*.</span><span class="sxs-lookup"><span data-stu-id="ecc32-266">The response status code is *302 - Found*.</span></span>

[!code[](url-rewriting/samples/3.x/SampleApp/ApacheModRewrite.txt)]

<span data-ttu-id="ecc32-267">Ursprüngliche Anforderung: `/apache-mod-rules-redirect/1234`</span><span class="sxs-lookup"><span data-stu-id="ecc32-267">Original Request: `/apache-mod-rules-redirect/1234`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten nachverfolgen](url-rewriting/_static/add_apache_mod_redirect.png)

<span data-ttu-id="ecc32-269">Die Middleware unterstützt die folgenden Servervariablen für die Apache „mod_rewrite“:</span><span class="sxs-lookup"><span data-stu-id="ecc32-269">The middleware supports the following Apache mod_rewrite server variables:</span></span>

* <span data-ttu-id="ecc32-270">CONN_REMOTE_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-270">CONN_REMOTE_ADDR</span></span>
* <span data-ttu-id="ecc32-271">HTTP_ACCEPT</span><span class="sxs-lookup"><span data-stu-id="ecc32-271">HTTP_ACCEPT</span></span>
* <span data-ttu-id="ecc32-272">HTTP_CONNECTION</span><span class="sxs-lookup"><span data-stu-id="ecc32-272">HTTP_CONNECTION</span></span>
* <span data-ttu-id="ecc32-273">HTTP_COOKIE</span><span class="sxs-lookup"><span data-stu-id="ecc32-273">HTTP_COOKIE</span></span>
* <span data-ttu-id="ecc32-274">HTTP_FORWARDED</span><span class="sxs-lookup"><span data-stu-id="ecc32-274">HTTP_FORWARDED</span></span>
* <span data-ttu-id="ecc32-275">HTTP_HOST</span><span class="sxs-lookup"><span data-stu-id="ecc32-275">HTTP_HOST</span></span>
* <span data-ttu-id="ecc32-276">HTTP_REFERER</span><span class="sxs-lookup"><span data-stu-id="ecc32-276">HTTP_REFERER</span></span>
* <span data-ttu-id="ecc32-277">HTTP_USER_AGENT</span><span class="sxs-lookup"><span data-stu-id="ecc32-277">HTTP_USER_AGENT</span></span>
* <span data-ttu-id="ecc32-278">HTTPS</span><span class="sxs-lookup"><span data-stu-id="ecc32-278">HTTPS</span></span>
* <span data-ttu-id="ecc32-279">IPV6</span><span class="sxs-lookup"><span data-stu-id="ecc32-279">IPV6</span></span>
* <span data-ttu-id="ecc32-280">QUERY_STRING</span><span class="sxs-lookup"><span data-stu-id="ecc32-280">QUERY_STRING</span></span>
* <span data-ttu-id="ecc32-281">REMOTE_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-281">REMOTE_ADDR</span></span>
* <span data-ttu-id="ecc32-282">REMOTE_PORT</span><span class="sxs-lookup"><span data-stu-id="ecc32-282">REMOTE_PORT</span></span>
* <span data-ttu-id="ecc32-283">REQUEST_FILENAME</span><span class="sxs-lookup"><span data-stu-id="ecc32-283">REQUEST_FILENAME</span></span>
* <span data-ttu-id="ecc32-284">REQUEST_METHOD</span><span class="sxs-lookup"><span data-stu-id="ecc32-284">REQUEST_METHOD</span></span>
* <span data-ttu-id="ecc32-285">REQUEST_SCHEME</span><span class="sxs-lookup"><span data-stu-id="ecc32-285">REQUEST_SCHEME</span></span>
* <span data-ttu-id="ecc32-286">REQUEST_URI</span><span class="sxs-lookup"><span data-stu-id="ecc32-286">REQUEST_URI</span></span>
* <span data-ttu-id="ecc32-287">SCRIPT_FILENAME</span><span class="sxs-lookup"><span data-stu-id="ecc32-287">SCRIPT_FILENAME</span></span>
* <span data-ttu-id="ecc32-288">SERVER_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-288">SERVER_ADDR</span></span>
* <span data-ttu-id="ecc32-289">SERVER_PORT</span><span class="sxs-lookup"><span data-stu-id="ecc32-289">SERVER_PORT</span></span>
* <span data-ttu-id="ecc32-290">SERVER_PROTOCOL</span><span class="sxs-lookup"><span data-stu-id="ecc32-290">SERVER_PROTOCOL</span></span>
* <span data-ttu-id="ecc32-291">TIME</span><span class="sxs-lookup"><span data-stu-id="ecc32-291">TIME</span></span>
* <span data-ttu-id="ecc32-292">TIME_DAY</span><span class="sxs-lookup"><span data-stu-id="ecc32-292">TIME_DAY</span></span>
* <span data-ttu-id="ecc32-293">TIME_HOUR</span><span class="sxs-lookup"><span data-stu-id="ecc32-293">TIME_HOUR</span></span>
* <span data-ttu-id="ecc32-294">TIME_MIN</span><span class="sxs-lookup"><span data-stu-id="ecc32-294">TIME_MIN</span></span>
* <span data-ttu-id="ecc32-295">TIME_MON</span><span class="sxs-lookup"><span data-stu-id="ecc32-295">TIME_MON</span></span>
* <span data-ttu-id="ecc32-296">TIME_SEC</span><span class="sxs-lookup"><span data-stu-id="ecc32-296">TIME_SEC</span></span>
* <span data-ttu-id="ecc32-297">TIME_WDAY</span><span class="sxs-lookup"><span data-stu-id="ecc32-297">TIME_WDAY</span></span>
* <span data-ttu-id="ecc32-298">TIME_YEAR</span><span class="sxs-lookup"><span data-stu-id="ecc32-298">TIME_YEAR</span></span>

### <a name="iis-url-rewrite-module-rules"></a><span data-ttu-id="ecc32-299">Regeln zum IIS-Umschreibungsmodul</span><span class="sxs-lookup"><span data-stu-id="ecc32-299">IIS URL Rewrite Module rules</span></span>

<span data-ttu-id="ecc32-300">Um denselben Regelsatz zu verwenden, der für das IIS-Moduls für URL-Neuschreibung gilt, verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.IISUrlRewriteOptionsExtensions.AddIISUrlRewrite*>.</span><span class="sxs-lookup"><span data-stu-id="ecc32-300">To use the same rule set that applies to the IIS URL Rewrite Module, use <xref:Microsoft.AspNetCore.Rewrite.IISUrlRewriteOptionsExtensions.AddIISUrlRewrite*>.</span></span> <span data-ttu-id="ecc32-301">Vergewissern Sie sich, dass die Regeldatei mit der App bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-301">Make sure that the rules file is deployed with the app.</span></span> <span data-ttu-id="ecc32-302">Geben Sie der Middleware nicht die Anweisung, die *web.config* -Datei der App zu verwenden, wenn sie auf der Windows Server-IIS ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-302">Don't direct the middleware to use the app's *web.config* file when running on Windows Server IIS.</span></span> <span data-ttu-id="ecc32-303">Bei IIS sollten diese Regeln außerhalb der *web.config* -Datei der App gespeichert werden, um Konflikte mit dem IIS-Neuschreibungsmodul zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-303">With IIS, these rules should be stored outside of the app's *web.config* file in order to avoid conflicts with the IIS Rewrite module.</span></span> <span data-ttu-id="ecc32-304">Weitere Informationen und Beispiele zu den Regeln zum IIS-Umschreibungsmodul finden Sie unter [Using Url Rewrite Module 2.0 (Verwenden des URL-Umschreibungsmoduls 2.0)](/iis/extensions/url-rewrite-module/using-url-rewrite-module-20) und [URL Rewrite Module Configuration Reference (Konfigurationsreferenz des URL-Umschreibungsmoduls)](/iis/extensions/url-rewrite-module/url-rewrite-module-configuration-reference).</span><span class="sxs-lookup"><span data-stu-id="ecc32-304">For more information and examples of IIS URL Rewrite Module rules, see [Using Url Rewrite Module 2.0](/iis/extensions/url-rewrite-module/using-url-rewrite-module-20) and [URL Rewrite Module Configuration Reference](/iis/extensions/url-rewrite-module/url-rewrite-module-configuration-reference).</span></span>

<span data-ttu-id="ecc32-305">Zum Lesen der Regeldatei *IISUrlRewrite.xml* wird <xref:System.IO.StreamReader> verwendet:</span><span class="sxs-lookup"><span data-stu-id="ecc32-305">A <xref:System.IO.StreamReader> is used to read the rules from the *IISUrlRewrite.xml* rules file:</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=5-6,13)]

<span data-ttu-id="ecc32-306">Die Beispiel-App schreibt Anforderungen von `/iis-rules-rewrite/(.*)` in `/rewritten?id=$1` um.</span><span class="sxs-lookup"><span data-stu-id="ecc32-306">The sample app rewrites requests from `/iis-rules-rewrite/(.*)` to `/rewritten?id=$1`.</span></span> <span data-ttu-id="ecc32-307">Die Antwort wird an den Client mit dem Statuscode *200 – OK* gesendet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-307">The response is sent to the client with a *200 - OK* status code.</span></span>

[!code-xml[](url-rewriting/samples/3.x/SampleApp/IISUrlRewrite.xml)]

<span data-ttu-id="ecc32-308">Ursprüngliche Anforderung: `/iis-rules-rewrite/1234`</span><span class="sxs-lookup"><span data-stu-id="ecc32-308">Original Request: `/iis-rules-rewrite/1234`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderung und Antwort nachverfolgen](url-rewriting/_static/add_iis_url_rewrite.png)

<span data-ttu-id="ecc32-310">Wenn Sie über ein aktives IIS-Umschreibungsmodul verfügen, für das die Regeln auf Serverebene konfiguriert sind, die negative Auswirkungen auf Ihre App hätten, können Sie das IIS-Umschreibungsmodul für die App deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="ecc32-310">If you have an active IIS Rewrite Module with server-level rules configured that would impact your app in undesirable ways, you can disable the IIS Rewrite Module for an app.</span></span> <span data-ttu-id="ecc32-311">Weitere Informationen finden Sie unter [Disabling IIS modules (Deaktivieren von IIS-Modulen)](xref:host-and-deploy/iis/modules#disabling-iis-modules).</span><span class="sxs-lookup"><span data-stu-id="ecc32-311">For more information, see [Disabling IIS modules](xref:host-and-deploy/iis/modules#disabling-iis-modules).</span></span>

#### <a name="unsupported-features"></a><span data-ttu-id="ecc32-312">Nicht unterstützte Features</span><span class="sxs-lookup"><span data-stu-id="ecc32-312">Unsupported features</span></span>

<span data-ttu-id="ecc32-313">Die im Lieferumfang von ASP.NET Core 2.x enthaltene Middleware unterstützt die folgenden Features des IIS-URL-Umschreibungsmoduls nicht:</span><span class="sxs-lookup"><span data-stu-id="ecc32-313">The middleware released with ASP.NET Core 2.x doesn't support the following IIS URL Rewrite Module features:</span></span>

* <span data-ttu-id="ecc32-314">Ausgehende Regeln</span><span class="sxs-lookup"><span data-stu-id="ecc32-314">Outbound Rules</span></span>
* <span data-ttu-id="ecc32-315">Benutzerdefinierte Servervariablen</span><span class="sxs-lookup"><span data-stu-id="ecc32-315">Custom Server Variables</span></span>
* <span data-ttu-id="ecc32-316">Platzhalter</span><span class="sxs-lookup"><span data-stu-id="ecc32-316">Wildcards</span></span>
* <span data-ttu-id="ecc32-317">LogRewrittenUrl</span><span class="sxs-lookup"><span data-stu-id="ecc32-317">LogRewrittenUrl</span></span>

#### <a name="supported-server-variables"></a><span data-ttu-id="ecc32-318">Unterstützte Servervariablen</span><span class="sxs-lookup"><span data-stu-id="ecc32-318">Supported server variables</span></span>

<span data-ttu-id="ecc32-319">Die Middleware unterstützt die folgenden Servervariablen für das IIS-URL-Umschreibungsmodul:</span><span class="sxs-lookup"><span data-stu-id="ecc32-319">The middleware supports the following IIS URL Rewrite Module server variables:</span></span>

* <span data-ttu-id="ecc32-320">CONTENT_LENGTH</span><span class="sxs-lookup"><span data-stu-id="ecc32-320">CONTENT_LENGTH</span></span>
* <span data-ttu-id="ecc32-321">CONTENT_TYPE</span><span class="sxs-lookup"><span data-stu-id="ecc32-321">CONTENT_TYPE</span></span>
* <span data-ttu-id="ecc32-322">HTTP_ACCEPT</span><span class="sxs-lookup"><span data-stu-id="ecc32-322">HTTP_ACCEPT</span></span>
* <span data-ttu-id="ecc32-323">HTTP_CONNECTION</span><span class="sxs-lookup"><span data-stu-id="ecc32-323">HTTP_CONNECTION</span></span>
* <span data-ttu-id="ecc32-324">HTTP_COOKIE</span><span class="sxs-lookup"><span data-stu-id="ecc32-324">HTTP_COOKIE</span></span>
* <span data-ttu-id="ecc32-325">HTTP_HOST</span><span class="sxs-lookup"><span data-stu-id="ecc32-325">HTTP_HOST</span></span>
* <span data-ttu-id="ecc32-326">HTTP_REFERER</span><span class="sxs-lookup"><span data-stu-id="ecc32-326">HTTP_REFERER</span></span>
* <span data-ttu-id="ecc32-327">HTTP_URL</span><span class="sxs-lookup"><span data-stu-id="ecc32-327">HTTP_URL</span></span>
* <span data-ttu-id="ecc32-328">HTTP_USER_AGENT</span><span class="sxs-lookup"><span data-stu-id="ecc32-328">HTTP_USER_AGENT</span></span>
* <span data-ttu-id="ecc32-329">HTTPS</span><span class="sxs-lookup"><span data-stu-id="ecc32-329">HTTPS</span></span>
* <span data-ttu-id="ecc32-330">LOCAL_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-330">LOCAL_ADDR</span></span>
* <span data-ttu-id="ecc32-331">QUERY_STRING</span><span class="sxs-lookup"><span data-stu-id="ecc32-331">QUERY_STRING</span></span>
* <span data-ttu-id="ecc32-332">REMOTE_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-332">REMOTE_ADDR</span></span>
* <span data-ttu-id="ecc32-333">REMOTE_PORT</span><span class="sxs-lookup"><span data-stu-id="ecc32-333">REMOTE_PORT</span></span>
* <span data-ttu-id="ecc32-334">REQUEST_FILENAME</span><span class="sxs-lookup"><span data-stu-id="ecc32-334">REQUEST_FILENAME</span></span>
* <span data-ttu-id="ecc32-335">REQUEST_URI</span><span class="sxs-lookup"><span data-stu-id="ecc32-335">REQUEST_URI</span></span>

> [!NOTE]
> <span data-ttu-id="ecc32-336">Sie können <xref:Microsoft.Extensions.FileProviders.IFileProvider> auch über <xref:Microsoft.Extensions.FileProviders.PhysicalFileProvider> abrufen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-336">You can also obtain an <xref:Microsoft.Extensions.FileProviders.IFileProvider> via a <xref:Microsoft.Extensions.FileProviders.PhysicalFileProvider>.</span></span> <span data-ttu-id="ecc32-337">Über diesen Ansatz können Sie flexibler einen Speicherort für die Dateien der Umschreibungsregeln auswählen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-337">This approach may provide greater flexibility for the location of your rewrite rules files.</span></span> <span data-ttu-id="ecc32-338">Vergewissern Sie sich, dass die Dateien zu den Umschreibungsregeln auf dem Server unter dem von Ihnen angegebenen Pfad bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-338">Make sure that your rewrite rules files are deployed to the server at the path you provide.</span></span>
>
> ```csharp
> PhysicalFileProvider fileProvider = new PhysicalFileProvider(Directory.GetCurrentDirectory());
> ```

### <a name="method-based-rule"></a><span data-ttu-id="ecc32-339">Methodenbasierte Regel</span><span class="sxs-lookup"><span data-stu-id="ecc32-339">Method-based rule</span></span>

<span data-ttu-id="ecc32-340">Verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.Add*>, um Ihre eigene Regellogik in einer Methode zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="ecc32-340">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.Add*> to implement your own rule logic in a method.</span></span> <span data-ttu-id="ecc32-341">`Add` macht <xref:Microsoft.AspNetCore.Rewrite.RewriteContext> verfügbar, wodurch die Verwendung von <xref:Microsoft.AspNetCore.Http.HttpContext> in Ihrer Methode ermöglicht wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-341">`Add` exposes the <xref:Microsoft.AspNetCore.Rewrite.RewriteContext>, which makes available the <xref:Microsoft.AspNetCore.Http.HttpContext> for use in your method.</span></span> <span data-ttu-id="ecc32-342">[RewriteContext.Result](xref:Microsoft.AspNetCore.Rewrite.RewriteContext.Result*) bestimmt, wie die zusätzliche Pipelineverarbeitung erfolgt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-342">The [RewriteContext.Result](xref:Microsoft.AspNetCore.Rewrite.RewriteContext.Result*) determines how additional pipeline processing is handled.</span></span> <span data-ttu-id="ecc32-343">Legen Sie den Wert auf eines der <xref:Microsoft.AspNetCore.Rewrite.RuleResult>-Felder fest, die in der folgenden Tabelle beschrieben sind:</span><span class="sxs-lookup"><span data-stu-id="ecc32-343">Set the value to one of the <xref:Microsoft.AspNetCore.Rewrite.RuleResult> fields described in the following table.</span></span>

| <span data-ttu-id="ecc32-344">Umschreiben von Kontext – Ergebnisse</span><span class="sxs-lookup"><span data-stu-id="ecc32-344">Rewrite context result</span></span>               | <span data-ttu-id="ecc32-345">Aktion</span><span class="sxs-lookup"><span data-stu-id="ecc32-345">Action</span></span>                                                           |
| ------------------------------------ | ---------------------------------------------------------------- |
| <span data-ttu-id="ecc32-346">`RuleResult.ContinueRules` (Standardwert)</span><span class="sxs-lookup"><span data-stu-id="ecc32-346">`RuleResult.ContinueRules` (default)</span></span> | <span data-ttu-id="ecc32-347">Regeln weiter anwenden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-347">Continue applying rules.</span></span>                                         |
| `RuleResult.EndResponse`             | <span data-ttu-id="ecc32-348">Regeln nicht mehr anwenden und Antwort senden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-348">Stop applying rules and send the response.</span></span>                       |
| `RuleResult.SkipRemainingRules`      | <span data-ttu-id="ecc32-349">Regeln nicht mehr anwenden, und den Kontext an die nächste Middleware senden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-349">Stop applying rules and send the context to the next middleware.</span></span> |

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=14)]

<span data-ttu-id="ecc32-350">In der Beispiel-App wird eine Methode dargestellt, die Anforderungen für Pfade weiterleitet, die auf *.xml* enden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-350">The sample app demonstrates a method that redirects requests for paths that end with *.xml*.</span></span> <span data-ttu-id="ecc32-351">Wenn eine Anforderung für `/file.xml` erfolgt, wird sie zu `/xmlfiles/file.xml` umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-351">If a request is made for `/file.xml`, the request is redirected to `/xmlfiles/file.xml`.</span></span> <span data-ttu-id="ecc32-352">Der Statuscode wird auf *301 – Permanent verschoben* festgelegt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-352">The status code is set to *301 - Moved Permanently*.</span></span> <span data-ttu-id="ecc32-353">Wenn vom Browser eine neue Anforderung für */xmlfiles/file.xml* gesendet wird, wird dem Client die Datei von Middleware für statische Dateien aus dem Ordner *wwwroot/xmlfiles* bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-353">When the browser makes a new request for */xmlfiles/file.xml* , Static File Middleware serves the file to the client from the *wwwroot/xmlfiles* folder.</span></span> <span data-ttu-id="ecc32-354">Legen Sie für eine Umleitung den Statuscode der Antwort explizit fest.</span><span class="sxs-lookup"><span data-stu-id="ecc32-354">For a redirect, explicitly set the status code of the response.</span></span> <span data-ttu-id="ecc32-355">Andernfalls wird ein Statuscode *200 – OK* zurückgegeben, und die Umleitung findet nicht auf dem Client statt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-355">Otherwise, a *200 - OK* status code is returned, and the redirect doesn't occur on the client.</span></span>

<span data-ttu-id="ecc32-356">*RewriteRules.cs* :</span><span class="sxs-lookup"><span data-stu-id="ecc32-356">*RewriteRules.cs* :</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/RewriteRules.cs?name=snippet_RedirectXmlFileRequests&highlight=14-18)]

<span data-ttu-id="ecc32-357">Bei diesem Ansatz können auch Anforderungen erneut generiert werden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-357">This approach can also rewrite requests.</span></span> <span data-ttu-id="ecc32-358">In der Beispiel-App wird demonstriert, wie der Pfad für eine beliebige Textdateianforderung umgeschrieben wird, um die Textdatei *file.txt* aus dem Ordner *wwwroot* bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-358">The sample app demonstrates rewriting the path for any text file request to serve the *file.txt* text file from the *wwwroot* folder.</span></span> <span data-ttu-id="ecc32-359">Middleware für statische Dateien stellt die Datei bereit, die auf dem aktualisierten Anforderungspfad basiert:</span><span class="sxs-lookup"><span data-stu-id="ecc32-359">Static File Middleware serves the file based on the updated request path:</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=15,22)]

<span data-ttu-id="ecc32-360">*RewriteRules.cs* :</span><span class="sxs-lookup"><span data-stu-id="ecc32-360">*RewriteRules.cs* :</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/RewriteRules.cs?name=snippet_RewriteTextFileRequests&highlight=7-8)]

### <a name="irule-based-rule"></a><span data-ttu-id="ecc32-361">IRule-basierte Regel</span><span class="sxs-lookup"><span data-stu-id="ecc32-361">IRule-based rule</span></span>

<span data-ttu-id="ecc32-362">Um Regellogik in einer Klasse zu nutzen, die die <xref:Microsoft.AspNetCore.Rewrite.IRule>-Schnittstelle implementiert, verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.Add*>.</span><span class="sxs-lookup"><span data-stu-id="ecc32-362">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.Add*> to use rule logic in a class that implements the <xref:Microsoft.AspNetCore.Rewrite.IRule> interface.</span></span> <span data-ttu-id="ecc32-363">Wenn Sie `IRule` verwenden, können Sie flexibler entscheiden, ob Sie eine methodenbasierte Regel verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-363">`IRule` provides greater flexibility over using the method-based rule approach.</span></span> <span data-ttu-id="ecc32-364">Ihre Implementierungsklasse kann einen Konstruktor enthalten, wodurch Sie Parameter für die <xref:Microsoft.AspNetCore.Rewrite.IRule.ApplyRule*>-Methode übergeben können.</span><span class="sxs-lookup"><span data-stu-id="ecc32-364">Your implementation class may include a constructor that allows you can pass in parameters for the <xref:Microsoft.AspNetCore.Rewrite.IRule.ApplyRule*> method.</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=16-17)]

<span data-ttu-id="ecc32-365">Die Werte für die Parameter in der Beispiel-App für `extension` und `newPath` werden auf verschiedene Bedingungen geprüft.</span><span class="sxs-lookup"><span data-stu-id="ecc32-365">The values of the parameters in the sample app for the `extension` and the `newPath` are checked to meet several conditions.</span></span> <span data-ttu-id="ecc32-366">`extension` muss einen Wert enthalten, der *.png* , *.jpg* oder *.gif* entspricht.</span><span class="sxs-lookup"><span data-stu-id="ecc32-366">The `extension` must contain a value, and the value must be *.png* , *.jpg* , or *.gif*.</span></span> <span data-ttu-id="ecc32-367">Wenn `newPath` nicht gültig ist, wird <xref:System.ArgumentException> nicht ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="ecc32-367">If the `newPath` isn't valid, an <xref:System.ArgumentException> is thrown.</span></span> <span data-ttu-id="ecc32-368">Wenn eine Anforderung für *image.png* erfolgt, wird sie zu `/png-images/image.png` umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-368">If a request is made for *image.png* , the request is redirected to `/png-images/image.png`.</span></span> <span data-ttu-id="ecc32-369">Wenn eine Anforderung für *image.jpg* erfolgt, wird die zu `/jpg-images/image.jpg` umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-369">If a request is made for *image.jpg* , the request is redirected to `/jpg-images/image.jpg`.</span></span> <span data-ttu-id="ecc32-370">Der Statuscode ist auf *301 – Permanent verschoben* festgelegt, und `context.Result` erhält die Anweisung, Verarbeitungsregeln nicht mehr anzuwenden und die Antwort zu senden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-370">The status code is set to *301 - Moved Permanently* , and the `context.Result` is set to stop processing rules and send the response.</span></span>

[!code-csharp[](url-rewriting/samples/3.x/SampleApp/RewriteRules.cs?name=snippet_RedirectImageRequests)]

<span data-ttu-id="ecc32-371">Ursprüngliche Anforderung: `/image.png`</span><span class="sxs-lookup"><span data-stu-id="ecc32-371">Original Request: `/image.png`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten der image.png-Datei nachverfolgen](url-rewriting/_static/add_redirect_png_requests.png)

<span data-ttu-id="ecc32-373">Ursprüngliche Anforderung: `/image.jpg`</span><span class="sxs-lookup"><span data-stu-id="ecc32-373">Original Request: `/image.jpg`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten der image.jpg-Datei nachverfolgen](url-rewriting/_static/add_redirect_jpg_requests.png)

## <a name="regex-examples"></a><span data-ttu-id="ecc32-375">RegEx-Beispiele</span><span class="sxs-lookup"><span data-stu-id="ecc32-375">Regex examples</span></span>

| <span data-ttu-id="ecc32-376">Ziel</span><span class="sxs-lookup"><span data-stu-id="ecc32-376">Goal</span></span> | <span data-ttu-id="ecc32-377">RegEx-Zeichenfolge und</span><span class="sxs-lookup"><span data-stu-id="ecc32-377">Regex String &</span></span><br><span data-ttu-id="ecc32-378">übereinstimmendes Beispiel</span><span class="sxs-lookup"><span data-stu-id="ecc32-378">Match Example</span></span> | <span data-ttu-id="ecc32-379">Ersetzungszeichenfolge und</span><span class="sxs-lookup"><span data-stu-id="ecc32-379">Replacement String &</span></span><br><span data-ttu-id="ecc32-380">Ausgabebeispiel</span><span class="sxs-lookup"><span data-stu-id="ecc32-380">Output Example</span></span> |
| ---- | ------------------------------- | -------------------------------------- |
| <span data-ttu-id="ecc32-381">Umschreiben des Pfads in die Abfragezeichenfolge</span><span class="sxs-lookup"><span data-stu-id="ecc32-381">Rewrite path into querystring</span></span> | `^path/(.*)/(.*)`<br>`/path/abc/123` | `path?var1=$1&var2=$2`<br>`/path?var1=abc&var2=123` |
| <span data-ttu-id="ecc32-382">Entfernen des nachgestellten Schrägstrichs</span><span class="sxs-lookup"><span data-stu-id="ecc32-382">Strip trailing slash</span></span> | `(.*)/$`<br>`/path/` | `$1`<br>`/path` |
| <span data-ttu-id="ecc32-383">Erzwingen des nachgestellten Schrägstrichs</span><span class="sxs-lookup"><span data-stu-id="ecc32-383">Enforce trailing slash</span></span> | `(.*[^/])$`<br>`/path` | `$1/`<br>`/path/` |
| <span data-ttu-id="ecc32-384">Vermeiden des Umschreibens von bestimmten Anforderungen</span><span class="sxs-lookup"><span data-stu-id="ecc32-384">Avoid rewriting specific requests</span></span> | <span data-ttu-id="ecc32-385">`^(.*)(?<!\.axd)$` oder `^(?!.*\.axd$)(.*)$`</span><span class="sxs-lookup"><span data-stu-id="ecc32-385">`^(.*)(?<!\.axd)$` or `^(?!.*\.axd$)(.*)$`</span></span><br><span data-ttu-id="ecc32-386">Ja: `/resource.htm`</span><span class="sxs-lookup"><span data-stu-id="ecc32-386">Yes: `/resource.htm`</span></span><br><span data-ttu-id="ecc32-387">Nein: `/resource.axd`</span><span class="sxs-lookup"><span data-stu-id="ecc32-387">No: `/resource.axd`</span></span> | `rewritten/$1`<br>`/rewritten/resource.htm`<br>`/resource.axd` |
| <span data-ttu-id="ecc32-388">Ändern der Anordnung von URL-Segmenten</span><span class="sxs-lookup"><span data-stu-id="ecc32-388">Rearrange URL segments</span></span> | `path/(.*)/(.*)/(.*)`<br>`path/1/2/3` | `path/$3/$2/$1`<br>`path/3/2/1` |
| <span data-ttu-id="ecc32-389">Ersetzen von URL-Segmenten</span><span class="sxs-lookup"><span data-stu-id="ecc32-389">Replace a URL segment</span></span> | `^(.*)/segment2/(.*)`<br>`/segment1/segment2/segment3` | `$1/replaced/$2`<br>`/segment1/replaced/segment3` |

::: moniker-end

::: moniker range="< aspnetcore-3.0"

<span data-ttu-id="ecc32-390">In diesem Artikel wird das Umschreiben von URLs beschrieben. Außerdem erhalten Sie Anweisungen zur Verwendung der URL-umschreibenden Middleware in ASP.NET Core-Apps.</span><span class="sxs-lookup"><span data-stu-id="ecc32-390">This document introduces URL rewriting with instructions on how to use URL Rewriting Middleware in ASP.NET Core apps.</span></span>

<span data-ttu-id="ecc32-391">Bei der URL-Umschreibung werden die Anforderungs-URLs verändert, die auf mindesten einer vordefinierten Regel basieren.</span><span class="sxs-lookup"><span data-stu-id="ecc32-391">URL rewriting is the act of modifying request URLs based on one or more predefined rules.</span></span> <span data-ttu-id="ecc32-392">Es wird eine Abstraktion zwischen den Speicherorten und Adressen von Ressourcen erstellt, sodass diese nicht eng miteinander verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="ecc32-392">URL rewriting creates an abstraction between resource locations and their addresses so that the locations and addresses aren't tightly linked.</span></span> <span data-ttu-id="ecc32-393">Die URL-Neuschreibung ist hilfreich in verschiedenen Szenarios wie:</span><span class="sxs-lookup"><span data-stu-id="ecc32-393">URL rewriting is valuable in several scenarios to:</span></span>

* <span data-ttu-id="ecc32-394">Kurzzeitiges oder permanentes Verschieben oder Ersetzen von Serverressourcen, sowie Erhalten von stabilen Locators für diese Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-394">Move or replace server resources temporarily or permanently and maintain stable locators for those resources.</span></span>
* <span data-ttu-id="ecc32-395">Verteilen der Verarbeitung von Anforderungen auf verschiedene Apps oder Bereiche einer App.</span><span class="sxs-lookup"><span data-stu-id="ecc32-395">Split request processing across different apps or across areas of one app.</span></span>
* <span data-ttu-id="ecc32-396">Entfernen, Hinzufügen oder Umorganisieren von URL-Segmenten bei eingehenden Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-396">Remove, add, or reorganize URL segments on incoming requests.</span></span>
* <span data-ttu-id="ecc32-397">Optimieren von öffentlichen URLs für die Suchmaschinenoptimierung (Search Engine Optimization, SEO).</span><span class="sxs-lookup"><span data-stu-id="ecc32-397">Optimize public URLs for Search Engine Optimization (SEO).</span></span>
* <span data-ttu-id="ecc32-398">Gestatten der Verwendung von angezeigten öffentlichen URLs, um Besuchern zu helfen, den Inhalt vorherzusagen, der durch die Anforderung einer Ressource zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-398">Permit the use of friendly public URLs to help visitors predict the content returned by requesting a resource.</span></span>
* <span data-ttu-id="ecc32-399">Umleiten von unsicheren Anforderungen auf sichere Endpunkte.</span><span class="sxs-lookup"><span data-stu-id="ecc32-399">Redirect insecure requests to secure endpoints.</span></span>
* <span data-ttu-id="ecc32-400">Verhindern von Hotlinks zu externen Websites, die eine gehostete statische Ressource auf einer anderen Website verwenden, bei der die Ressource zu ihrem eigenen Inhalt verlinkt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-400">Prevent hotlinking, where an external site uses a hosted static asset on another site by linking the asset into its own content.</span></span>

> [!NOTE]
> <span data-ttu-id="ecc32-401">Wenn Sie URLs umschreiben, kann das negative Auswirkungen auf die Leistung einer App haben.</span><span class="sxs-lookup"><span data-stu-id="ecc32-401">URL rewriting can reduce the performance of an app.</span></span> <span data-ttu-id="ecc32-402">Wenn möglich, sollten Sie so wenig Regeln wie möglich erstellen und darauf achten, dass diese nicht zu kompliziert sind.</span><span class="sxs-lookup"><span data-stu-id="ecc32-402">Where feasible, limit the number and complexity of rules.</span></span>

<span data-ttu-id="ecc32-403">[Anzeigen oder Herunterladen von Beispielcode](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/url-rewriting/samples/) ([Vorgehensweise zum Herunterladen](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="ecc32-403">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/url-rewriting/samples/) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="url-redirect-and-url-rewrite"></a><span data-ttu-id="ecc32-404">Umleiten und Umschreiben von URLs</span><span class="sxs-lookup"><span data-stu-id="ecc32-404">URL redirect and URL rewrite</span></span>

<span data-ttu-id="ecc32-405">Der Unterschied zwischen dem *Umleiten* und *Neu schreiben* von URLs ist zwar gering, allerdings haben die beiden Verfahren sehr unterschiedliche Auswirkungen auf die Bereitstellung von Ressourcen für Clients.</span><span class="sxs-lookup"><span data-stu-id="ecc32-405">The difference in wording between *URL redirect* and *URL rewrite* is subtle but has important implications for providing resources to clients.</span></span> <span data-ttu-id="ecc32-406">Die URL-umschreibenden Middleware von ASP.NET Core kann für beide Vorgänge verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-406">ASP.NET Core's URL Rewriting Middleware is capable of meeting the need for both.</span></span>

<span data-ttu-id="ecc32-407">Bei der *Umleitung von URLs* findet ein clientseitiger Vorgang statt, bei dem der Client angewiesen wird, auf eine Ressource unter einer anderen Adresse zuzugreifen, als die, die der Client ursprünglich angefordert hat.</span><span class="sxs-lookup"><span data-stu-id="ecc32-407">A *URL redirect* involves a client-side operation, where the client is instructed to access a resource at a different address than the client originally requested.</span></span> <span data-ttu-id="ecc32-408">Dafür ist ein Roundtrip zum Server erforderlich.</span><span class="sxs-lookup"><span data-stu-id="ecc32-408">This requires a round trip to the server.</span></span> <span data-ttu-id="ecc32-409">Die Umleitungs-URL, die an den Client zurückgegeben wird, wird in der Adressleiste des Browsers angezeigt, wenn der Client eine neue Anforderung an die Ressource sendet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-409">The redirect URL returned to the client appears in the browser's address bar when the client makes a new request for the resource.</span></span>

<span data-ttu-id="ecc32-410">Wenn `/resource` auf `/different-resource`*umgeleitet* wird, sendet der Server die Antwort, dass der Client die Ressource unter `/different-resource` abrufen soll. In der Antwort ist außerdem ein Statuscode enthalten, aus dem entnommen werden kann, ob die Umleitung temporär oder permanent ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-410">If `/resource` is *redirected* to `/different-resource`, the server responds that the client should obtain the resource at `/different-resource` with a status code indicating that the redirect is either temporary or permanent.</span></span>

![Ein Web-API-Dienstendpunkt wurde auf dem Server kurzzeitig von Version 1 (v1) auf Version 2 (v2) geändert.](url-rewriting/_static/url_redirect.png)

<span data-ttu-id="ecc32-416">Wenn Anforderungen auf eine andere URL umgeleitet werden, muss angegeben werden, ob die Umleitung temporär oder permanent sein soll. Geben Sie hierzu den Statuscode mit der Antwort an:</span><span class="sxs-lookup"><span data-stu-id="ecc32-416">When redirecting requests to a different URL, indicate whether the redirect is permanent or temporary by specifying the status code with the response:</span></span>

* <span data-ttu-id="ecc32-417">Der Statuscode *301 – Permanent verschoben* wird verwendet, wenn der Ressource eine neue permanente URL zugewiesen wurde, und Sie dem Client die Anweisung geben möchten, dass alle zukünftigen Anforderungen an die Ressource die neue URL verwenden sollen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-417">The *301 - Moved Permanently* status code is used where the resource has a new, permanent URL and you wish to instruct the client that all future requests for the resource should use the new URL.</span></span> <span data-ttu-id="ecc32-418">*Der Client kann die Antwort zwischenspeichern und wiederverwenden, wenn der Statuscode 301 empfangen wird.*</span><span class="sxs-lookup"><span data-stu-id="ecc32-418">*The client may cache and reuse the response when a 301 status code is received.*</span></span>

* <span data-ttu-id="ecc32-419">Der Statuscode *302 – Gefunden* wird verwendet, wenn die Umleitung temporär ist oder sowieso Änderungen vorbehalten sind.</span><span class="sxs-lookup"><span data-stu-id="ecc32-419">The *302 - Found* status code is used where the redirection is temporary or generally subject to change.</span></span> <span data-ttu-id="ecc32-420">Der Statuscode 302 teilt dem Client mit, dass die URL nicht gespeichert und nicht wiederverwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="ecc32-420">The 302 status code indicates to the client not to store the URL and use it in the future.</span></span>

<span data-ttu-id="ecc32-421">Weitere Informationen zu Statuscodes finden Sie unter [RFC 2616: Status Code Definitions](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html).</span><span class="sxs-lookup"><span data-stu-id="ecc32-421">For more information on status codes, see [RFC 2616: Status Code Definitions](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html).</span></span>

<span data-ttu-id="ecc32-422">Bei der *Neuschreibung einer URL* handelt es sich um einen serverseitigen Vorgang, bei dem eine Ressource von einer anderen Ressourcenadresse, als der vom Client angeforderten, bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-422">A *URL rewrite* is a server-side operation that provides a resource from a different resource address than the client requested.</span></span> <span data-ttu-id="ecc32-423">Wenn eine URL neu geschrieben wird, ist kein Roundtrip zum Server erforderlich.</span><span class="sxs-lookup"><span data-stu-id="ecc32-423">Rewriting a URL doesn't require a round trip to the server.</span></span> <span data-ttu-id="ecc32-424">Die neu geschriebene URL wird nicht an den Server zurückgegeben und nicht in der Adressleiste des Browsers angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-424">The rewritten URL isn't returned to the client and doesn't appear in the browser's address bar.</span></span>

<span data-ttu-id="ecc32-425">Wenn `/resource` in `/different-resource`*umgeschrieben* wird, ruft der Server die Ressource *intern* ab und gibt sie zurück an `/different-resource`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-425">If `/resource` is *rewritten* to `/different-resource`, the server *internally* fetches and returns the resource at `/different-resource`.</span></span>

<span data-ttu-id="ecc32-426">Auch wenn der Client die Ressource unter der neu geschriebene URL abrufen kann, erhält er nicht die Information, dass die Ressource unter der umgeschriebenen URL gespeichert ist, wenn er die Anforderung sendet und eine Antwort erhält.</span><span class="sxs-lookup"><span data-stu-id="ecc32-426">Although the client might be able to retrieve the resource at the rewritten URL, the client isn't informed that the resource exists at the rewritten URL when it makes its request and receives the response.</span></span>

![Ein Web-API-Dienstendpunkt wurde auf dem Server von Version 1 (v1) auf Version 2 (v2) geändert.](url-rewriting/_static/url_rewrite.png)

## <a name="url-rewriting-sample-app"></a><span data-ttu-id="ecc32-431">URL-umschreibende Beispiel-App</span><span class="sxs-lookup"><span data-stu-id="ecc32-431">URL rewriting sample app</span></span>

<span data-ttu-id="ecc32-432">Mit der [Beispiel-App](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/url-rewriting/samples/) können Sie die Features der Middleware zur URL-Neuschreibung testen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-432">You can explore the features of the URL Rewriting Middleware with the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/url-rewriting/samples/).</span></span> <span data-ttu-id="ecc32-433">Die App wendet Umleitungs- und Neuschreibungsregeln an und zeigt die umgeleitete oder neu geschriebene URL für verschiedene Szenarios an.</span><span class="sxs-lookup"><span data-stu-id="ecc32-433">The app applies redirect and rewrite rules and shows the redirected or rewritten URL for several scenarios.</span></span>

## <a name="when-to-use-url-rewriting-middleware"></a><span data-ttu-id="ecc32-434">Empfohlene Verwendung der URL-umschreibenden Middleware</span><span class="sxs-lookup"><span data-stu-id="ecc32-434">When to use URL Rewriting Middleware</span></span>

<span data-ttu-id="ecc32-435">Sie können Middleware zur URL-Neuschreibung verwenden, wenn die folgenden Ansätze nicht möglich sind:</span><span class="sxs-lookup"><span data-stu-id="ecc32-435">Use URL Rewriting Middleware when you're unable to use the following approaches:</span></span>

* [<span data-ttu-id="ecc32-436">URL Rewrite module with IIS on Windows Server (URL-Neuschreibungsmodul mit IIS auf Windows-Server)</span><span class="sxs-lookup"><span data-stu-id="ecc32-436">URL Rewrite module with IIS on Windows Server</span></span>](https://www.iis.net/downloads/microsoft/url-rewrite)
* [<span data-ttu-id="ecc32-437">Apache mod_rewrite module on Apache Server (Apache mod_rewrite-Modul auf Apache-Server)</span><span class="sxs-lookup"><span data-stu-id="ecc32-437">Apache mod_rewrite module on Apache Server</span></span>](https://httpd.apache.org/docs/2.4/rewrite/)
* [<span data-ttu-id="ecc32-438">URL rewriting on Nginx (URL-Neuschreibung auf Nginx)</span><span class="sxs-lookup"><span data-stu-id="ecc32-438">URL rewriting on Nginx</span></span>](https://www.nginx.com/blog/creating-nginx-rewrite-rules/)

<span data-ttu-id="ecc32-439">Sie können die Middleware auch verwenden, wenn die App auf dem [HTTP.sys-Server](xref:fundamentals/servers/httpsys) (früher als WebListener bezeichnet) gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-439">Also, use the middleware when the app is hosted on [HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called WebListener).</span></span>

<span data-ttu-id="ecc32-440">Die Hauptgründe für die Verwendung der serverbasierten Technologien zur URL-Neuschreibung in IIS, Apache und Nginx sind:</span><span class="sxs-lookup"><span data-stu-id="ecc32-440">The main reasons to use the server-based URL rewriting technologies in IIS, Apache, and Nginx are:</span></span>

* <span data-ttu-id="ecc32-441">Die Middleware unterstützt nicht alle Features dieser Module.</span><span class="sxs-lookup"><span data-stu-id="ecc32-441">The middleware doesn't support the full features of these modules.</span></span>

  <span data-ttu-id="ecc32-442">Einige Features der Servermodule funktionieren nicht mit ASP.NET Core-Projekten – z.B. die Einschränkungen `IsFile` und `IsDirectory` des IIS-Neuschreibungsmoduls.</span><span class="sxs-lookup"><span data-stu-id="ecc32-442">Some of the features of the server modules don't work with ASP.NET Core projects, such as the `IsFile` and `IsDirectory` constraints of the IIS Rewrite module.</span></span> <span data-ttu-id="ecc32-443">Verwenden Sie in diesem Szenario stattdessen die Middleware.</span><span class="sxs-lookup"><span data-stu-id="ecc32-443">In these scenarios, use the middleware instead.</span></span>
* <span data-ttu-id="ecc32-444">Die Leistung der Middleware stimmt wahrscheinlich nicht mit der Leistung der Module überein.</span><span class="sxs-lookup"><span data-stu-id="ecc32-444">The performance of the middleware probably doesn't match that of the modules.</span></span>

  <span data-ttu-id="ecc32-445">Benchmarking ist der einzige Weg, um sicher festzustellen, welcher Ansatz die Leistung am meisten beeinträchtigt oder ob die nachlassende Leistung nur geringfügig ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-445">Benchmarking is the only way to know for sure which approach degrades performance the most or if degraded performance is negligible.</span></span>

## <a name="package"></a><span data-ttu-id="ecc32-446">Package</span><span class="sxs-lookup"><span data-stu-id="ecc32-446">Package</span></span>

<span data-ttu-id="ecc32-447">Um die Middleware in Ihr Projekt einzuschließen, fügen Sie einen Paketverweis zum [Microsoft.AspNetCore.App-Metapaket](xref:fundamentals/metapackage-app) in der Projektdatei ein, die das [Microsoft.AspNetCore.Rewrite](https://www.nuget.org/packages/Microsoft.AspNetCore.Rewrite)-Paket enthält.</span><span class="sxs-lookup"><span data-stu-id="ecc32-447">To include the middleware in your project, add a package reference to the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the project file, which contains the [Microsoft.AspNetCore.Rewrite](https://www.nuget.org/packages/Microsoft.AspNetCore.Rewrite) package.</span></span>

<span data-ttu-id="ecc32-448">Wenn Sie das `Microsoft.AspNetCore.App`Metapaket nicht verwenden, fügen Sie dem Paket einen Projekthinweis hinzu`Microsoft.AspNetCore.Rewrite`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-448">When not using the `Microsoft.AspNetCore.App` metapackage, add a project reference to the `Microsoft.AspNetCore.Rewrite` package.</span></span>

## <a name="extension-and-options"></a><span data-ttu-id="ecc32-449">Erweiterung und Optionen</span><span class="sxs-lookup"><span data-stu-id="ecc32-449">Extension and options</span></span>

<span data-ttu-id="ecc32-450">Legen Sie URL-Neuschreibungs- und -Umleitungsregeln fest, indem Sie eine Instanz der [RewriteOptions](xref:Microsoft.AspNetCore.Rewrite.RewriteOptions)-Klasse erstellen und Erweiterungsmethoden für jede Neuschreibungsregel hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-450">Establish URL rewrite and redirect rules by creating an instance of the [RewriteOptions](xref:Microsoft.AspNetCore.Rewrite.RewriteOptions) class with extension methods for each of your rewrite rules.</span></span> <span data-ttu-id="ecc32-451">Verketten Sie mehrere Regeln in der Reihenfolge miteinander, in der sie verarbeitet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-451">Chain multiple rules in the order that you would like them processed.</span></span> <span data-ttu-id="ecc32-452">Die `RewriteOptions` werden an die Middleware zur URL-Neuschreibung übergeben, wenn diese mit <xref:Microsoft.AspNetCore.Builder.RewriteBuilderExtensions.UseRewriter*> zu der Anforderungspipeline hinzugefügt wird:</span><span class="sxs-lookup"><span data-stu-id="ecc32-452">The `RewriteOptions` are passed into the URL Rewriting Middleware as it's added to the request pipeline with <xref:Microsoft.AspNetCore.Builder.RewriteBuilderExtensions.UseRewriter*>:</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/Startup.cs?name=snippet1)]

### <a name="redirect-non-www-to-www"></a><span data-ttu-id="ecc32-453">Umleitung einer Nicht-WWW-Anforderung an eine WWW-Anforderung</span><span class="sxs-lookup"><span data-stu-id="ecc32-453">Redirect non-www to www</span></span>

<span data-ttu-id="ecc32-454">Drei Optionen ermöglichen der App, Nicht-`www`-Anforderungen an `www` umzuleiten:</span><span class="sxs-lookup"><span data-stu-id="ecc32-454">Three options permit the app to redirect non-`www` requests to `www`:</span></span>

* <span data-ttu-id="ecc32-455"><xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToWwwPermanent*>: Die Anforderung wird dauerhaft an die Unterdomäne `www` umgeleitet, sofern die Anforderung nicht `www` ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-455"><xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToWwwPermanent*>: Permanently redirect the request to the `www` subdomain if the request is non-`www`.</span></span> <span data-ttu-id="ecc32-456">Wird mit dem Statuscode [Status308PermanentRedirect](xref:Microsoft.AspNetCore.Http.StatusCodes.Status308PermanentRedirect) umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-456">Redirects with a [Status308PermanentRedirect](xref:Microsoft.AspNetCore.Http.StatusCodes.Status308PermanentRedirect) status code.</span></span>

* <span data-ttu-id="ecc32-457"><xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToWww*>: Die Anforderung wird an die Unterdomäne `www` umgeleitet, sofern die eingehende Anforderung nicht `www` ist.</span><span class="sxs-lookup"><span data-stu-id="ecc32-457"><xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToWww*>: Redirect the request to the `www` subdomain if the incoming request is non-`www`.</span></span> <span data-ttu-id="ecc32-458">Wird mit dem Statuscode [Status307TemporaryRedirect](xref:Microsoft.AspNetCore.Http.StatusCodes.Status307TemporaryRedirect) umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-458">Redirects with a [Status307TemporaryRedirect](xref:Microsoft.AspNetCore.Http.StatusCodes.Status307TemporaryRedirect) status code.</span></span> <span data-ttu-id="ecc32-459">Eine Überladung ermöglicht es Ihnen, den Statuscode für die Antwort zu senden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-459">An overload permits you to provide the status code for the response.</span></span> <span data-ttu-id="ecc32-460">Verwenden Sie ein Feld der <xref:Microsoft.AspNetCore.Http.StatusCodes>-Klasse, um einen Statuscode zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-460">Use a field of the <xref:Microsoft.AspNetCore.Http.StatusCodes> class for a status code assignment.</span></span>

### <a name="url-redirect"></a><span data-ttu-id="ecc32-461">Umleitungs-URL</span><span class="sxs-lookup"><span data-stu-id="ecc32-461">URL redirect</span></span>

<span data-ttu-id="ecc32-462">Verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirect*>, um Anforderungen umzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-462">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirect*> to redirect requests.</span></span> <span data-ttu-id="ecc32-463">Der erste Parameter enthält Ihren RegEx, damit dieser dem Pfad der eingehenden URL zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ecc32-463">The first parameter contains your regex for matching on the path of the incoming URL.</span></span> <span data-ttu-id="ecc32-464">Beim zweiten Parameter handelt es sich um eine Ersatzzeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="ecc32-464">The second parameter is the replacement string.</span></span> <span data-ttu-id="ecc32-465">Der dritte Parameter gibt, falls vorhanden, den Statuscode an.</span><span class="sxs-lookup"><span data-stu-id="ecc32-465">The third parameter, if present, specifies the status code.</span></span> <span data-ttu-id="ecc32-466">Wenn Sie den Statuscode nicht angeben, wird standardmäßig *302 – Gefunden* zurückgegeben, was bedeutet, dass die Ressource kurzzeitig verschoben oder ersetzt wurde.</span><span class="sxs-lookup"><span data-stu-id="ecc32-466">If you don't specify the status code, the status code defaults to *302 - Found* , which indicates that the resource is temporarily moved or replaced.</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=9)]

<span data-ttu-id="ecc32-467">Aktivieren Sie in Ihrem Browser die Entwicklertools, und senden Sie eine Anforderung an die Beispiel-App mit dem Pfad `/redirect-rule/1234/5678`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-467">In a browser with developer tools enabled, make a request to the sample app with the path `/redirect-rule/1234/5678`.</span></span> <span data-ttu-id="ecc32-468">Der RegEx stimmt mit dem Anforderungspfad unter `redirect-rule/(.*)` überein, und der Pfad wird durch `/redirected/1234/5678` ersetzt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-468">The regex matches the request path on `redirect-rule/(.*)`, and the path is replaced with `/redirected/1234/5678`.</span></span> <span data-ttu-id="ecc32-469">Die Umleitungs-URL wird mit dem Statuscode *302 – Gefunden* an den Client zurückgesendet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-469">The redirect URL is sent back to the client with a *302 - Found* status code.</span></span> <span data-ttu-id="ecc32-470">Unter der Umleitungs-URL sendet der Browser eine neue Anforderung, die in dessen Adressleiste angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-470">The browser makes a new request at the redirect URL, which appears in the browser's address bar.</span></span> <span data-ttu-id="ecc32-471">Da keine Regel in der Beispiel-App mit der Umleitungs-URL übereinstimmt:</span><span class="sxs-lookup"><span data-stu-id="ecc32-471">Since no rules in the sample app match on the redirect URL:</span></span>

* <span data-ttu-id="ecc32-472">Die zweite Anforderung erhält die Antwort *200 – OK* von der App.</span><span class="sxs-lookup"><span data-stu-id="ecc32-472">The second request receives a *200 - OK* response from the app.</span></span>
* <span data-ttu-id="ecc32-473">Der Antworttext zeigt die Umleitungs-URL an.</span><span class="sxs-lookup"><span data-stu-id="ecc32-473">The body of the response shows the redirect URL.</span></span>

<span data-ttu-id="ecc32-474">Wenn eine URL *weitergeleitet* wird, wird ein Roundtrip zum Server ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="ecc32-474">A round trip is made to the server when a URL is *redirected*.</span></span>

> [!WARNING]
> <span data-ttu-id="ecc32-475">Seien Sie vorsichtig, wenn Sie Umleitungsregeln einrichten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-475">Be cautious when establishing redirect rules.</span></span> <span data-ttu-id="ecc32-476">Bei jeder Anforderung an die App werden Umleitungsregeln überprüft – auch nach einer Umleitung.</span><span class="sxs-lookup"><span data-stu-id="ecc32-476">Redirect rules are evaluated on every request to the app, including after a redirect.</span></span> <span data-ttu-id="ecc32-477">Dabei kann schnell aus Versehen eine *Dauerschleife von Umleitungen* entstehen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-477">It's easy to accidentally create a *loop of infinite redirects*.</span></span>

<span data-ttu-id="ecc32-478">Ursprüngliche Anforderung: `/redirect-rule/1234/5678`</span><span class="sxs-lookup"><span data-stu-id="ecc32-478">Original Request: `/redirect-rule/1234/5678`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten nachverfolgen](url-rewriting/_static/add_redirect.png)

<span data-ttu-id="ecc32-480">Der Teil des Ausdruck in Klammern wird als *Erfassungsgruppe* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-480">The part of the expression contained within parentheses is called a *capture group*.</span></span> <span data-ttu-id="ecc32-481">Der Punkt (`.`) im Ausdruck steht für *Übereinstimmung mit beliebigem Zeichen*.</span><span class="sxs-lookup"><span data-stu-id="ecc32-481">The dot (`.`) of the expression means *match any character*.</span></span> <span data-ttu-id="ecc32-482">Das Sternchen (`*`) steht für *Übereinstimmung mit dem vorausgehenden Zeichen (keinmal oder mindestens einmal)* .</span><span class="sxs-lookup"><span data-stu-id="ecc32-482">The asterisk (`*`) indicates *match the preceding character zero or more times*.</span></span> <span data-ttu-id="ecc32-483">Daher werden die letzten beiden Pfadsegmente der URL (`1234/5678`) von der Erfassungsgruppe erfasst `(.*)`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-483">Therefore, the last two path segments of the URL, `1234/5678`, are captured by capture group `(.*)`.</span></span> <span data-ttu-id="ecc32-484">Alle Werte, die Sie in der Anforderungs-URL nach `redirect-rule/` angeben, werden von dieser Erfassungsgruppe erfasst.</span><span class="sxs-lookup"><span data-stu-id="ecc32-484">Any value you provide in the request URL after `redirect-rule/` is captured by this single capture group.</span></span>

<span data-ttu-id="ecc32-485">Erfassungsgruppen werden in der Ersetzungszeichenfolge mit dem Dollarzeichen (`$`) in die Zeichenfolge eingefügt. Danach folgt die Sequenznummer der Erfassung.</span><span class="sxs-lookup"><span data-stu-id="ecc32-485">In the replacement string, captured groups are injected into the string with the dollar sign (`$`) followed by the sequence number of the capture.</span></span> <span data-ttu-id="ecc32-486">Der erste Wert der Erfassungsgruppe wird mit `$1` abgerufen, der zweite mit `$2`. Dies wird in Sequenzen für die Erfassungsgruppen Ihres RegEx weitergeführt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-486">The first capture group value is obtained with `$1`, the second with `$2`, and they continue in sequence for the capture groups in your regex.</span></span> <span data-ttu-id="ecc32-487">Nur eine Erfassungsgruppe ist in der Beispiel-App im RegEx der Umleitungsregel enthalten. Das bedeutet, dass es in die Ersetzungszeichenfolge nur eine Gruppe eingefügt wird, nämlich `$1`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-487">There's only one captured group in the redirect rule regex in the sample app, so there's only one injected group in the replacement string, which is `$1`.</span></span> <span data-ttu-id="ecc32-488">Wenn die Regel angewendet wird, ändert sich die URL in `/redirected/1234/5678`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-488">When the rule is applied, the URL becomes `/redirected/1234/5678`.</span></span>

### <a name="url-redirect-to-a-secure-endpoint"></a><span data-ttu-id="ecc32-489">URL-Umleitung an einen sicheren Endpunkt</span><span class="sxs-lookup"><span data-stu-id="ecc32-489">URL redirect to a secure endpoint</span></span>

<span data-ttu-id="ecc32-490">Verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToHttps*>, um HTTP-Anforderungen auf denselben Host und Pfad mithilfe des HTTPS-Protokolls umzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-490">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToHttps*> to redirect HTTP requests to the same host and path using the HTTPS protocol.</span></span> <span data-ttu-id="ecc32-491">Wenn kein Statuscode angegeben wird, wird für die Middleware standardmäßig *302 – Gefunden* zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ecc32-491">If the status code isn't supplied, the middleware defaults to *302 - Found*.</span></span> <span data-ttu-id="ecc32-492">Wenn kein Port angegeben ist:</span><span class="sxs-lookup"><span data-stu-id="ecc32-492">If the port isn't supplied:</span></span>

* <span data-ttu-id="ecc32-493">Für die Middleware wird standardmäßig `null` zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ecc32-493">The middleware defaults to `null`.</span></span>
* <span data-ttu-id="ecc32-494">Das Schema ändert sich in `https` (HTTPS-Protokoll), und der Client hat über Port 443 Zugriff auf die Ressource.</span><span class="sxs-lookup"><span data-stu-id="ecc32-494">The scheme changes to `https` (HTTPS protocol), and the client accesses the resource on port 443.</span></span>

<span data-ttu-id="ecc32-495">Im folgenden Beispiel wird dargestellt, wie Sie den Statuscode *301 – Permanent verschoben* festlegen und den Port in 5001 ändern.</span><span class="sxs-lookup"><span data-stu-id="ecc32-495">The following example shows how to set the status code to *301 - Moved Permanently* and change the port to 5001.</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    var options = new RewriteOptions()
        .AddRedirectToHttps(301, 5001);

    app.UseRewriter(options);
}
```

<span data-ttu-id="ecc32-496">Verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToHttpsPermanent*>, um unsichere Anforderungen auf denselben Host und Pfad mit einem sicheren HTTPS-Protokoll auf Port 443 umzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-496">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRedirectToHttpsPermanent*> to redirect insecure requests to the same host and path with secure HTTPS protocol on port 443.</span></span> <span data-ttu-id="ecc32-497">Die Middleware legt den Statuscode auf *301 – Permanent verschoben* fest.</span><span class="sxs-lookup"><span data-stu-id="ecc32-497">The middleware sets the status code to *301 - Moved Permanently*.</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    var options = new RewriteOptions()
        .AddRedirectToHttpsPermanent();

    app.UseRewriter(options);
}
```

> [!NOTE]
> <span data-ttu-id="ecc32-498">Wenn Sie eine Umleitung an einen sicheren Endpunkt ohne weitere erforderliche Umleitungsregeln durchführen, wird empfohlen, Middleware für HTTPS-Umleitung zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-498">When redirecting to a secure endpoint without the requirement for additional redirect rules, we recommend using HTTPS Redirection Middleware.</span></span> <span data-ttu-id="ecc32-499">Weitere Informationen finden Sie im Artikel zum [Erzwingen von HTTPS](xref:security/enforcing-ssl#require-https).</span><span class="sxs-lookup"><span data-stu-id="ecc32-499">For more information, see the [Enforce HTTPS](xref:security/enforcing-ssl#require-https) topic.</span></span>

<span data-ttu-id="ecc32-500">Anhand der Beispiel-App wird veranschaulicht, wie `AddRedirectToHttps` oder `AddRedirectToHttpsPermanent` verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-500">The sample app is capable of demonstrating how to use `AddRedirectToHttps` or `AddRedirectToHttpsPermanent`.</span></span> <span data-ttu-id="ecc32-501">Fügen Sie die Erweiterungsmethode zu den `RewriteOptions` hinzu.</span><span class="sxs-lookup"><span data-stu-id="ecc32-501">Add the extension method to the `RewriteOptions`.</span></span> <span data-ttu-id="ecc32-502">Senden Sie eine unsichere Anforderung an die App unter einer beliebigen URL.</span><span class="sxs-lookup"><span data-stu-id="ecc32-502">Make an insecure request to the app at any URL.</span></span> <span data-ttu-id="ecc32-503">Schließen Sie die Sicherheitswarnung des Browsers, in der Sie darüber informiert werden, dass das selbstsignierte Zertifikat nicht vertrauenswürdig ist, oder erstellen sie eine Ausnahme, um dem Zertifikat zu vertrauen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-503">Dismiss the browser security warning that the self-signed certificate is untrusted or create an exception to trust the certificate.</span></span>

<span data-ttu-id="ecc32-504">Ursprüngliche Anforderung über `AddRedirectToHttps(301, 5001)`: `http://localhost:5000/secure`</span><span class="sxs-lookup"><span data-stu-id="ecc32-504">Original Request using `AddRedirectToHttps(301, 5001)`: `http://localhost:5000/secure`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten nachverfolgen](url-rewriting/_static/add_redirect_to_https.png)

<span data-ttu-id="ecc32-506">Ursprüngliche Anforderung über `AddRedirectToHttpsPermanent`: `http://localhost:5000/secure`</span><span class="sxs-lookup"><span data-stu-id="ecc32-506">Original Request using `AddRedirectToHttpsPermanent`: `http://localhost:5000/secure`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten nachverfolgen](url-rewriting/_static/add_redirect_to_https_permanent.png)

### <a name="url-rewrite"></a><span data-ttu-id="ecc32-508">Umschreiben einer URL</span><span class="sxs-lookup"><span data-stu-id="ecc32-508">URL rewrite</span></span>

<span data-ttu-id="ecc32-509">Erstellen Sie mithilfe von <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRewrite*> eine Regel zum Umschreiben von URLs.</span><span class="sxs-lookup"><span data-stu-id="ecc32-509">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.AddRewrite*> to create a rule for rewriting URLs.</span></span> <span data-ttu-id="ecc32-510">Der erste Parameter enthält den RegEx, damit dieser der eingehenden URL zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ecc32-510">The first parameter contains the regex for matching on the incoming URL path.</span></span> <span data-ttu-id="ecc32-511">Beim zweiten Parameter handelt es sich um eine Ersatzzeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="ecc32-511">The second parameter is the replacement string.</span></span> <span data-ttu-id="ecc32-512">Der dritte Parameter (`skipRemainingRules: {true|false}`) teilt der Middleware mit, ob sie zusätzliche Umschreibungsregeln überspringen soll, wenn die aktuelle Regel angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-512">The third parameter, `skipRemainingRules: {true|false}`, indicates to the middleware whether or not to skip additional rewrite rules if the current rule is applied.</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=10-11)]

<span data-ttu-id="ecc32-513">Ursprüngliche Anforderung: `/rewrite-rule/1234/5678`</span><span class="sxs-lookup"><span data-stu-id="ecc32-513">Original Request: `/rewrite-rule/1234/5678`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderung und Antwort nachverfolgen](url-rewriting/_static/add_rewrite.png)

<span data-ttu-id="ecc32-515">Das Zirkumflexzeichen (`^`) am Anfang des Ausdrucks bedeutet, dass die Übereinstimmung schon am Anfang des URL-Pfads beginnt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-515">The carat (`^`) at the beginning of the expression means that matching starts at the beginning of the URL path.</span></span>

<span data-ttu-id="ecc32-516">In dem vorherigen Beispiel zu den Umleitungsregeln, `redirect-rule/(.*)`, beginnt der RegEx nicht mit einem Zirkumflexzeichen (`^`).</span><span class="sxs-lookup"><span data-stu-id="ecc32-516">In the earlier example with the redirect rule, `redirect-rule/(.*)`, there's no carat (`^`) at the start of the regex.</span></span> <span data-ttu-id="ecc32-517">So kann für eine Übereinstimmung ein beliebiges Zeichen im Pfad vor `redirect-rule/` stehen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-517">Therefore, any characters may precede `redirect-rule/` in the path for a successful match.</span></span>

| <span data-ttu-id="ecc32-518">Pfad</span><span class="sxs-lookup"><span data-stu-id="ecc32-518">Path</span></span>                               | <span data-ttu-id="ecc32-519">Match</span><span class="sxs-lookup"><span data-stu-id="ecc32-519">Match</span></span> |
| ---------------------------------- | :---: |
| `/redirect-rule/1234/5678`         | <span data-ttu-id="ecc32-520">Ja</span><span class="sxs-lookup"><span data-stu-id="ecc32-520">Yes</span></span>   |
| `/my-cool-redirect-rule/1234/5678` | <span data-ttu-id="ecc32-521">Ja</span><span class="sxs-lookup"><span data-stu-id="ecc32-521">Yes</span></span>   |
| `/anotherredirect-rule/1234/5678`  | <span data-ttu-id="ecc32-522">Ja</span><span class="sxs-lookup"><span data-stu-id="ecc32-522">Yes</span></span>   |

<span data-ttu-id="ecc32-523">Die Umschreibungsregel (`^rewrite-rule/(\d+)/(\d+)`) stimmt nur mit Pfaden überein, wenn sie mit `rewrite-rule/` beginnen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-523">The rewrite rule, `^rewrite-rule/(\d+)/(\d+)`, only matches paths if they start with `rewrite-rule/`.</span></span> <span data-ttu-id="ecc32-524">Beachten Sie die unterschiedliche Übereinstimmung in der folgenden Tabelle:</span><span class="sxs-lookup"><span data-stu-id="ecc32-524">In the following table, note the difference in matching.</span></span>

| <span data-ttu-id="ecc32-525">Pfad</span><span class="sxs-lookup"><span data-stu-id="ecc32-525">Path</span></span>                              | <span data-ttu-id="ecc32-526">Match</span><span class="sxs-lookup"><span data-stu-id="ecc32-526">Match</span></span> |
| --------------------------------- | :---: |
| `/rewrite-rule/1234/5678`         | <span data-ttu-id="ecc32-527">Ja</span><span class="sxs-lookup"><span data-stu-id="ecc32-527">Yes</span></span>   |
| `/my-cool-rewrite-rule/1234/5678` | <span data-ttu-id="ecc32-528">Nein</span><span class="sxs-lookup"><span data-stu-id="ecc32-528">No</span></span>    |
| `/anotherrewrite-rule/1234/5678`  | <span data-ttu-id="ecc32-529">Nein</span><span class="sxs-lookup"><span data-stu-id="ecc32-529">No</span></span>    |

<span data-ttu-id="ecc32-530">Auf den `^rewrite-rule/`-Teil des Ausdruck folgen zwei Erfassungsgruppen: `(\d+)/(\d+)`.</span><span class="sxs-lookup"><span data-stu-id="ecc32-530">Following the `^rewrite-rule/` portion of the expression, there are two capture groups, `(\d+)/(\d+)`.</span></span> <span data-ttu-id="ecc32-531">`\d` steht für *Übereinstimmung mit einer Ziffer (Zahl)* .</span><span class="sxs-lookup"><span data-stu-id="ecc32-531">The `\d` signifies *match a digit (number)*.</span></span> <span data-ttu-id="ecc32-532">Das Pluszeichen (`+`) steht für *match one or more of the preceding character* (Übereinstimmung mit mindestens einem vorausgehenden Zeichen).</span><span class="sxs-lookup"><span data-stu-id="ecc32-532">The plus sign (`+`) means *match one or more of the preceding character*.</span></span> <span data-ttu-id="ecc32-533">Aus diesem Grund muss die URL eine Zahl enthalten, auf die ein Schrägstrich und eine weitere Zahl folgt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-533">Therefore, the URL must contain a number followed by a forward-slash followed by another number.</span></span> <span data-ttu-id="ecc32-534">Die Erfassungsgruppen werden in die umgeschriebene URL als `$1` und `$2` eingefügt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-534">These capture groups are injected into the rewritten URL as `$1` and `$2`.</span></span> <span data-ttu-id="ecc32-535">Über die Ersetzungszeichenfolge der Neuschreibungsregel werden die Erfassungsgruppen in die Abfragezeichenfolge eingefügt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-535">The rewrite rule replacement string places the captured groups into the query string.</span></span> <span data-ttu-id="ecc32-536">Der angeforderte `/rewrite-rule/1234/5678`-Pfad wird umgeschrieben, um eine Ressource unter `/rewritten?var1=1234&var2=5678` abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-536">The requested path of `/rewrite-rule/1234/5678` is rewritten to obtain the resource at `/rewritten?var1=1234&var2=5678`.</span></span> <span data-ttu-id="ecc32-537">Wenn es in der ursprünglichen Anforderung eine Abfragezeichenfolge gibt, bleibt diese erhalten, wenn die URL umgeschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-537">If a query string is present on the original request, it's preserved when the URL is rewritten.</span></span>

<span data-ttu-id="ecc32-538">Es gibt keinen Roundtrip zum Server, um die Ressource abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-538">There's no round trip to the server to obtain the resource.</span></span> <span data-ttu-id="ecc32-539">Wenn es die Ressource gibt, wird sie abgerufen und dem Client mit dem Statuscode *200 – OK* zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ecc32-539">If the resource exists, it's fetched and returned to the client with a *200 - OK* status code.</span></span> <span data-ttu-id="ecc32-540">Da der Client nicht umgeleitet wird, ändert sich die URL in der Adressleiste des Browsers nicht.</span><span class="sxs-lookup"><span data-stu-id="ecc32-540">Because the client isn't redirected, the URL in the browser's address bar doesn't change.</span></span> <span data-ttu-id="ecc32-541">Clients können nicht erkennen, dass ein Vorgang zum erneuten Schreiben einer URL auf dem Server stattgefunden hat.</span><span class="sxs-lookup"><span data-stu-id="ecc32-541">Clients can't detect that a URL rewrite operation occurred on the server.</span></span>

> [!NOTE]
> <span data-ttu-id="ecc32-542">Verwenden Sie `skipRemainingRules: true`, wo immer das möglich ist, da das Abgleichen von Regeln rechnerisch sehr aufwendig ist und die Antwortzeit der App erhöht.</span><span class="sxs-lookup"><span data-stu-id="ecc32-542">Use `skipRemainingRules: true` whenever possible because matching rules is computationally expensive and increases app response time.</span></span> <span data-ttu-id="ecc32-543">Führen Sie folgende Schritte aus, um die schnellsten App-Antwortzeiten zu erreichen:</span><span class="sxs-lookup"><span data-stu-id="ecc32-543">For the fastest app response:</span></span>
>
> * <span data-ttu-id="ecc32-544">Sortieren Sie Neuschreibungsregeln von der am häufigsten abgeglichenen Regel zu der am seltensten abgeglichenen Regel.</span><span class="sxs-lookup"><span data-stu-id="ecc32-544">Order rewrite rules from the most frequently matched rule to the least frequently matched rule.</span></span>
> * <span data-ttu-id="ecc32-545">Überspringen Sie die Verarbeitung der übrigen Regeln, wenn es zu einer Übereinstimmung kommt und keine zusätzlichen Regelverarbeitungen erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="ecc32-545">Skip the processing of the remaining rules when a match occurs and no additional rule processing is required.</span></span>

### <a name="apache-mod_rewrite"></a><span data-ttu-id="ecc32-546">Apache: „mod_rewrite“</span><span class="sxs-lookup"><span data-stu-id="ecc32-546">Apache mod_rewrite</span></span>

<span data-ttu-id="ecc32-547">Wenden Sie die Apache-Regeln „mod_rewrite“ mit <xref:Microsoft.AspNetCore.Rewrite.ApacheModRewriteOptionsExtensions.AddApacheModRewrite*> an.</span><span class="sxs-lookup"><span data-stu-id="ecc32-547">Apply Apache mod_rewrite rules with <xref:Microsoft.AspNetCore.Rewrite.ApacheModRewriteOptionsExtensions.AddApacheModRewrite*>.</span></span> <span data-ttu-id="ecc32-548">Vergewissern Sie sich, dass die Regeldatei mit der App bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-548">Make sure that the rules file is deployed with the app.</span></span> <span data-ttu-id="ecc32-549">Weitere Informationen zu diesen Regeln finden Sie unter [Apache: „mod_rewrite“](https://httpd.apache.org/docs/2.4/rewrite/).</span><span class="sxs-lookup"><span data-stu-id="ecc32-549">For more information and examples of mod_rewrite rules, see [Apache mod_rewrite](https://httpd.apache.org/docs/2.4/rewrite/).</span></span>

<span data-ttu-id="ecc32-550">Zum Lesen der Regeldatei *ApacheModRewrite.txt* wird <xref:System.IO.StreamReader> verwendet:</span><span class="sxs-lookup"><span data-stu-id="ecc32-550">A <xref:System.IO.StreamReader> is used to read the rules from the *ApacheModRewrite.txt* rules file:</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=3-4,12)]

<span data-ttu-id="ecc32-551">Die Beispiel-App leitet Anforderungen von `/apache-mod-rules-redirect/(.\*)` auf `/redirected?id=$1` um.</span><span class="sxs-lookup"><span data-stu-id="ecc32-551">The sample app redirects requests from `/apache-mod-rules-redirect/(.\*)` to `/redirected?id=$1`.</span></span> <span data-ttu-id="ecc32-552">Der Antwortstatuscode lautet *302 – Gefunden*.</span><span class="sxs-lookup"><span data-stu-id="ecc32-552">The response status code is *302 - Found*.</span></span>

[!code[](url-rewriting/samples/2.x/SampleApp/ApacheModRewrite.txt)]

<span data-ttu-id="ecc32-553">Ursprüngliche Anforderung: `/apache-mod-rules-redirect/1234`</span><span class="sxs-lookup"><span data-stu-id="ecc32-553">Original Request: `/apache-mod-rules-redirect/1234`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten nachverfolgen](url-rewriting/_static/add_apache_mod_redirect.png)

<span data-ttu-id="ecc32-555">Die Middleware unterstützt die folgenden Servervariablen für die Apache „mod_rewrite“:</span><span class="sxs-lookup"><span data-stu-id="ecc32-555">The middleware supports the following Apache mod_rewrite server variables:</span></span>

* <span data-ttu-id="ecc32-556">CONN_REMOTE_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-556">CONN_REMOTE_ADDR</span></span>
* <span data-ttu-id="ecc32-557">HTTP_ACCEPT</span><span class="sxs-lookup"><span data-stu-id="ecc32-557">HTTP_ACCEPT</span></span>
* <span data-ttu-id="ecc32-558">HTTP_CONNECTION</span><span class="sxs-lookup"><span data-stu-id="ecc32-558">HTTP_CONNECTION</span></span>
* <span data-ttu-id="ecc32-559">HTTP_COOKIE</span><span class="sxs-lookup"><span data-stu-id="ecc32-559">HTTP_COOKIE</span></span>
* <span data-ttu-id="ecc32-560">HTTP_FORWARDED</span><span class="sxs-lookup"><span data-stu-id="ecc32-560">HTTP_FORWARDED</span></span>
* <span data-ttu-id="ecc32-561">HTTP_HOST</span><span class="sxs-lookup"><span data-stu-id="ecc32-561">HTTP_HOST</span></span>
* <span data-ttu-id="ecc32-562">HTTP_REFERER</span><span class="sxs-lookup"><span data-stu-id="ecc32-562">HTTP_REFERER</span></span>
* <span data-ttu-id="ecc32-563">HTTP_USER_AGENT</span><span class="sxs-lookup"><span data-stu-id="ecc32-563">HTTP_USER_AGENT</span></span>
* <span data-ttu-id="ecc32-564">HTTPS</span><span class="sxs-lookup"><span data-stu-id="ecc32-564">HTTPS</span></span>
* <span data-ttu-id="ecc32-565">IPV6</span><span class="sxs-lookup"><span data-stu-id="ecc32-565">IPV6</span></span>
* <span data-ttu-id="ecc32-566">QUERY_STRING</span><span class="sxs-lookup"><span data-stu-id="ecc32-566">QUERY_STRING</span></span>
* <span data-ttu-id="ecc32-567">REMOTE_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-567">REMOTE_ADDR</span></span>
* <span data-ttu-id="ecc32-568">REMOTE_PORT</span><span class="sxs-lookup"><span data-stu-id="ecc32-568">REMOTE_PORT</span></span>
* <span data-ttu-id="ecc32-569">REQUEST_FILENAME</span><span class="sxs-lookup"><span data-stu-id="ecc32-569">REQUEST_FILENAME</span></span>
* <span data-ttu-id="ecc32-570">REQUEST_METHOD</span><span class="sxs-lookup"><span data-stu-id="ecc32-570">REQUEST_METHOD</span></span>
* <span data-ttu-id="ecc32-571">REQUEST_SCHEME</span><span class="sxs-lookup"><span data-stu-id="ecc32-571">REQUEST_SCHEME</span></span>
* <span data-ttu-id="ecc32-572">REQUEST_URI</span><span class="sxs-lookup"><span data-stu-id="ecc32-572">REQUEST_URI</span></span>
* <span data-ttu-id="ecc32-573">SCRIPT_FILENAME</span><span class="sxs-lookup"><span data-stu-id="ecc32-573">SCRIPT_FILENAME</span></span>
* <span data-ttu-id="ecc32-574">SERVER_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-574">SERVER_ADDR</span></span>
* <span data-ttu-id="ecc32-575">SERVER_PORT</span><span class="sxs-lookup"><span data-stu-id="ecc32-575">SERVER_PORT</span></span>
* <span data-ttu-id="ecc32-576">SERVER_PROTOCOL</span><span class="sxs-lookup"><span data-stu-id="ecc32-576">SERVER_PROTOCOL</span></span>
* <span data-ttu-id="ecc32-577">TIME</span><span class="sxs-lookup"><span data-stu-id="ecc32-577">TIME</span></span>
* <span data-ttu-id="ecc32-578">TIME_DAY</span><span class="sxs-lookup"><span data-stu-id="ecc32-578">TIME_DAY</span></span>
* <span data-ttu-id="ecc32-579">TIME_HOUR</span><span class="sxs-lookup"><span data-stu-id="ecc32-579">TIME_HOUR</span></span>
* <span data-ttu-id="ecc32-580">TIME_MIN</span><span class="sxs-lookup"><span data-stu-id="ecc32-580">TIME_MIN</span></span>
* <span data-ttu-id="ecc32-581">TIME_MON</span><span class="sxs-lookup"><span data-stu-id="ecc32-581">TIME_MON</span></span>
* <span data-ttu-id="ecc32-582">TIME_SEC</span><span class="sxs-lookup"><span data-stu-id="ecc32-582">TIME_SEC</span></span>
* <span data-ttu-id="ecc32-583">TIME_WDAY</span><span class="sxs-lookup"><span data-stu-id="ecc32-583">TIME_WDAY</span></span>
* <span data-ttu-id="ecc32-584">TIME_YEAR</span><span class="sxs-lookup"><span data-stu-id="ecc32-584">TIME_YEAR</span></span>

### <a name="iis-url-rewrite-module-rules"></a><span data-ttu-id="ecc32-585">Regeln zum IIS-Umschreibungsmodul</span><span class="sxs-lookup"><span data-stu-id="ecc32-585">IIS URL Rewrite Module rules</span></span>

<span data-ttu-id="ecc32-586">Um denselben Regelsatz zu verwenden, der für das IIS-Moduls für URL-Neuschreibung gilt, verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.IISUrlRewriteOptionsExtensions.AddIISUrlRewrite*>.</span><span class="sxs-lookup"><span data-stu-id="ecc32-586">To use the same rule set that applies to the IIS URL Rewrite Module, use <xref:Microsoft.AspNetCore.Rewrite.IISUrlRewriteOptionsExtensions.AddIISUrlRewrite*>.</span></span> <span data-ttu-id="ecc32-587">Vergewissern Sie sich, dass die Regeldatei mit der App bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-587">Make sure that the rules file is deployed with the app.</span></span> <span data-ttu-id="ecc32-588">Geben Sie der Middleware nicht die Anweisung, die *web.config* -Datei der App zu verwenden, wenn sie auf der Windows Server-IIS ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-588">Don't direct the middleware to use the app's *web.config* file when running on Windows Server IIS.</span></span> <span data-ttu-id="ecc32-589">Bei IIS sollten diese Regeln außerhalb der *web.config* -Datei der App gespeichert werden, um Konflikte mit dem IIS-Neuschreibungsmodul zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-589">With IIS, these rules should be stored outside of the app's *web.config* file in order to avoid conflicts with the IIS Rewrite module.</span></span> <span data-ttu-id="ecc32-590">Weitere Informationen und Beispiele zu den Regeln zum IIS-Umschreibungsmodul finden Sie unter [Using Url Rewrite Module 2.0 (Verwenden des URL-Umschreibungsmoduls 2.0)](/iis/extensions/url-rewrite-module/using-url-rewrite-module-20) und [URL Rewrite Module Configuration Reference (Konfigurationsreferenz des URL-Umschreibungsmoduls)](/iis/extensions/url-rewrite-module/url-rewrite-module-configuration-reference).</span><span class="sxs-lookup"><span data-stu-id="ecc32-590">For more information and examples of IIS URL Rewrite Module rules, see [Using Url Rewrite Module 2.0](/iis/extensions/url-rewrite-module/using-url-rewrite-module-20) and [URL Rewrite Module Configuration Reference](/iis/extensions/url-rewrite-module/url-rewrite-module-configuration-reference).</span></span>

<span data-ttu-id="ecc32-591">Zum Lesen der Regeldatei *IISUrlRewrite.xml* wird <xref:System.IO.StreamReader> verwendet:</span><span class="sxs-lookup"><span data-stu-id="ecc32-591">A <xref:System.IO.StreamReader> is used to read the rules from the *IISUrlRewrite.xml* rules file:</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=5-6,13)]

<span data-ttu-id="ecc32-592">Die Beispiel-App schreibt Anforderungen von `/iis-rules-rewrite/(.*)` in `/rewritten?id=$1` um.</span><span class="sxs-lookup"><span data-stu-id="ecc32-592">The sample app rewrites requests from `/iis-rules-rewrite/(.*)` to `/rewritten?id=$1`.</span></span> <span data-ttu-id="ecc32-593">Die Antwort wird an den Client mit dem Statuscode *200 – OK* gesendet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-593">The response is sent to the client with a *200 - OK* status code.</span></span>

[!code-xml[](url-rewriting/samples/2.x/SampleApp/IISUrlRewrite.xml)]

<span data-ttu-id="ecc32-594">Ursprüngliche Anforderung: `/iis-rules-rewrite/1234`</span><span class="sxs-lookup"><span data-stu-id="ecc32-594">Original Request: `/iis-rules-rewrite/1234`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderung und Antwort nachverfolgen](url-rewriting/_static/add_iis_url_rewrite.png)

<span data-ttu-id="ecc32-596">Wenn Sie über ein aktives IIS-Umschreibungsmodul verfügen, für das die Regeln auf Serverebene konfiguriert sind, die negative Auswirkungen auf Ihre App hätten, können Sie das IIS-Umschreibungsmodul für die App deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="ecc32-596">If you have an active IIS Rewrite Module with server-level rules configured that would impact your app in undesirable ways, you can disable the IIS Rewrite Module for an app.</span></span> <span data-ttu-id="ecc32-597">Weitere Informationen finden Sie unter [Disabling IIS modules (Deaktivieren von IIS-Modulen)](xref:host-and-deploy/iis/modules#disabling-iis-modules).</span><span class="sxs-lookup"><span data-stu-id="ecc32-597">For more information, see [Disabling IIS modules](xref:host-and-deploy/iis/modules#disabling-iis-modules).</span></span>

#### <a name="unsupported-features"></a><span data-ttu-id="ecc32-598">Nicht unterstützte Features</span><span class="sxs-lookup"><span data-stu-id="ecc32-598">Unsupported features</span></span>

<span data-ttu-id="ecc32-599">Die im Lieferumfang von ASP.NET Core 2.x enthaltene Middleware unterstützt die folgenden Features des IIS-URL-Umschreibungsmoduls nicht:</span><span class="sxs-lookup"><span data-stu-id="ecc32-599">The middleware released with ASP.NET Core 2.x doesn't support the following IIS URL Rewrite Module features:</span></span>

* <span data-ttu-id="ecc32-600">Ausgehende Regeln</span><span class="sxs-lookup"><span data-stu-id="ecc32-600">Outbound Rules</span></span>
* <span data-ttu-id="ecc32-601">Benutzerdefinierte Servervariablen</span><span class="sxs-lookup"><span data-stu-id="ecc32-601">Custom Server Variables</span></span>
* <span data-ttu-id="ecc32-602">Platzhalter</span><span class="sxs-lookup"><span data-stu-id="ecc32-602">Wildcards</span></span>
* <span data-ttu-id="ecc32-603">LogRewrittenUrl</span><span class="sxs-lookup"><span data-stu-id="ecc32-603">LogRewrittenUrl</span></span>

#### <a name="supported-server-variables"></a><span data-ttu-id="ecc32-604">Unterstützte Servervariablen</span><span class="sxs-lookup"><span data-stu-id="ecc32-604">Supported server variables</span></span>

<span data-ttu-id="ecc32-605">Die Middleware unterstützt die folgenden Servervariablen für das IIS-URL-Umschreibungsmodul:</span><span class="sxs-lookup"><span data-stu-id="ecc32-605">The middleware supports the following IIS URL Rewrite Module server variables:</span></span>

* <span data-ttu-id="ecc32-606">CONTENT_LENGTH</span><span class="sxs-lookup"><span data-stu-id="ecc32-606">CONTENT_LENGTH</span></span>
* <span data-ttu-id="ecc32-607">CONTENT_TYPE</span><span class="sxs-lookup"><span data-stu-id="ecc32-607">CONTENT_TYPE</span></span>
* <span data-ttu-id="ecc32-608">HTTP_ACCEPT</span><span class="sxs-lookup"><span data-stu-id="ecc32-608">HTTP_ACCEPT</span></span>
* <span data-ttu-id="ecc32-609">HTTP_CONNECTION</span><span class="sxs-lookup"><span data-stu-id="ecc32-609">HTTP_CONNECTION</span></span>
* <span data-ttu-id="ecc32-610">HTTP_COOKIE</span><span class="sxs-lookup"><span data-stu-id="ecc32-610">HTTP_COOKIE</span></span>
* <span data-ttu-id="ecc32-611">HTTP_HOST</span><span class="sxs-lookup"><span data-stu-id="ecc32-611">HTTP_HOST</span></span>
* <span data-ttu-id="ecc32-612">HTTP_REFERER</span><span class="sxs-lookup"><span data-stu-id="ecc32-612">HTTP_REFERER</span></span>
* <span data-ttu-id="ecc32-613">HTTP_URL</span><span class="sxs-lookup"><span data-stu-id="ecc32-613">HTTP_URL</span></span>
* <span data-ttu-id="ecc32-614">HTTP_USER_AGENT</span><span class="sxs-lookup"><span data-stu-id="ecc32-614">HTTP_USER_AGENT</span></span>
* <span data-ttu-id="ecc32-615">HTTPS</span><span class="sxs-lookup"><span data-stu-id="ecc32-615">HTTPS</span></span>
* <span data-ttu-id="ecc32-616">LOCAL_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-616">LOCAL_ADDR</span></span>
* <span data-ttu-id="ecc32-617">QUERY_STRING</span><span class="sxs-lookup"><span data-stu-id="ecc32-617">QUERY_STRING</span></span>
* <span data-ttu-id="ecc32-618">REMOTE_ADDR</span><span class="sxs-lookup"><span data-stu-id="ecc32-618">REMOTE_ADDR</span></span>
* <span data-ttu-id="ecc32-619">REMOTE_PORT</span><span class="sxs-lookup"><span data-stu-id="ecc32-619">REMOTE_PORT</span></span>
* <span data-ttu-id="ecc32-620">REQUEST_FILENAME</span><span class="sxs-lookup"><span data-stu-id="ecc32-620">REQUEST_FILENAME</span></span>
* <span data-ttu-id="ecc32-621">REQUEST_URI</span><span class="sxs-lookup"><span data-stu-id="ecc32-621">REQUEST_URI</span></span>

> [!NOTE]
> <span data-ttu-id="ecc32-622">Sie können <xref:Microsoft.Extensions.FileProviders.IFileProvider> auch über <xref:Microsoft.Extensions.FileProviders.PhysicalFileProvider> abrufen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-622">You can also obtain an <xref:Microsoft.Extensions.FileProviders.IFileProvider> via a <xref:Microsoft.Extensions.FileProviders.PhysicalFileProvider>.</span></span> <span data-ttu-id="ecc32-623">Über diesen Ansatz können Sie flexibler einen Speicherort für die Dateien der Umschreibungsregeln auswählen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-623">This approach may provide greater flexibility for the location of your rewrite rules files.</span></span> <span data-ttu-id="ecc32-624">Vergewissern Sie sich, dass die Dateien zu den Umschreibungsregeln auf dem Server unter dem von Ihnen angegebenen Pfad bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-624">Make sure that your rewrite rules files are deployed to the server at the path you provide.</span></span>
>
> ```csharp
> PhysicalFileProvider fileProvider = new PhysicalFileProvider(Directory.GetCurrentDirectory());
> ```

### <a name="method-based-rule"></a><span data-ttu-id="ecc32-625">Methodenbasierte Regel</span><span class="sxs-lookup"><span data-stu-id="ecc32-625">Method-based rule</span></span>

<span data-ttu-id="ecc32-626">Verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.Add*>, um Ihre eigene Regellogik in einer Methode zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="ecc32-626">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.Add*> to implement your own rule logic in a method.</span></span> <span data-ttu-id="ecc32-627">`Add` macht <xref:Microsoft.AspNetCore.Rewrite.RewriteContext> verfügbar, wodurch die Verwendung von <xref:Microsoft.AspNetCore.Http.HttpContext> in Ihrer Methode ermöglicht wird.</span><span class="sxs-lookup"><span data-stu-id="ecc32-627">`Add` exposes the <xref:Microsoft.AspNetCore.Rewrite.RewriteContext>, which makes available the <xref:Microsoft.AspNetCore.Http.HttpContext> for use in your method.</span></span> <span data-ttu-id="ecc32-628">[RewriteContext.Result](xref:Microsoft.AspNetCore.Rewrite.RewriteContext.Result*) bestimmt, wie die zusätzliche Pipelineverarbeitung erfolgt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-628">The [RewriteContext.Result](xref:Microsoft.AspNetCore.Rewrite.RewriteContext.Result*) determines how additional pipeline processing is handled.</span></span> <span data-ttu-id="ecc32-629">Legen Sie den Wert auf eines der <xref:Microsoft.AspNetCore.Rewrite.RuleResult>-Felder fest, die in der folgenden Tabelle beschrieben sind:</span><span class="sxs-lookup"><span data-stu-id="ecc32-629">Set the value to one of the <xref:Microsoft.AspNetCore.Rewrite.RuleResult> fields described in the following table.</span></span>

| <span data-ttu-id="ecc32-630">Umschreiben von Kontext – Ergebnisse</span><span class="sxs-lookup"><span data-stu-id="ecc32-630">Rewrite context result</span></span>               | <span data-ttu-id="ecc32-631">Aktion</span><span class="sxs-lookup"><span data-stu-id="ecc32-631">Action</span></span>                                                           |
| ------------------------------------ | ---------------------------------------------------------------- |
| <span data-ttu-id="ecc32-632">`RuleResult.ContinueRules` (Standardwert)</span><span class="sxs-lookup"><span data-stu-id="ecc32-632">`RuleResult.ContinueRules` (default)</span></span> | <span data-ttu-id="ecc32-633">Regeln weiter anwenden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-633">Continue applying rules.</span></span>                                         |
| `RuleResult.EndResponse`             | <span data-ttu-id="ecc32-634">Regeln nicht mehr anwenden und Antwort senden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-634">Stop applying rules and send the response.</span></span>                       |
| `RuleResult.SkipRemainingRules`      | <span data-ttu-id="ecc32-635">Regeln nicht mehr anwenden, und den Kontext an die nächste Middleware senden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-635">Stop applying rules and send the context to the next middleware.</span></span> |

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=14)]

<span data-ttu-id="ecc32-636">In der Beispiel-App wird eine Methode dargestellt, die Anforderungen für Pfade weiterleitet, die auf *.xml* enden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-636">The sample app demonstrates a method that redirects requests for paths that end with *.xml*.</span></span> <span data-ttu-id="ecc32-637">Wenn eine Anforderung für `/file.xml` erfolgt, wird sie zu `/xmlfiles/file.xml` umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-637">If a request is made for `/file.xml`, the request is redirected to `/xmlfiles/file.xml`.</span></span> <span data-ttu-id="ecc32-638">Der Statuscode wird auf *301 – Permanent verschoben* festgelegt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-638">The status code is set to *301 - Moved Permanently*.</span></span> <span data-ttu-id="ecc32-639">Wenn vom Browser eine neue Anforderung für */xmlfiles/file.xml* gesendet wird, wird dem Client die Datei von Middleware für statische Dateien aus dem Ordner *wwwroot/xmlfiles* bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-639">When the browser makes a new request for */xmlfiles/file.xml* , Static File Middleware serves the file to the client from the *wwwroot/xmlfiles* folder.</span></span> <span data-ttu-id="ecc32-640">Legen Sie für eine Umleitung den Statuscode der Antwort explizit fest.</span><span class="sxs-lookup"><span data-stu-id="ecc32-640">For a redirect, explicitly set the status code of the response.</span></span> <span data-ttu-id="ecc32-641">Andernfalls wird ein Statuscode *200 – OK* zurückgegeben, und die Umleitung findet nicht auf dem Client statt.</span><span class="sxs-lookup"><span data-stu-id="ecc32-641">Otherwise, a *200 - OK* status code is returned, and the redirect doesn't occur on the client.</span></span>

<span data-ttu-id="ecc32-642">*RewriteRules.cs* :</span><span class="sxs-lookup"><span data-stu-id="ecc32-642">*RewriteRules.cs* :</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/RewriteRules.cs?name=snippet_RedirectXmlFileRequests&highlight=14-18)]

<span data-ttu-id="ecc32-643">Bei diesem Ansatz können auch Anforderungen erneut generiert werden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-643">This approach can also rewrite requests.</span></span> <span data-ttu-id="ecc32-644">In der Beispiel-App wird demonstriert, wie der Pfad für eine beliebige Textdateianforderung umgeschrieben wird, um die Textdatei *file.txt* aus dem Ordner *wwwroot* bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="ecc32-644">The sample app demonstrates rewriting the path for any text file request to serve the *file.txt* text file from the *wwwroot* folder.</span></span> <span data-ttu-id="ecc32-645">Middleware für statische Dateien stellt die Datei bereit, die auf dem aktualisierten Anforderungspfad basiert:</span><span class="sxs-lookup"><span data-stu-id="ecc32-645">Static File Middleware serves the file based on the updated request path:</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=15,22)]

<span data-ttu-id="ecc32-646">*RewriteRules.cs* :</span><span class="sxs-lookup"><span data-stu-id="ecc32-646">*RewriteRules.cs* :</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/RewriteRules.cs?name=snippet_RewriteTextFileRequests&highlight=7-8)]

### <a name="irule-based-rule"></a><span data-ttu-id="ecc32-647">IRule-basierte Regel</span><span class="sxs-lookup"><span data-stu-id="ecc32-647">IRule-based rule</span></span>

<span data-ttu-id="ecc32-648">Um Regellogik in einer Klasse zu nutzen, die die <xref:Microsoft.AspNetCore.Rewrite.IRule>-Schnittstelle implementiert, verwenden Sie <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.Add*>.</span><span class="sxs-lookup"><span data-stu-id="ecc32-648">Use <xref:Microsoft.AspNetCore.Rewrite.RewriteOptionsExtensions.Add*> to use rule logic in a class that implements the <xref:Microsoft.AspNetCore.Rewrite.IRule> interface.</span></span> <span data-ttu-id="ecc32-649">Wenn Sie `IRule` verwenden, können Sie flexibler entscheiden, ob Sie eine methodenbasierte Regel verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="ecc32-649">`IRule` provides greater flexibility over using the method-based rule approach.</span></span> <span data-ttu-id="ecc32-650">Ihre Implementierungsklasse kann einen Konstruktor enthalten, wodurch Sie Parameter für die <xref:Microsoft.AspNetCore.Rewrite.IRule.ApplyRule*>-Methode übergeben können.</span><span class="sxs-lookup"><span data-stu-id="ecc32-650">Your implementation class may include a constructor that allows you can pass in parameters for the <xref:Microsoft.AspNetCore.Rewrite.IRule.ApplyRule*> method.</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=16-17)]

<span data-ttu-id="ecc32-651">Die Werte für die Parameter in der Beispiel-App für `extension` und `newPath` werden auf verschiedene Bedingungen geprüft.</span><span class="sxs-lookup"><span data-stu-id="ecc32-651">The values of the parameters in the sample app for the `extension` and the `newPath` are checked to meet several conditions.</span></span> <span data-ttu-id="ecc32-652">`extension` muss einen Wert enthalten, der *.png* , *.jpg* oder *.gif* entspricht.</span><span class="sxs-lookup"><span data-stu-id="ecc32-652">The `extension` must contain a value, and the value must be *.png* , *.jpg* , or *.gif*.</span></span> <span data-ttu-id="ecc32-653">Wenn `newPath` nicht gültig ist, wird <xref:System.ArgumentException> nicht ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="ecc32-653">If the `newPath` isn't valid, an <xref:System.ArgumentException> is thrown.</span></span> <span data-ttu-id="ecc32-654">Wenn eine Anforderung für *image.png* erfolgt, wird sie zu `/png-images/image.png` umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-654">If a request is made for *image.png* , the request is redirected to `/png-images/image.png`.</span></span> <span data-ttu-id="ecc32-655">Wenn eine Anforderung für *image.jpg* erfolgt, wird die zu `/jpg-images/image.jpg` umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="ecc32-655">If a request is made for *image.jpg* , the request is redirected to `/jpg-images/image.jpg`.</span></span> <span data-ttu-id="ecc32-656">Der Statuscode ist auf *301 – Permanent verschoben* festgelegt, und `context.Result` erhält die Anweisung, Verarbeitungsregeln nicht mehr anzuwenden und die Antwort zu senden.</span><span class="sxs-lookup"><span data-stu-id="ecc32-656">The status code is set to *301 - Moved Permanently* , and the `context.Result` is set to stop processing rules and send the response.</span></span>

[!code-csharp[](url-rewriting/samples/2.x/SampleApp/RewriteRules.cs?name=snippet_RedirectImageRequests)]

<span data-ttu-id="ecc32-657">Ursprüngliche Anforderung: `/image.png`</span><span class="sxs-lookup"><span data-stu-id="ecc32-657">Original Request: `/image.png`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten der image.png-Datei nachverfolgen](url-rewriting/_static/add_redirect_png_requests.png)

<span data-ttu-id="ecc32-659">Ursprüngliche Anforderung: `/image.jpg`</span><span class="sxs-lookup"><span data-stu-id="ecc32-659">Original Request: `/image.jpg`</span></span>

![Browserfenster mit Entwicklertools, die die Anforderungen und Antworten der image.jpg-Datei nachverfolgen](url-rewriting/_static/add_redirect_jpg_requests.png)

## <a name="regex-examples"></a><span data-ttu-id="ecc32-661">RegEx-Beispiele</span><span class="sxs-lookup"><span data-stu-id="ecc32-661">Regex examples</span></span>

| <span data-ttu-id="ecc32-662">Ziel</span><span class="sxs-lookup"><span data-stu-id="ecc32-662">Goal</span></span> | <span data-ttu-id="ecc32-663">RegEx-Zeichenfolge und</span><span class="sxs-lookup"><span data-stu-id="ecc32-663">Regex String &</span></span><br><span data-ttu-id="ecc32-664">übereinstimmendes Beispiel</span><span class="sxs-lookup"><span data-stu-id="ecc32-664">Match Example</span></span> | <span data-ttu-id="ecc32-665">Ersetzungszeichenfolge und</span><span class="sxs-lookup"><span data-stu-id="ecc32-665">Replacement String &</span></span><br><span data-ttu-id="ecc32-666">Ausgabebeispiel</span><span class="sxs-lookup"><span data-stu-id="ecc32-666">Output Example</span></span> |
| ---- | ------------------------------- | -------------------------------------- |
| <span data-ttu-id="ecc32-667">Umschreiben des Pfads in die Abfragezeichenfolge</span><span class="sxs-lookup"><span data-stu-id="ecc32-667">Rewrite path into querystring</span></span> | `^path/(.*)/(.*)`<br>`/path/abc/123` | `path?var1=$1&var2=$2`<br>`/path?var1=abc&var2=123` |
| <span data-ttu-id="ecc32-668">Entfernen des nachgestellten Schrägstrichs</span><span class="sxs-lookup"><span data-stu-id="ecc32-668">Strip trailing slash</span></span> | `(.*)/$`<br>`/path/` | `$1`<br>`/path` |
| <span data-ttu-id="ecc32-669">Erzwingen des nachgestellten Schrägstrichs</span><span class="sxs-lookup"><span data-stu-id="ecc32-669">Enforce trailing slash</span></span> | `(.*[^/])$`<br>`/path` | `$1/`<br>`/path/` |
| <span data-ttu-id="ecc32-670">Vermeiden des Umschreibens von bestimmten Anforderungen</span><span class="sxs-lookup"><span data-stu-id="ecc32-670">Avoid rewriting specific requests</span></span> | <span data-ttu-id="ecc32-671">`^(.*)(?<!\.axd)$` oder `^(?!.*\.axd$)(.*)$`</span><span class="sxs-lookup"><span data-stu-id="ecc32-671">`^(.*)(?<!\.axd)$` or `^(?!.*\.axd$)(.*)$`</span></span><br><span data-ttu-id="ecc32-672">Ja: `/resource.htm`</span><span class="sxs-lookup"><span data-stu-id="ecc32-672">Yes: `/resource.htm`</span></span><br><span data-ttu-id="ecc32-673">Nein: `/resource.axd`</span><span class="sxs-lookup"><span data-stu-id="ecc32-673">No: `/resource.axd`</span></span> | `rewritten/$1`<br>`/rewritten/resource.htm`<br>`/resource.axd` |
| <span data-ttu-id="ecc32-674">Ändern der Anordnung von URL-Segmenten</span><span class="sxs-lookup"><span data-stu-id="ecc32-674">Rearrange URL segments</span></span> | `path/(.*)/(.*)/(.*)`<br>`path/1/2/3` | `path/$3/$2/$1`<br>`path/3/2/1` |
| <span data-ttu-id="ecc32-675">Ersetzen von URL-Segmenten</span><span class="sxs-lookup"><span data-stu-id="ecc32-675">Replace a URL segment</span></span> | `^(.*)/segment2/(.*)`<br>`/segment1/segment2/segment3` | `$1/replaced/$2`<br>`/segment1/replaced/segment3` |

::: moniker-end

## <a name="additional-resources"></a><span data-ttu-id="ecc32-676">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="ecc32-676">Additional resources</span></span>

* <xref:fundamentals/startup>
* <xref:fundamentals/middleware/index>
* [<span data-ttu-id="ecc32-677">Reguläre Ausdrücke in .NET</span><span class="sxs-lookup"><span data-stu-id="ecc32-677">Regular expressions in .NET</span></span>](/dotnet/articles/standard/base-types/regular-expressions)
* [<span data-ttu-id="ecc32-678">Sprachelemente für reguläre Ausdrücke – Kurzübersicht</span><span class="sxs-lookup"><span data-stu-id="ecc32-678">Regular expression language - quick reference</span></span>](/dotnet/articles/standard/base-types/quick-ref)
* [<span data-ttu-id="ecc32-679">Apache: „mod_rewrite“</span><span class="sxs-lookup"><span data-stu-id="ecc32-679">Apache mod_rewrite</span></span>](https://httpd.apache.org/docs/2.4/rewrite/)
* [<span data-ttu-id="ecc32-680">Using Url Rewrite Module 2.0 (for IIS) (Verwenden des URL-Umschreibungsmoduls 2.0 (für IIS))</span><span class="sxs-lookup"><span data-stu-id="ecc32-680">Using Url Rewrite Module 2.0 (for IIS)</span></span>](/iis/extensions/url-rewrite-module/using-url-rewrite-module-20)
* [<span data-ttu-id="ecc32-681">URL Rewrite Module Configuration Reference (Konfigurationsreferenz für das URL-Umschreibungsmodul)</span><span class="sxs-lookup"><span data-stu-id="ecc32-681">URL Rewrite Module Configuration Reference</span></span>](/iis/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)
* [<span data-ttu-id="ecc32-682">Forum zum IIS-URL-Umschreibungsmodul</span><span class="sxs-lookup"><span data-stu-id="ecc32-682">IIS URL Rewrite Module Forum</span></span>](https://forums.iis.net/1152.aspx)
* [<span data-ttu-id="ecc32-683">Einfache Strukturierung von URLs</span><span class="sxs-lookup"><span data-stu-id="ecc32-683">Keep a simple URL structure</span></span>](https://support.google.com/webmasters/answer/76329?hl=en)
* [<span data-ttu-id="ecc32-684">10 URL Rewriting Tips and Tricks (10 Tipps zum Umschreiben von URL)</span><span class="sxs-lookup"><span data-stu-id="ecc32-684">10 URL Rewriting Tips and Tricks</span></span>](https://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/)
* [<span data-ttu-id="ecc32-685">To slash or not to slash (Schrägstriche setzen oder nicht setzen)</span><span class="sxs-lookup"><span data-stu-id="ecc32-685">To slash or not to slash</span></span>](https://webmasters.googleblog.com/2010/04/to-slash-or-not-to-slash.html)
